{"version":3,"file":"theme.min.js","sources":["../../node_modules/srraf/dist/srraf.es.js","../../src/scripts/lib/width-watcher.js","../../src/scripts/lib/modals.js","../../src/scripts/utils/debounce.js","../../src/scripts/lib/media-queries.js","../../src/scripts/lib/events.js","../../src/scripts/lib/navigation.js","../../src/scripts/lib/cart.js","../../src/scripts/sections/header-group.js","../../src/scripts/sections/announcement-bar.js","../../src/scripts/sections/blog-posts.js","../../src/scripts/sections/header.js","../../src/scripts/sections/popups.js","../../src/scripts/lib/at-breakpoint-change.js","../../src/scripts/lib/intersection-watcher.js","../../src/scripts/lib/pauseable-interval.js","../../src/scripts/sections/slideshow.js","../../src/scripts/lib/load-vimeo-api.js","../../src/scripts/lib/load-youtube-api.js","../../src/scripts/lib/video-player-state.js","../../src/scripts/lib/video-player.js","../../src/scripts/lib/external-video-player.js","../../src/scripts/sections/video.js","../../src/scripts/templates/collection.js","../../src/scripts/lib/media-lightbox.js","../../src/scripts/lib/model-viewer.js","../../src/scripts/custom-elements/product-media.js","../../src/scripts/templates/product.js","../../src/scripts/templates/search.js","../../src/scripts/lib/page-transition.js","../../src/scripts/theme.js","../../src/scripts/lib/a11y.js"],"sourcesContent":["var n,e,i,o,t,r,f,d,p,u=[];function w(n,a){return e=window.pageXOffset,o=window.pageYOffset,r=window.innerHeight,d=window.innerWidth,void 0===i&&(i=e),void 0===t&&(t=o),void 0===p&&(p=d),void 0===f&&(f=r),(a||o!==t||e!==i||r!==f||d!==p)&&(!function(n){for(var w=0;w<u.length;w++)u[w]({x:e,y:o,px:i,py:t,vh:r,pvh:f,vw:d,pvw:p},n)}(n),i=e,t=o,f=r,p=d),requestAnimationFrame(w)}export default function(e){return u.indexOf(e)<0&&u.push(e),n=n||w(performance.now()),{update:function(){return w(performance.now(),!0),this},destroy:function(){u.splice(u.indexOf(e),1)}}}\n//# sourceMappingURL=srraf.es.js.map\n","import srraf from \"srraf\"\n\nconst breakpoints = [480, 720, 960, 1024, 1200, 1400]\n\nconst widthWatcher = () => {\n  const reversedBreakpoints = breakpoints.reverse()\n\n  const viewportWidth =\n    window.innerWidth || document.documentElement.clientWidth\n\n  let lastSize = viewportWidth\n\n  srraf(({ vw }) => {\n    document.dispatchEvent(new CustomEvent(\"window:resized\"))\n\n    if (vw > lastSize) {\n      breakpoints.forEach((width) => {\n        if (lastSize < width && vw >= width) {\n          document.dispatchEvent(new CustomEvent(`window:above-${width}`))\n        }\n      })\n    } else {\n      reversedBreakpoints.reverse().forEach((width) => {\n        if (lastSize > width && vw < width) {\n          document.dispatchEvent(new CustomEvent(`window:below-${width}`))\n        }\n      })\n    }\n\n    if (vw !== lastSize) {\n      document.dispatchEvent(new CustomEvent(\"window:width-changed\"))\n    }\n\n    lastSize = vw\n  })\n}\n\nexport default widthWatcher\n","/* eslint-disable accessor-pairs */\n\n/**\n * @class Dialog\n * @description A dialog class\n * @param {HTMLElement} element - The dialog element\n *\n * @property {Object} data - The dialog data\n * @property {HTMLElement} data.element - The dialog element\n * @property {string} data.id - The dialog id\n * @property {HTMLElement} data.title - The dialog title element\n * @property {HTMLElement} data.description - The dialog description element\n *\n * @property {HTMLElement} data.content - The dialog content element\n *\n * @property {boolean} [reusable=false] - If the dialog should be reused\n * @property {boolean} [blurDismiss=false] - If the dialog should be closed on blur\n * @property {boolean} [modal=false] - If the dialog should be a modal\n * @property {boolean} [backdropDismiss=false] - If the dialog should be closed on backdrop click\n * @property {boolean} [closeButton=false] - If the dialog should have a close button\n * @property {Function} [callbackOpen] - Callback function to be called when the dialog is opened\n * @property {Function} [callbackClose] - Callback function to be called when the dialog is closed\n */\nexport class Dialog {\n  #config = {\n    openMethod: \"show\",\n    reusable: false,\n    dynamicContent: false,\n    blurDismiss: false,\n  }\n\n  /**\n   * @constructor\n   * @param {HTMLElement} element - The dialog element\n   * @returns {Dialog} The dialog instance\n   */\n  constructor(element) {\n    // Setup global flu dialog registry\n    if (!window.flu) window.flu = {}\n    if (!window.flu.dialogs) window.flu.dialogs = {}\n\n    // Attempting to initialize a dialog with the same name as existing will return existing dialog instance\n    if (window.flu.dialogs[element.dataset.flucoDialog]) {\n      console.error(\n        `Dialog with id ${element.dataset.flucoDialog} already exists`,\n      )\n      return window.flu.dialogs[element.dataset.flucoDialog]\n    }\n\n    this.data = {\n      element,\n      id: element.dataset.flucoDialog,\n      title: element.querySelector(\"[data-title]\"),\n      description: element.querySelector(\"[data-description]\"),\n      content: element.querySelector(\"[data-content]\"),\n    }\n\n    // add dialog to global flu dialog registry\n    this.#registerDialog(element)\n\n    this.eventController = new AbortController()\n\n    window.addEventListener(\n      `fluco:modal:${this.data.id}:open`,\n      (data) => {\n        this.open(data)\n      },\n      {\n        signal: this.eventController.signal,\n      },\n    )\n\n    window.addEventListener(\n      `fluco:modal:${this.data.id}:close`,\n      () => {\n        this.close()\n      },\n      {\n        signal: this.eventController.signal,\n      },\n    )\n\n    // Prevent \"esc\" key closing the dialog directly so we have time to animate out\n    this.data.element.addEventListener(\"cancel\", (event) => {\n      event.preventDefault()\n      this.close()\n    })\n\n    // Prevent close button from closing the dialog directly so we have time to animate out\n    // Delegate binding so that close buttons in `template` tags are caught\n    this.data.element.addEventListener(\"click\", (event) => {\n      if (event.target.closest(\"form[method='dialog']\")) {\n        this.#handleCloseButtonClick(event)\n      }\n    })\n  }\n\n  /**\n   * @property {string} title - The dialog title\n   * @example\n   * dialog.title = 'My Dialog'\n   */\n  set title(value) {\n    this.data.title.textContent = value\n  }\n\n  /**\n   * @method setTitle\n   * @param {string} title - The dialog title\n   * @returns {Dialog} The dialog instance\n   * @example\n   * dialog.setTitle('My Dialog')\n   */\n  setTitle(title) {\n    this.title = title\n    return this\n  }\n\n  /**\n   * @property {string} description - The dialog description\n   * @example\n   * dialog.description = 'My Dialog Description'\n   */\n  set description(value) {\n    this.data.description.textContent = value\n  }\n\n  /**\n   * @method setDescription\n   * @param {string} description - The dialog description\n   * @returns {Dialog} The dialog instance\n   * @example\n   * dialog.setDescription('My Dialog Description')\n   */\n  setDescription(description) {\n    this.description = description\n    return this\n  }\n\n  /**\n   * @property {string} content - The dialog content\n   * @example\n   * dialog.content = 'My Dialog Content'\n   */\n  set content(value) {\n    this.data.content.innerHTML = value\n  }\n\n  /**\n   * @method setContent\n   * @param {string} content - The dialog content\n   * @returns {Dialog} The dialog instance\n   * @example\n   * dialog.setContent('My Dialog Content')\n   */\n  setContent(content) {\n    this.content = content\n    return this\n  }\n\n  /**\n   * @property {boolean} reusable - If the dialog should be reusable\n   * @example\n   * dialog.reusable = true\n   */\n  set reusable(value) {\n    if (typeof value !== \"boolean\") return\n    this.#config.reusable = value\n  }\n\n  /**\n   * @method setReusable\n   * @param {boolean} reusable - If the dialog should be reusable\n   * @returns {Dialog} The dialog instance\n   * @example\n   * dialog.setReusable(true)\n   */\n  setReusable(reusable) {\n    this.reusable = reusable\n    return this\n  }\n\n  /**\n   * @property {boolean} blurDismiss - If the dialog should be closed on blur\n   * @example\n   * dialog.blurDismiss = true\n   */\n  set blurDismiss(value) {\n    if (typeof value !== \"boolean\") return\n    this.#config.blurDismiss = value\n  }\n\n  /**\n   * @method setBlurDismiss\n   * @param {boolean} blurDismiss - If the dialog should be closed on blur\n   * @returns {Dialog} The dialog instance\n   * @example\n   * dialog.setBlurDismiss(true)\n   */\n  setBlurDismiss(blurDismiss) {\n    this.blurDismiss = blurDismiss\n    return this\n  }\n\n  /**\n   * @property {boolean} modal - If the dialog should be a modal\n   * @example\n   * dialog.modal = true\n   */\n  set modal(value) {\n    if (typeof value === \"boolean\" && value) {\n      this.#config.openMethod = \"showModal\"\n    }\n  }\n\n  /**\n   * @method setModal\n   * @param {boolean} modal - If the dialog should be a modal\n   * @returns {Dialog} The dialog instance\n   * @example\n   * dialog.setModal(true)\n   */\n  setModal(modal) {\n    this.modal = modal\n    return this\n  }\n\n  /**\n   * @property {boolean} backdropDismiss - If the dialog should be closed on backdrop click\n   * @example\n   * dialog.backdropDismiss = true\n   */\n  set backdropDismiss(value) {\n    if (typeof value === \"boolean\" && value) {\n      this.data.element.addEventListener(\"click\", (event) => {\n        // A click on this.data.element is anywhere on the dialog element directly, or its ::backdrop\n        // Direct clicks to element should be prevented by always including a full width/height element\n        // within the dialog.  We do not want the dialog itself to close on click\n        if (event.target === this.data.element) {\n          this.close()\n        }\n      })\n    }\n  }\n\n  /**\n   * @method setBackdropDismiss\n   * @param {boolean} backdropDismiss - If the dialog should be closed on backdrop click\n   * @returns {Dialog} The dialog instance\n   * @example\n   * dialog.setBackdropDismiss(true)\n   */\n  setBackdropDismiss(backdropDismiss) {\n    this.backdropDismiss = backdropDismiss\n    return this\n  }\n\n  /**\n   * @property {Function} callbackOpen - Callback function to be called when the dialog is opened\n   * @example\n   * dialog.callbackOpen = (dialog) => console.log(dialog)\n   */\n  set callbackOpen(callback) {\n    callback(this)\n  }\n\n  /**\n   * @method setCallbackOpen\n   * @param {Function} callback - Callback function to be called when the dialog is opened\n   * @returns {Dialog} The dialog instance\n   * @example\n   * dialog.setCallbackOpen((dialog) => console.log(dialog))\n   */\n  setCallbackOpen(callback) {\n    this.callbackOpen = callback\n    return this\n  }\n\n  /**\n   * @property {Function} callbackClose - Callback function to be called when the dialog is closed\n   * @example\n   * dialog.callbackClose = (dialog) => console.log(dialog)\n   */\n  set callbackClose(callback) {\n    callback(this)\n  }\n\n  /**\n   * @method setCallbackClose\n   * @param {Function} callback - Callback function to be called when the dialog is closed\n   * @returns {Dialog} The dialog instance\n   * @example\n   * dialog.setCallbackClose((dialog) => console.log(dialog))\n   */\n  setCallbackClose(callback) {\n    this.callbackClose = callback\n    return this\n  }\n\n  /**\n   * @method open\n   * @param {Object} detail - The dialog detail\n   * @param {string} detail.title - The dialog title\n   * @param {string} detail.description - The dialog description\n   * @param {string} detail.content - The dialog content\n   * @returns {Dialog} The dialog instance\n   * @example\n   * dialog.open({ title: 'My Dialog', description: 'My Dialog Description', content: 'My Dialog Content' })\n   */\n  open({ detail } = {}) {\n    this.data.element.classList.remove(\"modal--will-close\")\n    return this.#emit(\"opening\")\n      .#setDynamicContent(detail)\n      .#open()\n      .#blurDismiss()\n      .#emit(\"opened\")\n      .#callback(this.callbackOpen)\n  }\n\n  /**\n   * @method close\n   * @returns {Dialog} The dialog instance\n   * @example\n   * dialog.close()\n   */\n  close() {\n    this.data.element.classList.add(\"modal--will-close\")\n    // Detect close animations and wait for them to complete before closing\n    // this requires that animations are applied but not run with \"modal--will-close\"\n    // and actually run with \"modal--trigger-close-animation\"\n    const closeAnimations = this.data.element.getAnimations()\n\n    const actuallyClose = () => {\n      return this.#emit(\"closing\")\n        .#close()\n        .clear()\n        .#emit(\"closed\")\n        .#callback(this.callbackClose)\n    }\n    if (closeAnimations.length) {\n      this.data.element.addEventListener(\n        \"animationend\",\n        () => {\n          this.data.element.classList.remove(\n            \"modal--trigger-close-animation\",\n            \"modal--will-close\",\n          )\n          actuallyClose()\n        },\n        { once: true },\n      )\n      this.data.element.classList.add(\"modal--trigger-close-animation\")\n    } else {\n      actuallyClose()\n    }\n  }\n\n  /**\n   * @method clear\n   * @returns {Dialog} The dialog instance\n   * @example\n   * dialog.clear()\n   */\n  clear() {\n    return this.#setDynamicContent({\n      detail: {\n        title: null,\n        description: null,\n        content: null,\n      },\n    })\n  }\n\n  /**\n   * @method destroy\n   * @description Destroy the dialog, remove event listeners and remove the dialog DOM element.\n   * @param {Object} options - The destroy options\n   * @param {boolean} options.events - If the dialog events should be removed\n   * @param {boolean} options.dom - If the dialog DOM should be removed\n   * @returns {void}\n   * @example\n   * dialog.destroy()\n   */\n  destroy({ events = true, dom = true, deregister = false } = {}) {\n    if (events) {\n      this.eventController.abort()\n\n      if (this.data.closeButton) {\n        this.data.closeButton.removeEventListener(\n          \"click\",\n          this.#handleCloseButtonClick.bind(this),\n        )\n      }\n    }\n\n    if (dom) {\n      this.data.element.remove()\n    }\n\n    if (deregister) {\n      this.#deregisterDialog(this.data.element)\n    }\n  }\n\n  /**\n   * @method setAttribute\n   * Provides a way to set attributes on the dialog element or target children elements given the target parameter.\n   * When provided with 2 parameters, the key and value are set on the dialog element, this behaves exactly like\n   * element.setAttribute(key, value).\n   * When the target parameter is provided, the key and value are set on the target child element, and the value is prefixed\n   * with the dialog instance id, acting like scoping such as a unique element id.\n   * @param {string} key - The attribute key\n   * @param {string} value - The attribute value\n   * @param {string=} target - (optional) The attribute target in this.data\n   * @returns {Dialog} The dialog instance\n   * @example\n   * dialog.setAttribute('id', 'myTitle', 'title')\n   * dialog.setAttribute('id', 'someDescription', 'description')\n   * dialog.setAttribute('aria-labelledby', 'title', 'element')\n   * dialog.setAttribute('aria-describedby', 'description', 'element')\n   * dialog.setAttribute('role', 'dialog')\n   *\n   * <dialog\n   *   data-fluco-dialog=\"myDialog\"\n   *   role=\"dialog\"\n   *   aria-labeledby=\"myDialog-title\"\n   *   aria-describedby=\"myDialog-description\"\n   * >\n   *   <div id=\"myDialog-title\"></div>\n   *   <div id=\"myDialog-description\"></div>\n   *   <div id=\"myDialog-content\"></div>\n   * </dialog>\n   */\n  setAttribute(key, value, target) {\n    target\n      ? this.data?.[target]?.setAttribute(key, `${this.data.id}-${value}`)\n      : this.data?.element?.setAttribute(key, value)\n\n    return this\n  }\n\n  /**\n   * @method #emit\n   * @param {string} eventName - The event name\n   * @returns {Dialog} The dialog instance\n   * @example\n   * this.#emit('opening')\n   * @private\n   * @description Emit a dialog event\n   */\n  #emit(eventName) {\n    window.dispatchEvent(new Event(`fluco:modal:${this.data.id}:${eventName}`))\n\n    return this\n  }\n\n  /**\n   * @method #open\n   * @returns {Dialog} The dialog instance\n   * @example\n   * this.#open()\n   * @private\n   * @description Open the dialog; Within the theme editor, if a setting is\n   * changed related to the dialog, theme editor will create a new dialog\n   * element which will match the data-fluco-dialog attribute of the original\n   * but is not reference equal. In this situation, this method queries the\n   * document for the named element and reapplies the open method.\n   *\n   * we should probably deregister the old dialog and swap in the new one\n   */\n  #open() {\n    if (document.body.contains(this.data.element)) {\n      this.data.element[this.#config.openMethod]()\n    } else {\n      const newDialog = document.querySelector(\n        `[data-fluco-dialog='${this.data.element.dataset.flucoDialog}']`,\n      )\n      newDialog[this.#config.openMethod]()\n\n      this.#deregisterDialog(this.data.element)\n      this.#registerDialog(newDialog)\n    }\n\n    return this\n  }\n\n  /**\n   * @method #close\n   * @returns {Dialog} The dialog instance\n   * @example\n   * this.#close()\n   * @private\n   * @description Close the dialog\n   */\n  #close() {\n    this.data.element.close()\n    return this\n  }\n\n  /**\n   * @method #blurDismiss\n   * @returns {Dialog} The dialog instance\n   * @example\n   * this.#blurDismiss()\n   * @private\n   * @description Close the dialog on blur\n   */\n  #blurDismiss() {\n    if (this.#config.blurDismiss) {\n      window.addEventListener(\"resize\", this.close.bind(this), { once: true })\n    }\n\n    return this\n  }\n\n  /**\n   * @method #setDynamicContent\n   * @param {Object} detail - The dialog data from custom event detail\n   * @param {string} detail.title - The dialog title\n   * @param {string} detail.description - The dialog description\n   * @param {string} detail.content - The dialog content\n   * @returns {Dialog} The dialog instance\n   * @example\n   * this.#setDynamicContent({ title: 'My Dialog', description: 'My Dialog Description', content: 'My Dialog Content' })\n   * @private\n   * @description Set the dialog dynamic content\n   */\n  #setDynamicContent(detail) {\n    if (this.#config.reusable && detail) {\n      this.title = detail.title\n      this.description = detail.description\n      this.content = detail.content\n    }\n\n    return this\n  }\n\n  /**\n   * @method #callback\n   * @param {Function} callbackFunction - The callback function\n   * @returns {Dialog} The dialog instance\n   * @example\n   * this.#callback((dialog) => console.log(dialog))\n   * @private\n   * @description Call a callback function\n   */\n  #callback(callbackFunction) {\n    if (typeof callbackFunction === \"function\") {\n      callbackFunction(this)\n    }\n\n    return this\n  }\n\n  #handleCloseButtonClick(event) {\n    event.preventDefault()\n    this.close()\n  }\n\n  #registerDialog(element) {\n    this.data.element = element\n    window.flu.dialogs[element.dataset.flucoDialog] = [this.data.element, this]\n  }\n\n  #deregisterDialog(element) {\n    delete window.flu.dialogs[element.dataset.flucoDialog]\n    this.data.element = null\n  }\n}\n\n/**\n * @function dialog\n * @param {HTMLElement} element - The dialog element\n * @returns {Dialog} The dialog instance\n * @example\n *\n * When using the Dialog Factory, the dialog is automatically\n * initialized with configuration from the data-attributes:\n *\n * - data-fluco-dialog - The dialog id (required) should be unique\n * - data-fluco-dialog-close-button - adds a close button to the dialog\n * - data-fluco-dialog-backdrop - enables the dialog backdrop\n * - data-fluco-dialog-backdrop-dismiss - enables closing the dialog on backdrop click\n * - data-fluco-dialog-blur-dismiss - enables closing the dialog on blur\n * - data-fluco-dialog-scroll-lock - locks the page scroll when the dialog is open\n * - data-fluco-dialog-mobile-scroll-lock - locks the page scroll when the dialog is open on mobile + tablet\n * - data-fluco-dialog-reusable - enables reusing the dialog, clears content on close\n *\n * <dialog\n *   class=\"modal\"\n *   data-fluco-dialog=myModal\n *   data-fluco-dialog-close-button=true\n *   data-fluco-dialog-backdrop=true\n *   data-fluco-dialog-backdrop-dismiss=true\n *   data-fluco-dialog-blur-dismiss=false\n *   data-fluco-dialog-scroll-lock=true\n *   data-fluco-dialog-mobile-scroll-lock=false\n *   data-fluco-dialog-reusable=true\n * >\n *   <div>\n *     <h2 js-title>Title</h2>\n *     <p js-description>Description</p>\n *     <div js-content>\n *       <p>Some content</p>\n *       <p>Some more content</p>\n *     </div>\n *    </div>\n *  </dialog>\n *\n * dialog(element)\n */\nexport function dialog(element) {\n  const dialog = new Dialog(element)\n\n  for (let [key, value] of Object.entries(element.dataset)) {\n    value = value === \"true\"\n\n    switch (key) {\n      case \"flucoDialogBackdrop\":\n        dialog.setModal(value)\n        break\n      case \"flucoDialogBackdropDismiss\":\n        dialog.setBackdropDismiss(value)\n        dialog.setModal(value)\n        break\n      case \"flucoDialogBlurDismiss\":\n        dialog.setBlurDismiss(value)\n        break\n      case \"flucoDialogReusable\":\n        dialog.setReusable(value)\n        break\n    }\n  }\n\n  dialog\n    .setAttribute(\"id\", \"title\", \"title\")\n    .setAttribute(\"id\", \"description\", \"description\")\n    .setAttribute(\"role\", \"dialog\")\n\n  return dialog\n}\n","export default function debounce() {\n  let timer\n\n  return function (func, time = 100) {\n    if (timer) clearTimeout(timer)\n    timer = setTimeout(func, time)\n  }\n}\n","/**\n *\n * @param {*} querySize Fill in the blank to complete the custom property '--js-{{ querySize }}'.\n * Options maintained within breakpoint.css\n * @returns complete custom property to set breakpoint changes.\n */\nexport default function getMediaQuery(querySize) {\n  const value = getComputedStyle(document.documentElement).getPropertyValue(\n    `--js-${querySize}`,\n  )\n\n  if (!value) {\n    console.warn(\"Invalid querySize passed to getMediaQuery\")\n    return false\n  }\n\n  return value\n}\n","const EVENTS = {\n  QUANTITY_INPUT_CHANGE: \"quantity-input:quantity-changed\",\n  QUICK_ADD_SUCCESS: \"quick-add:success\",\n  QUICK_ADD_ERROR: \"quick-add:error\",\n\n  PRODUCT_VARIANT_CHANGING: \"product:variant:changing\",\n  PRODUCT_VARIANT_CHANGED: \"product:variant:changed\",\n  PRODUCT_ADD_SUCCESS: \"product-add:success\",\n  PRODUCT_ADD_ERROR: \"product-add:error\",\n\n  CART_ITEM_ADDED: \"cart:item-added\",\n  CART_ITEM_CHANGED: \"cart:item-changed\",\n  CART_ITEM_CHANGE_ERROR: \"cart:item-change:error\",\n  CART_ITEM_REMOVED: \"cart:item-removed\",\n  CART_NOTE_CHANGED: \"cart:note-changed\",\n  CART_NOTE_CHANGED_ERROR: \"cart:note-changed:error\",\n  CART_CHANGED: \"cart:changed\",\n  CART_ERROR: \"cart:error\",\n  CART_ITEM_CHANGE_PENDING: \"cart:item-change-pending\",\n\n  CART_DRAWER_OPENING: \"fluco:modal:cartDrawer:opening\",\n  CART_DRAWER_OPEN: \"fluco:modal:cartDrawer:open\",\n  CART_DRAWER_CLOSE: \"fluco:modal:cartDrawer:close\",\n\n  CART_NOTE_OPENED: \"cart-note:opened\",\n\n  FILTER_REPAINT: \"fluco:filters:repaint\",\n  FILTER_SORT_CHANGED: \"fluco:filter-sort:changed\",\n  SORT_CHANGED: \"fluco:sort:changed\",\n\n  ANNOUNCEMENT_HEIGHT_UPDATED: \"fluco:announcement-height:updated\",\n  HEADER_HEIGHT_UPDATED: \"fluco:header-height:updated\",\n\n  SHOPIFY_BLOCK_SELECT: \"shopify:block:select\",\n  SHOPIFY_BLOCK_DESELECT: \"shopify:block:deselect\",\n\n  SHOPIFY_SECTION_DESELECT: \"shopify:section:deselect\",\n  SHOPIFY_SECTION_SELECT: \"shopify:section:select\",\n  SHOPIFY_SECTION_LOAD: \"shopify:section:load\",\n  SHOPIFY_SECTION_UNLOAD: \"shopify:section:unload\",\n\n  ANNOUNCEMENT_BAR_STICKY_CHANGE: \"fluco:announcement-bar:sticky-change\",\n\n  MODAL_PASSWORD_LOGIN_OPEN: \"fluco:modal:passwordLogin:open\",\n\n  MODAL_ADDRESS_NEW_OPEN: \"fluco:modal:new-address:open\",\n  MODAL_ADDRESS_EDIT_OPEN: (addressId) =>\n    `fluco:modal:edit-address-${addressId}:open`,\n\n  MODAL_POPUP_OPEN: (id) => `fluco:modal:${id}:open`,\n  MODAL_POPUP_CLOSE: (id) => `fluco:modal:${id}:close`,\n  MODAL_POPUP_CLOSED: (id) => `fluco:modal:${id}:closed`,\n\n  IMPACT_LOGO_LOADED: \"fluco:impact-logo:loaded\",\n  IMPACT_LOGO_NOT_VISIBLE: \"fluco:impact-logo:not-visible\",\n  IMPACT_LOGO_PARTIALLY_VISIBLE: \"fluco:impact-logo:partially-visible\",\n  IMPACT_LOGO_VISIBLE: \"fluco:impact-logo:visible\",\n\n  MODAL_MOBILE_CROSSBORDER_LANGUAGE_DRAWER_OPEN:\n    \"fluco:modal:mobileLanguageDrawer:open\",\n  MODAL_MOBILE_CROSSBORDER_COUNTRY_DRAWER_OPEN:\n    \"fluco:modal:mobileCountryDrawer:open\",\n\n  SCROLL_SLIDER_CHANGED: (scrollerId) =>\n    `scroll-slider-${scrollerId}:slide-changed`,\n  SCROLL_SLIDER_GO_TO_SLIDE: (scrollerId) =>\n    `scroll-slider-${scrollerId}:go-to-slide`,\n\n  // TODO Consider renaming these events: see usage in product-item.js related to quickview where\n  // it feels a bit off to use \"STARTED\" or \"INCOMPLETED\", because we are not actually doing any request,\n  // just waiting for content to load\n  BUTTON_STATE_STARTED: \"fluco:button-state:started\", // TODO: Consider naming this BUTTON_STATE_LOADING\n  BUTTON_STATE_COMPLETED: \"fluco:button-state:completed\", // ODO: Consider naming this BUTTON_STATE_SUCCESS\n  BUTTON_STATE_INCOMPLETED: \"fluco:button-state:incompleted\", // TODO: consider renaming this BUTTON_STATE_NORMAL\n\n  SEARCH_INPUT_CHANGED: \"fluco:search-input:changed\",\n\n  PREDICTIVE_SEARCH_DRAWER_OPENING:\n    \"fluco:modal:predictiveSearchDrawer:opening\",\n  PREDICTIVE_SEARCH_DRAWER_OPEN: \"fluco:modal:predictiveSearchDrawer:open\",\n  PREDICTIVE_SEARCH_DRAWER_CLOSE: \"fluco:modal:predictiveSearchDrawer:close\",\n}\nexport default EVENTS\n","import srraf from \"srraf\"\nimport Debounce from \"@/utils/debounce.js\"\nimport getMediaQuery from \"../lib/media-queries.js\"\nimport EVENTS from \"../lib/events.js\"\nconst debounce = Debounce()\n\nclass NavigationWrapper extends HTMLElement {\n  selectors = {\n    // Shared\n    nav: \".navigation\",\n    submenu: \".submenu\",\n    submenuContainer: \".submenu__container\",\n    submenuList: \".submenu__list\",\n    submenuItem: \".submenu__item\",\n    stateClasses: \".is-open, .is-opening, .is-closing, .active\",\n    submenuInner: \".submenu__inner\",\n\n    // Drawer\n    drawerToggle: \"label[for=navigation-control]\",\n    drawerToggleInput: \".navigation__control-input\",\n    drawerCloseLabel: \".navigation__control-close\",\n    secondaryDrawerToggle: \".submenu__list-control\",\n    secondaryDrawerToggleHeader: \".submenu-header__control\",\n    toggles: \".submenu__list-control-input\",\n    backdrop: \".navigation__backdrop\",\n    primary: \".submenu--primary\",\n    primaryInner: \".submenu__inner--primary\",\n    childAnimationTarget: \".submenu__header .submenu-header__control--back\",\n\n    // Dropdown\n    secondaryDropdown: \".submenu--secondary\",\n    tertiaryDropdown: \".submenu--tertiary\",\n    primaryDropdownItem: \".submenu__item--primary-submenu\",\n    secondaryDropdownItem: \".submenu__item--secondary-submenu\",\n\n    // Megamenu\n    megamenu: \".submenu--mega\",\n    promoImage: \"[js-manual-load-animation]\",\n    themeEditorSelected: \".is-theme-editor-selected\",\n\n    // Crossborder\n    language: \"[js-language-drawer-trigger]\",\n    country: \"[js-country-drawer-trigger]\",\n\n    scrollSentinels: \"[data-scroll-start], [data-scroll-end]\",\n  }\n\n  classes = {\n    drawer: \"navigation--drawer\",\n    drawerBreakpoint: \"drawer-breakpoint\",\n    dropdownBreakpoint: \"dropdown-breakpoint\",\n\n    openDrawer: \"trigger-open-drawer-animation\",\n    closeDrawer: \"trigger-close-drawer-animation\",\n    openDrawerPanel: \"trigger-open-drawer-panel-animation\",\n    closeDrawerPanel: \"trigger-close-drawer-panel-animation\",\n\n    openDropdown: \"trigger-open-dropdown-animation\",\n    closeDropdown: \"trigger-close-dropdown-animation\",\n\n    dropdownOpensLeft: \"tertiary-menu--opens-left\",\n\n    // state classes\n    open: \"is-open\",\n    opening: \"is-opening\",\n    closing: \"is-closing\",\n    active: \"active\",\n\n    // Image visible class, normally done in image.liquid\n    imageVisible: \"visible\",\n\n    // Theme editor class\n    themeEditorSelected: \"is-theme-editor-selected\",\n  }\n\n  handleThemeEditorBlockEvent(evt) {\n    const menu = this.nav.querySelector(\n      `[data-block-id=\"${evt.detail.blockId}\"]`,\n    )\n    if (!menu) return\n\n    this.#closeOpenMenus()\n\n    if (evt.type === EVENTS.SHOPIFY_BLOCK_SELECT) {\n      menu.classList.add(this.classes.open, this.classes.themeEditorSelected)\n      menu.closest(\"li\").classList.add(this.classes.active)\n      menu.querySelectorAll(this.selectors.promoImage).forEach((el) => {\n        el.classList.add(this.classes.imageVisible)\n      })\n    } else {\n      menu.classList.remove(\"is-open\", this.classes.themeEditorSelected)\n      menu.closest(\"li\").classList.remove(this.classes.active)\n      menu.querySelectorAll(this.selectors.promoImage).forEach((el) => {\n        el.classList.remove(this.classes.imageVisible)\n      })\n    }\n  }\n\n  connectedCallback() {\n    this.eventController = new AbortController()\n    const eventOptions = { signal: this.eventController.signal }\n\n    document.addEventListener(\n      EVENTS.SHOPIFY_SECTION_LOAD,\n      (event) => {\n        if (event?.detail?.sectionId === sectionId) {\n          this.disconnectedCallback()\n          this.connectedCallback()\n        }\n      },\n      eventOptions,\n    )\n\n    if (window.Shopify.designMode) {\n      ;[EVENTS.SHOPIFY_BLOCK_SELECT, EVENTS.SHOPIFY_BLOCK_DESELECT].forEach(\n        (event) => {\n          this.addEventListener(\n            event,\n            this.handleThemeEditorBlockEvent,\n            eventOptions,\n          )\n        },\n      )\n    }\n\n    this.nav = document.querySelector(this.selectors.nav)\n    const nav = this.nav\n    const sectionId = nav\n      .closest(\".shopify-section\")\n      .getAttribute(\"id\")\n      .replace(\"shopify-section-\", \"\")\n\n    // Megamenu promotion animate in offset\n    this.promoVisibleTimingOffset = getComputedStyle(\n      document.documentElement,\n    ).getPropertyValue(\"--animation-timing-300\")\n\n    // warning! this is a hack to ensure\n    // the menus have been fully painted before they are measured.\n    setTimeout(() => {\n      // Setup initial state\n      this.#determineLayoutBreakpoint()\n      this.#setLayoutClasses()\n      this.#setEachSubmenuOpenHeight()\n      this.#setMegamenuPosition()\n      this.#setTertiaryDropdownOpeningDirection()\n    }, 100)\n\n    this.widthWatcher = srraf(({ vw, pvw, vh, pvh }) => {\n      if (vw !== pvw || vh !== pvh) {\n        debounce(() => {\n          this.#closeOpenMenus()\n          this.#determineLayoutBreakpoint()\n          this.#setLayoutClasses()\n          this.#setEachSubmenuOpenHeight()\n          this.#setMegamenuPosition()\n          this.#setTertiaryDropdownOpeningDirection()\n        }, 100)\n      }\n    })\n\n    const languageTrigger = nav.querySelector(this.selectors.language)\n    if (languageTrigger) {\n      languageTrigger.addEventListener(\n        \"click\",\n        () => {\n          window.dispatchEvent(\n            new CustomEvent(\n              EVENTS.MODAL_MOBILE_CROSSBORDER_LANGUAGE_DRAWER_OPEN,\n            ),\n          )\n        },\n        eventOptions,\n      )\n    }\n\n    const countryTrigger = nav.querySelector(this.selectors.country)\n    if (countryTrigger) {\n      countryTrigger.addEventListener(\n        \"click\",\n        () => {\n          window.dispatchEvent(\n            new CustomEvent(\n              EVENTS.MODAL_MOBILE_CROSSBORDER_COUNTRY_DRAWER_OPEN,\n            ),\n          )\n        },\n        eventOptions,\n      )\n    }\n\n    // Tap/Click toggles for drawer\n    const drawerToggles = nav.querySelectorAll(\n      `${this.selectors.drawerToggle}, ${this.selectors.backdrop}`,\n    )\n    drawerToggles.forEach((el) => {\n      el.addEventListener(\n        \"click\",\n        this.handleDrawerToggleClick.bind(this),\n        eventOptions,\n      )\n    })\n\n    this.drawerCloseLabel = nav.querySelector(this.selectors.drawerCloseLabel)\n    this.drawerCloseLabel.addEventListener(\n      \"keydown\",\n      this.handleDrawerCloseKeydown.bind(this),\n      eventOptions,\n    )\n\n    this.drawerToggleInput = nav.querySelector(this.selectors.drawerToggleInput)\n    this.drawerToggleInput.addEventListener(\n      \"keydown\",\n      this.handleDrawerToggleInputKeydown.bind(this),\n      eventOptions,\n    )\n\n    const secondaryDrawerToggles = nav.querySelectorAll(`\n      ${this.selectors.secondaryDrawerToggle},\n      ${this.selectors.secondaryDrawerToggleHeader}\n    `)\n    secondaryDrawerToggles.forEach((toggle) => {\n      toggle.addEventListener(\n        \"click\",\n        this.handleSecondaryDrawerToggleClick.bind(this),\n        eventOptions,\n      )\n    })\n\n    // Hover Dropdowns for primary submenus\n    const dropdownTargets = nav.querySelectorAll(`\n      ${this.selectors.primaryDropdownItem},\n      ${this.selectors.secondaryDropdownItem}\n    `)\n    dropdownTargets.forEach((target) => {\n      target.addEventListener(\n        \"mouseenter\",\n        this.handleDropdownMouseEvent.bind(this, \"mouseenter\"),\n        eventOptions,\n      )\n\n      target.addEventListener(\n        \"mouseleave\",\n        this.handleDropdownMouseEvent.bind(this, \"mouseleave\"),\n        eventOptions,\n      )\n\n      target.addEventListener(\n        \"touchstart\",\n        this.handleDropdownTouchEvent.bind(this),\n        eventOptions,\n      )\n    })\n\n    // scroll sentinels\n    const submenuInners = nav.querySelectorAll(this.selectors.submenuInner)\n    for (const root of submenuInners) {\n      const scrollSentinels = root.querySelectorAll(\n        this.selectors.scrollSentinels,\n      )\n\n      const observer = new IntersectionObserver(this.handleIntersectionChange, {\n        root,\n      })\n\n      scrollSentinels.forEach((entry) => observer.observe(entry))\n    }\n  }\n\n  disconnectedCallback() {\n    this.eventController.abort()\n    this.widthWatcher?.destroy()\n  }\n\n  handleIntersectionChange(entries) {\n    entries.forEach((entry) => {\n      entry.target.setAttribute(\n        \"data-visible\",\n        entry.isIntersecting ||\n          (entry.target.hasAttribute(\"data-scroll-start\") &&\n            entry.target.parentNode.scrollTop === 0),\n      )\n    })\n  }\n\n  // Event Handlers\n  // -------------------------------------\n\n  handleDrawerToggleClick(event) {\n    // We need the input to be \"enabled\", so that it can be focused (ie. reached\n    // via tabbing). Because of this, we need to prevent the click from checking\n    // the checkbox because we handle the associated functionality here in JS.\n    event?.preventDefault()\n\n    const { open, opening } = this.classes\n    const target = this.nav.querySelector(this.selectors.primary)\n\n    if (target.classList.contains(open) || target.classList.contains(opening)) {\n      this.drawerClosePrimary()\n    } else {\n      this.drawerOpenPrimary()\n    }\n  }\n\n  // Because we need the drawer toggle input to be enabled, we also need to prevent\n  // the default keyboard interaction (pressing \"space\" interacts with a checkbox), and\n  // allow for hitting \"Enter\" instead.\n  handleDrawerToggleInputKeydown(event) {\n    if (event.key === \" \") {\n      event.preventDefault()\n    } else if (event.key === \"Enter\") {\n      this.handleDrawerToggleClick()\n    }\n  }\n\n  handleDrawerCloseKeydown(event) {\n    if (event.key === \"Enter\") {\n      this.drawerClosePrimary()\n    }\n  }\n\n  handleSecondaryDrawerToggleClick(event) {\n    const { open } = this.classes\n    let target\n\n    // Could be open/back or close button\n    const submenuItem = event.target.closest(this.selectors.submenuItem)\n    if (!submenuItem) {\n      target = event.target.closest(this.selectors.submenu)\n    } else {\n      target = submenuItem.querySelector(this.selectors.submenu)\n    }\n\n    if (target.classList.contains(open)) {\n      this.drawerCloseSecondary(target)\n    } else {\n      this.drawerOpenSecondary(target)\n    }\n  }\n\n  handleDropdownMouseEvent(eventDirection, event) {\n    if (\n      window.Shopify.designMode &&\n      event.target.querySelector(this.selectors.themeEditorSelected)\n    ) {\n      return\n    }\n\n    if (this.isDrawer) return\n    if (event.target.closest(this.selectors.megamenu)) return\n\n    if (eventDirection === \"mouseleave\") {\n      this.closeDropdown(event.target)\n    } else {\n      this.openDropdown(event.target)\n    }\n  }\n\n  handleDropdownTouchEvent(event) {\n    if (this.isDrawer) return\n\n    if (event.target.classList.contains(\"submenu__item--parent\")) {\n      // Chrome: touchstart clicks the nearest anchor\n      event.preventDefault()\n\n      this.handleDropdownMouseEvent(\"mouseenter\", event)\n    } else {\n      let target = event.target\n\n      // a parent item's span will be the target on the second touch\n      if (target.tagName === \"SPAN\") {\n        target = target.closest(\".submenu__item\")\n      }\n\n      target.querySelector(\"a\").click()\n    }\n  }\n\n  // Drawer\n  // -------------------------------------\n\n  drawerOpenPrimary() {\n    const { openDrawer, opening, open, closing } = this.classes\n    const targetElements = [\n      this.nav.querySelector(this.selectors.primary),\n      this.nav.querySelector(this.selectors.backdrop),\n    ]\n\n    targetElements.forEach((target) => {\n      target.classList.add(openDrawer, opening)\n    })\n\n    const animatingElements = targetElements.flatMap((el) =>\n      el.getAnimations({ subtree: true }),\n    )\n    const pendingAnimationEnds = animatingElements.map(\n      (animation) => animation.finished,\n    )\n\n    Promise.all(pendingAnimationEnds)\n      .then(() => {\n        targetElements.forEach((target) => {\n          target.classList.remove(openDrawer, opening)\n          target.classList.add(open)\n        })\n\n        this.drawerCloseLabel.focus()\n      })\n      .catch(() => {\n        // Manually cleanup state and classes if an animation is interrupted\n        // by closing before open\n        targetElements.forEach((target) => {\n          target.classList.remove(openDrawer, opening)\n          target.classList.remove(openDrawer, open)\n          target.classList.add(closing)\n        })\n      })\n  }\n\n  drawerClosePrimary() {\n    const { closeDrawer, closing, open } = this.classes\n    const targetElements = [\n      this.nav.querySelector(this.selectors.primary),\n      this.nav.querySelector(this.selectors.backdrop),\n    ]\n\n    targetElements.forEach((target) => {\n      target.classList.add(closeDrawer, closing)\n    })\n\n    const animatingElements = targetElements.flatMap((el) =>\n      el.getAnimations({ subtree: true }),\n    )\n    const pendingAnimationEnds = animatingElements.map(\n      (animation) => animation.finished,\n    )\n\n    Promise.all(pendingAnimationEnds).then(() => {\n      targetElements.forEach((target) => {\n        target.classList.remove(closeDrawer, closing, open)\n      })\n\n      this.drawerToggleInput.focus()\n    })\n  }\n\n  drawerOpenSecondary(target) {\n    const { openDrawerPanel, opening, open } = this.classes\n\n    target.classList.add(openDrawerPanel, opening)\n\n    const animatingElements = target.getAnimations({ subtree: true })\n    const pendingAnimationEnds = animatingElements.map(\n      (animation) => animation.finished,\n    )\n\n    const promos = target.querySelectorAll(this.selectors.promoImage)\n    promos.forEach((el) => el.classList.add(this.classes.imageVisible))\n\n    Promise.all(pendingAnimationEnds).then(() => {\n      target.classList.remove(openDrawerPanel, opening)\n      target.classList.add(open)\n    })\n  }\n\n  drawerCloseSecondary(target) {\n    const {\n      active,\n      openDrawerPanel,\n      closeDrawerPanel,\n      closing,\n      open,\n      opening,\n    } = this.classes\n\n    target.classList.add(closeDrawerPanel, closing)\n\n    const animatingElements = target.getAnimations({ subtree: true })\n    const pendingAnimationEnds = animatingElements.map(\n      (animation) => animation.finished,\n    )\n    Promise.all(pendingAnimationEnds)\n      .then(() => {\n        target.classList.remove(closeDrawerPanel, closing, open, active)\n        this.#closeOpenMenus()\n      })\n      .catch(() => {\n        // Manually cleanup state and classes if an animation is interrupted\n        this.nav.querySelectorAll(this.selectors.stateClasses).forEach((el) => {\n          el.classList.remove(\n            open,\n            opening,\n            closing,\n            openDrawerPanel,\n            closeDrawerPanel,\n            active,\n          )\n        })\n      })\n  }\n\n  // Dropdown\n  // -------------------------------------\n\n  openDropdown(target) {\n    const { closeDropdown, openDropdown, closing, opening, open } = this.classes\n    const submenuTarget = target.querySelector(this.selectors.submenu)\n\n    // remove opening animation if retriggering\n    submenuTarget.classList.remove(closeDropdown, closing)\n    submenuTarget.classList.add(openDropdown, opening)\n\n    const animatingElements = submenuTarget.getAnimations({ subtree: true })\n    const pendingAnimationEnds = animatingElements.map(\n      (animation) => animation.finished,\n    )\n\n    const promos = target.querySelectorAll(this.selectors.promoImage)\n    // Delay the promo image animation to allow the dropdown to open a bit before\n    // starting the loaded/visible animation.\n    setTimeout(() => {\n      promos.forEach((el) => el.classList.add(\"visible\"))\n    }, this.promoVisibleTimingOffset)\n\n    Promise.all(pendingAnimationEnds)\n      .then(() => {\n        submenuTarget.classList.remove(openDropdown, opening)\n        submenuTarget.classList.add(open)\n      })\n      .catch(() => {\n        // Manually cleanup attributes and classes if an animation is interrupted\n        submenuTarget.classList.remove(openDropdown, opening, open)\n      })\n  }\n\n  closeDropdown(target) {\n    const { openDropdown, closeDropdown, opening, open, closing } = this.classes\n    const submenuTarget = target.querySelector(this.selectors.submenu)\n\n    // remove opening animation if retriggering\n    submenuTarget.classList.remove(openDropdown, opening, open)\n    submenuTarget.classList.add(closeDropdown, closing)\n\n    const animatingElements = submenuTarget.getAnimations({ subtree: true })\n    const pendingAnimationEnds = animatingElements.map(\n      (animation) => animation.finished,\n    )\n    Promise.all(pendingAnimationEnds)\n      .then(() => {\n        submenuTarget.classList.remove(closeDropdown, closing, open)\n      })\n      .catch(() => {\n        // Manually cleanup attributes and classes if an animation is interrupted\n        submenuTarget.classList.remove(closeDropdown, closing, open)\n      })\n  }\n\n  // Private\n  // -------------------------------------\n\n  #determineLayoutBreakpoint() {\n    // regex matches a floating number from the media query string\n    const breakpointRegex = /([0-9.]+)/g\n\n    const breakpoint = parseFloat(\n      getMediaQuery(\"small-desktop\").match(breakpointRegex)[0],\n    )\n\n    return (this.breakpoint = breakpoint)\n  }\n\n  #setEachSubmenuOpenHeight() {\n    const submenus = this.nav.querySelectorAll(this.selectors.submenu)\n    submenus.forEach((el) => this.#setOpenHeightProp(el))\n  }\n\n  #setLayoutClasses() {\n    const nav = this.nav\n\n    nav.querySelectorAll(this.selectors.stateClasses).forEach((el) => {\n      el.classList.remove(\n        this.classes.open,\n        this.classes.opening,\n        this.classes.closing,\n      )\n    })\n\n    if (nav.classList.contains(this.classes.drawer)) {\n      this.isDrawer = true\n      return nav.classList.add(this.classes.drawerBreakpoint)\n    }\n\n    const isDrawer = (this.isDrawer = window.innerWidth < this.breakpoint)\n\n    nav.classList.toggle(this.classes.drawerBreakpoint, isDrawer)\n    nav.classList.toggle(this.classes.dropdownBreakpoint, !isDrawer)\n  }\n\n  #setOpenHeightProp(el) {\n    const inner = el.querySelector(this.selectors.submenuInner)\n    if (!inner) return\n\n    el.style.removeProperty(\"--js-max-height\")\n    inner.style.maxHeight = \"\"\n\n    // only set the height if the window is large enough for dropdowns\n    if (window.innerWidth < this.breakpoint || this.isDrawer) return\n\n    const { top } = el.getBoundingClientRect()\n    const screenHeightLimit = window.innerHeight - top - 35\n\n    const menuHeight = el.querySelector(\n      this.selectors.submenuContainer,\n    )?.offsetHeight\n    if (!menuHeight) return\n\n    const maxHeight = Math.min(screenHeightLimit, menuHeight)\n\n    el.style.setProperty(\"--js-max-height\", `${maxHeight}px`)\n    inner.style.maxHeight = `${maxHeight}px`\n  }\n\n  #setMegamenuPosition() {\n    // mega menus are positioned to the left edge of the screen\n    // this needs to be calculated as an offset from the left edge of the nav\n    // when the window is resized, the calculation is run again, but\n    // the existing offset will be taken into account by `getBoundingClientRect`\n    // this needs to be compensated for by storing it on the element.\n\n    if (!this.megamenus) {\n      this.megamenus = this.nav.querySelectorAll(this.selectors.megamenu)\n    }\n\n    this.megamenus.forEach((nav) => {\n      nav.style.removeProperty(\"--js-left\", \"0px\")\n      nav.removeAttribute(\"data-left\")\n\n      const currentLeft = Number(nav.getAttribute(\"data-left\")) || 0\n      // Left from client doesn't account for horizontal scrolling which is needed\n      // to prevent the nav going wider than the screen\n      const scrollAccountedLeft =\n        nav.getBoundingClientRect().left + window.scrollX\n      const newLeft = scrollAccountedLeft + currentLeft\n\n      nav.style.setProperty(\"--js-left\", `${Math.abs(newLeft)}px`)\n      nav.setAttribute(\"data-left\", newLeft)\n    })\n  }\n\n  #setTertiaryDropdownOpeningDirection() {\n    // Default is to open the right if space permits,\n    // otherwise it opens to the left to prevent expanding the site width\n    const dropdowns = this.querySelectorAll(this.selectors.secondaryDropdown)\n    const submenuWidth = parseInt(\n      getComputedStyle(document.documentElement)\n        .getPropertyValue(\"--submenu-width\")\n        .replace(\"px\", \"\"),\n      10,\n    )\n\n    dropdowns.forEach((dropdown) => {\n      // The secondary menu never moves making it more stable for screen size changes\n      const tertiaryRightPlacement =\n        dropdown.getBoundingClientRect().right + submenuWidth\n      const tertiaryMenuTooFarRight = tertiaryRightPlacement > window.innerWidth\n      const tertiaries = dropdown.querySelectorAll(\n        this.selectors.tertiaryDropdown,\n      )\n\n      tertiaries.forEach((tertiary) => {\n        tertiary.classList.toggle(\n          this.classes.dropdownOpensLeft,\n          tertiaryMenuTooFarRight,\n        )\n      })\n    })\n  }\n\n  #closeOpenMenus(parent = this.nav) {\n    document.querySelectorAll(this.selectors.toggles).forEach((el) => {\n      el.checked = false\n    })\n  }\n}\n\nif (!customElements.get(\"navigation-wrapper\")) {\n  customElements.define(\"navigation-wrapper\", NavigationWrapper)\n}\n","import EVENTS from \"@/lib/events.js\"\n\nconst routes = window.theme.routes.cart || {}\n\nconst paths = {\n  base: `${routes.base || \"/cart\"}.js`,\n  add: `${routes.add || \"/cart/add\"}.js`,\n  change: `${routes.change || \"/cart/change\"}.js`,\n  update: `${routes.update || \"/cart/update\"}.js`,\n}\n\nconst actions = {\n  addItem: \"add_item\",\n  removeItem: \"remove_item\",\n  changeItemQuantity: \"change_item_quantity\",\n  noteChange: \"note_change\",\n}\n\nconst contexts = {\n  productPage: \"product_page\",\n  productItem: \"product_item\",\n  cartDrawer: \"cart_drawer\",\n  crossSells: \"cross_sells\",\n}\n\n/**\n * Fetches the current cart object.\n *\n * @returns {Promise<Object>} The promise resolves with the cart data as an object.\n */\nfunction get() {\n  return fetch(paths.base, {\n    method: \"GET\",\n    credentials: \"include\",\n  })\n    .then((response) => response.json())\n    .then((data) => {\n      return data\n    })\n}\n\n/**\n * Adds a single item to the cart, based on an HTML product form.\n *\n * @param {HTMLElement} form - The HTML form being submitted.\n * @param {string} [context] - The area of the theme that is adding the item. Should be one of contexts.\n * @param {HTMLElement} target - The parent element that's trying to add the item.\n */\nfunction addItemByForm(form, context, target) {\n  const formData = new FormData(form)\n\n  return fetch(paths.add, {\n    method: \"POST\",\n    headers: {\n      \"X-Requested-With\": \"XMLHttpRequest\",\n    },\n    body: formData,\n  })\n    .then((response) => response.json())\n    .then(async (data) => {\n      if (data.status === 422) {\n        const errorContent = {\n          errors: data.errors,\n          message: data.message,\n          description: data.description,\n        }\n\n        _handleError(errorContent, actions.addItem, {\n          context,\n          target,\n        })\n      } else {\n        // For some reason the add endpoint only returns the added item,\n        // not the whole cart like other endpoints. We can fetch the cart and\n        // insert items_added\n        const cartData = await get()\n        const combinedCartData = {\n          ...cartData,\n          items_added: data.items,\n        }\n\n        _emitEvent(actions.addItem, combinedCartData, {\n          context,\n          target,\n        })\n      }\n    })\n}\n\n/**\n * Adds a given quantity of a given variant to the cart.\n *\n * @param {number} variantId - The variant ID of the variant to be added to the cart.\n * @param {number} quantity - The quanity to be added.\n * @param {string} [context] - The context where the change happened, one of contexts.\n * @param {HTMLElement} [target] - The parent element that's trying to add the item.\n */\nfunction addItemById(variantId, quantity, context, target) {\n  const fetchData = {\n    items: [\n      {\n        id: variantId,\n        quantity,\n      },\n    ],\n  }\n\n  return fetch(paths.add, {\n    method: \"POST\",\n    credentials: \"include\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify(fetchData),\n  })\n    .then((response) => response.json())\n    .then(async (data) => {\n      // TODO: what about other errors? (Shopify platform errors?)\n      if (data.status === 422) {\n        _handleError(data.description, actions.addItem, {\n          context,\n          target,\n          itemKeyOrId: variantId,\n        })\n      } else {\n        // For some reason the add endpoint only returns the added item,\n        // not the whole cart like other endpoints. We can fetch the cart and\n        // insert items_added\n        const cartData = await get()\n        const combinedCartData = {\n          ...cartData,\n          items_added: data.items,\n        }\n\n        _emitEvent(actions.addItem, combinedCartData, {\n          context,\n          target,\n        })\n      }\n    })\n}\n\n/**\n * Updates the quantity of a given cart item.\n *\n * @param {HTMLElement} target - The parent element that's trying to change the item.\n * @param {string|number} id - The item's variant ID or line item key.\n * @param {number} quantity - The new quantity for the item.\n * @param {string} context - The context where the change happened, one of contexts\n */\nfunction changeItemQuantity(target, id, quantity, context) {\n  const fetchData = {\n    id,\n    quantity,\n  }\n\n  return fetch(paths.change, {\n    method: \"POST\",\n    credentials: \"include\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify(fetchData),\n  })\n    .then((response) => response.json())\n    .then((data) => {\n      // TODO: what about other errors? (Shopify platform errors?)\n      if (data.status === 422) {\n        _handleError(data.description, actions.changeItemQuantity, {\n          context,\n          target,\n          itemKeyOrId: id,\n        })\n      } else {\n        _emitEvent(actions.changeItemQuantity, data, {\n          context,\n          target,\n        })\n      }\n    })\n}\n/**\n * Updates the cart note\n *\n * @param {HTMLElement} target - The parent element that's trying to update the note.\n * @param {string} note - The cart note.\n\n */\nfunction updateNote(target, note) {\n  const fetchData = {\n    note,\n  }\n  return fetch(paths.update, {\n    method: \"POST\",\n    credentials: \"include\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify(fetchData),\n  })\n    .then((response) => response.json())\n    .then((data) => {\n      if (!data.note) {\n        // throw new Error(\"Error updating cart note\")\n        _handleError(data.description, actions.noteChange, {\n          context: null,\n          target,\n        })\n      } else {\n        _emitEvent(actions.noteChange, data)\n      }\n    })\n}\n\n/**\n * Emits events based on the source action and optional context.\n *\n * @param {string} action - The action made. Should be one of actions.\n * @param {Object} cartData - The cart object that reflects the action's change.\n * @param {Object} [options] - The options object.\n * @param {HTMLElement} [options.target] - The element to emit the event onto. Defaults to the document.\n * @param {HTMLElement} [options.context] - The context that originated the action. Should be one of contexts.\n */\nfunction _emitEvent(action, cartData, options = {}) {\n  const target = options.target || document\n\n  const eventOptions = {\n    detail: {\n      cartData,\n    },\n    bubbles: true,\n  }\n\n  if (action === actions.addItem) {\n    // We need this general \"Cart item added\" event to open the cart drawer, however\n    // we want to delay that until after success display has shown\n    setTimeout(() => {\n      target.dispatchEvent(\n        new CustomEvent(EVENTS.CART_ITEM_ADDED, eventOptions),\n      )\n    }, 1000)\n\n    // If the event originated at the product item, trigger a quick add success as well\n    if (options.context === contexts.productItem) {\n      target.dispatchEvent(\n        new CustomEvent(EVENTS.QUICK_ADD_SUCCESS, eventOptions),\n      )\n    } else if (options.context === contexts.productPage) {\n      target.dispatchEvent(\n        new CustomEvent(EVENTS.PRODUCT_ADD_SUCCESS, eventOptions),\n      )\n    }\n  } else if (action === actions.removeItem) {\n    target.dispatchEvent(\n      new CustomEvent(EVENTS.CART_ITEM_REMOVED, eventOptions),\n    )\n  } else if (action === actions.changeItemQuantity) {\n    target.dispatchEvent(\n      new CustomEvent(EVENTS.CART_ITEM_CHANGED, eventOptions),\n    )\n  } else if (action === actions.noteChange) {\n    target.dispatchEvent(\n      new CustomEvent(EVENTS.CART_NOTE_CHANGED, eventOptions),\n    )\n  }\n\n  // Trigger a general cart change event on the document\n  document.dispatchEvent(new CustomEvent(EVENTS.CART_CHANGED, eventOptions))\n}\n\n/**\n * Handles emitting error events for given a cart function.\n *\n * @param {string} errorMessage - The error message.\n * @param {string} source - The name of the cart function that triggered the error.\n * @param {HTMLElement} target - The parent element that called the above cart function.\n * @param {string|number} [itemKeyOrId] - The key or ID of the item being referenced.\n */\nfunction _handleError(errorMessage, action, options = {}) {\n  switch (action) {\n    case actions.addItem: {\n      if (options.context === contexts.productPage) {\n        options.target.dispatchEvent(\n          new CustomEvent(EVENTS.PRODUCT_ADD_ERROR, {\n            detail: {\n              errorMessage,\n            },\n          }),\n        )\n      } else if (options.context === contexts.productItem) {\n        options.target.dispatchEvent(\n          new CustomEvent(EVENTS.QUICK_ADD_ERROR, {\n            detail: {\n              cartItemKeyOrId: options.itemKeyOrId,\n              errorMessage,\n            },\n          }),\n        )\n      }\n\n      break\n    }\n\n    case actions.changeItemQuantity: {\n      options.target.dispatchEvent(\n        new CustomEvent(EVENTS.CART_ITEM_CHANGE_ERROR, {\n          detail: {\n            cartItemKeyOrId: options.itemKeyOrId,\n            errorMessage,\n          },\n        }),\n      )\n      break\n    }\n\n    case actions.noteChange: {\n      options.target.dispatchEvent(\n        new CustomEvent(EVENTS.CART_NOTE_CHANGED_ERROR, {\n          detail: {\n            errorMessage,\n          },\n        }),\n      )\n      break\n    }\n  }\n\n  document.dispatchEvent(\n    new CustomEvent(EVENTS.CART_ERROR, {\n      detail: { errorMessage },\n    }),\n  )\n}\n\nexport {\n  get,\n  addItemByForm,\n  addItemById,\n  changeItemQuantity,\n  updateNote,\n  actions,\n  contexts,\n}\n","import EVENTS from \"../lib/events.js\"\nimport srraf from \"srraf\"\n\nclass HeaderGroup {\n  #previousImpactLogoVisibility = false\n\n  constructor() {\n    // keep running srraf after it passes the bottom of the impact logo by this amount\n    this.overscrollThreshold = 100\n\n    this.selectors = {\n      announcementBar: \"announcement-bar\",\n      header: \"header-wrapper\",\n      impactLogo: \"impact-logo\",\n    }\n\n    this.init()\n  }\n\n  init() {\n    // setup the event handling for it all\n    this.announcementBar = document.querySelector(\n      this.selectors.announcementBar,\n    )\n    this.header = document.querySelector(this.selectors.header)\n    this.impactLogo = document.querySelector(this.selectors.impactLogo)\n\n    // if we don't have a header, we don't need to do anything\n    if (!this.header) return\n    // if impact logo isn't present, we stick the header immediately\n    if (!this.impactLogo) {\n      this.header.setAttribute(\"data-reveal-logo\", true)\n    }\n\n    // Theme Editor: sectionIds to watch changes\n    const ids = [\n      this.header.dataset.sectionId,\n      this.announcementBar?.dataset.sectionId,\n      this.impactLogo?.dataset.sectionId,\n    ]\n      .filter(Boolean)\n      .map((id) => id.replace(\"shopify-section-\", \"\"))\n\n    this.controller = new AbortController()\n    const eventOptions = { signal: this.controller.signal }\n\n    // Theme Editor: watch for section load events\n    document.addEventListener(\n      EVENTS.SHOPIFY_SECTION_LOAD,\n      (event) => {\n        this.controller.abort()\n        this.watcher?.destroy()\n        this.init()\n      },\n      eventOptions,\n    )\n\n    document.addEventListener(\n      EVENTS.SHOPIFY_SECTION_UNLOAD,\n      (event) => {\n        if (event?.detail?.sectionId && ids.includes(event.detail.sectionId)) {\n          this.controller.abort()\n          this.watcher?.destroy()\n          setTimeout(() => {\n            this.init()\n          }, 100)\n        }\n      },\n      eventOptions,\n    )\n\n    this.announcementBarBox = this.announcementBar?.getBoundingClientRect()\n    this.headerBox = this.header?.getBoundingClientRect()\n    this.impactLogoBox = this.impactLogo?.getBoundingClientRect()\n\n    // We need to update the *Box bottom values with the window scrollY on load\n    this.announcementBarBoxBottom =\n      window.scrollY + (this.announcementBarBox?.bottom || 0)\n    this.headerBoxBottom = window.scrollY + (this.headerBox?.bottom || 0)\n    this.impactLogoBoxBottom =\n      window.scrollY + (this.impactLogoBox?.bottom || 0)\n\n    this.instantSticky = this.header.dataset.stickyHeaderStyle === \"instant\"\n\n    const maxHeightToWatch = this.impactLogoBoxbottom + this.overscrollThreshold\n    this.watcher = srraf(({ y, py }) => {\n      if (maxHeightToWatch < y) return\n      if (y === py) return\n\n      this.#handleScroll(y)\n    })\n    this.#handleScroll(window.scrollY)\n  }\n\n  #handleScroll(y) {\n    if (this.instantSticky) {\n      const stuckHeaderHeight =\n        this.headerBox.height + (this.announcementBarBox?.height || 0)\n      // Set visibilities of the components\n      this.announcementBar?.setAttribute(\n        \"data-is-visible\",\n        y < this.announcementBarBoxBottom,\n      )\n      this.header?.setAttribute(\"data-is-visible\", y < this.headerBoxBottom)\n      this.impactLogo?.setAttribute(\n        \"data-is-visible\",\n        y < this.impactLogoBoxBottom - stuckHeaderHeight,\n      )\n\n      if (y > 0) {\n        this.header.setAttribute(\"data-is-sticky\", true)\n\n        // Impact logo visibility change\n        if (\n          this.impactLogo &&\n          this.impactLogo.getAttribute(\"data-is-visible\") !==\n            this.#previousImpactLogoVisibility\n        ) {\n          this.#previousImpactLogoVisibility =\n            this.impactLogo.getAttribute(\"data-is-visible\")\n\n          const revealLogo = y > this.impactLogoBoxBottom - stuckHeaderHeight\n          this.header.setAttribute(\"data-reveal-logo\", revealLogo)\n        } else {\n          this.header.setAttribute(\"data-is-sticky\", true)\n        }\n      } else {\n        this.header.setAttribute(\"data-is-sticky\", false)\n      }\n    } else {\n      // Set visibilities of the components\n\n      if (this.announcementBar) {\n        this.announcementBar.setAttribute(\n          \"data-is-visible\",\n          y < this.announcementBarBoxBottom,\n        )\n\n        // if it's a delayed sticky, we set the translateY to an inverse of the height of the header\n        // then when the impact logo is out of view, we can transition the translateY to 0\n        if (y > this.announcementBarBoxBottom) {\n          this.announcementBar.parentNode.style.setProperty(\n            \"--announcement-bar-translate-y\",\n            `-${this.headerBox.height}px`,\n          )\n        } else {\n          this.announcementBar.parentNode.style.setProperty(\n            \"--announcement-bar-translate-y\",\n            0,\n          )\n        }\n      }\n\n      if (this.header) {\n        this.header?.setAttribute(\"data-is-visible\", y < this.headerBoxBottom)\n\n        // if it's a delayed sticky, we set the translateY to an inverse of the height of the header\n        // then when the impact logo is out of view, we can transition the translateY to 0\n        if (y > this.headerBoxBottom) {\n          this.header.parentNode.style.setProperty(\n            \"--header-translate-y\",\n            `-${this.headerBox.height}px`,\n          )\n          this.header.setAttribute(\"data-reveal-logo\", true)\n        } else {\n          if (!this.impactLogo) {\n            this.header.setAttribute(\"data-is-sticky\", y > 0)\n            this.header.setAttribute(\"data-reveal-logo\", true)\n          } else {\n            this.header.setAttribute(\"data-reveal-logo\", false)\n          }\n\n          this.header.parentNode.style.setProperty(\"--header-translate-y\", 0)\n        }\n      }\n\n      if (this.impactLogo) {\n        this.impactLogo.setAttribute(\n          \"data-is-visible\",\n          y < this.impactLogoBoxBottom,\n        )\n\n        if (\n          this.impactLogo?.getAttribute(\"data-is-visible\") !==\n          this.#previousImpactLogoVisibility\n        ) {\n          this.#previousImpactLogoVisibility =\n            this.impactLogo?.getAttribute(\"data-is-visible\")\n\n          if (y > this.impactLogoBoxBottom) {\n            this.header.setAttribute(\"data-is-sticky\", true)\n          } else {\n            this.header.setAttribute(\"data-is-sticky\", false)\n          }\n        }\n      }\n    }\n  }\n}\n\nwindow.addEventListener(\"DOMContentLoaded\", () => new HeaderGroup())\n","import srraf from \"srraf\"\nimport getMediaQuery from \"../lib/media-queries.js\"\nimport debounce from \"@/utils/debounce.js\"\nimport EVENTS from \"../lib/events.js\"\n\nconst {\n  ANNOUNCEMENT_HEIGHT_UPDATED,\n  SHOPIFY_BLOCK_SELECT,\n  SHOPIFY_BLOCK_DESELECT,\n} = EVENTS\n\n// regex matches a floating number from the media query string\nconst breakpointRegex = /([0-9.]+)/g\n\nclass AnnouncementBar extends HTMLElement {\n  static observedAttributes = [\"data-style\"]\n\n  constructor() {\n    super()\n\n    this.debounce = debounce()\n\n    this.selectors = {\n      announcementSlider: \"announcement-slider\",\n    }\n  }\n\n  connectedCallback() {\n    this.eventController = new AbortController()\n    const eventOptions = { signal: this.eventController.signal }\n\n    this.parentElement.addEventListener(\n      SHOPIFY_BLOCK_SELECT,\n      (e) => this.handleBlockSelected(e.detail.blockId),\n      eventOptions,\n    )\n\n    this.parentElement.addEventListener(\n      SHOPIFY_BLOCK_DESELECT,\n      () => this.handleBlockDeselected(),\n      eventOptions,\n    )\n\n    this.setHeightVariable()\n    this.stickIfNecessary()\n    this.widthWatcher = srraf(({ vw, pvw }) => {\n      if (vw === pvw) return\n      this.debounce(() => {\n        this.setHeightVariable()\n        this.stickIfNecessary()\n      })\n    })\n  }\n\n  disconnectedCallback() {\n    this.eventController.abort()\n    this.widthWatcher?.destroy()\n  }\n\n  attributeChangedCallback(name, _oldValue, newValue) {\n    // if announcement style is changed to slideshow, track it\n    if (name === \"data-style\") {\n      if (newValue === \"slideshow\") {\n        this.sliderComponent = this.querySelector(\n          this.selectors.announcementSlider,\n        )\n      } else {\n        this.sliderComponent = null\n      }\n    }\n  }\n\n  stickIfNecessary() {\n    const stickyCondition = this.dataset.enableStickyAnnouncementBar\n    if (stickyCondition === \"never\") return\n\n    const setSticky = (bool) => this.toggleAttribute(\"data-sticky\", bool)\n    const breakpoint = parseFloat(\n      getMediaQuery(\"mobile\").match(breakpointRegex)[0],\n    )\n\n    switch (stickyCondition) {\n      case \"desktop-and-mobile\":\n        setSticky(true)\n        break\n      case \"desktop\":\n        setSticky(window.innerWidth >= breakpoint)\n        break\n      case \"mobile\":\n        setSticky(window.innerWidth < breakpoint)\n        break\n    }\n  }\n\n  /**\n   * Pauses the slider and changes to the selected block's slide.\n   * @param {String} blockId - The block ID for the selected block.\n   */\n  handleBlockSelected(blockId) {\n    this.setSliderAutoplay(\"false\")\n    this.setSliderActiveBlock(blockId)\n  }\n\n  /**\n   * Resumes the slider and resets the selected block.\n   */\n  handleBlockDeselected() {\n    this.setSliderAutoplay(\"true\")\n    this.setSliderActiveBlock(\"\")\n  }\n\n  /**\n   * Sets the slider's autoplay attribute value.\n   * @param {String} value - The autoplay state, as either \"true\" or \"false\".\n   */\n  setSliderAutoplay(value) {\n    if (this.sliderComponent) {\n      this.sliderComponent.dataset.autoplay = value\n    }\n  }\n\n  /**\n   * Sets the slider's active block id.\n   * @param {String} blockId - The block ID for the selected block.\n   */\n  setSliderActiveBlock(blockId) {\n    if (this.sliderComponent) {\n      this.sliderComponent.dataset.activeBlockId = blockId\n    }\n  }\n\n  /**\n   * Measures the announcement bar's height and applies that value to a document CSS variable.\n   */\n  setHeightVariable() {\n    // We have to use a high-resolution height value to avoid rounding errors\n    // this.offsetHeight rounds to 37px where getBoundingClientRect().height is 36.578125px\n    // this fixes the browser rendering a 1px gap between the announcement bar and the header\n    const height = this.getBoundingClientRect().height.toFixed(2)\n\n    if (height !== this.lastSetHeight) {\n      document.documentElement.style.setProperty(\n        \"--announcement-height\",\n        `${height}px`,\n      )\n      document.dispatchEvent(\n        new CustomEvent(ANNOUNCEMENT_HEIGHT_UPDATED, {\n          detail: { height },\n        }),\n      )\n      this.lastSetHeight = height\n    }\n  }\n}\n\nif (!customElements.get(\"announcement-bar\")) {\n  customElements.define(\"announcement-bar\", AnnouncementBar)\n}\n","class BlogPosts extends HTMLElement {\n  constructor() {\n    super()\n\n    this.selectors = {\n      sidebar: \"[js-sidebar]\",\n      sidebarImageWrapper: \"[js-image-wrapper]\",\n      sidebarLink: \"[js-sidebar-link]\",\n    }\n  }\n\n  connectedCallback() {\n    this.sidebar = this.querySelector(this.selectors.sidebar)\n\n    if (this.sidebar === null) return\n\n    this.sidebarImageWrapper = this.sidebar.querySelectorAll(\n      this.selectors.sidebarImageWrapper,\n    )\n\n    this.eventController = new AbortController()\n    const eventOptions = { signal: this.eventController.signal }\n\n    this.sidebar.addEventListener(\"mouseleave\", () => {\n      this.sidebar.dataset.cursorWithin = false\n    })\n\n    this.sidebarImageWrapper.forEach((wrapper) => {\n      const parentMetaEl = wrapper.parentElement\n      const sidebarImage = parentMetaEl.querySelector(\"img\")\n      const hoverTrigger = parentMetaEl.querySelector(\n        this.selectors.sidebarLink,\n      )\n\n      hoverTrigger.addEventListener(\n        \"mouseenter\",\n        () => {\n          setTimeout(() => {\n            this.sidebar.dataset.cursorWithin = true\n          }, 240) // give the mouse-in animation some time\n        },\n        eventOptions,\n      )\n\n      hoverTrigger.addEventListener(\n        \"mousemove\",\n        (e) => {\n          sidebarImage.style.left = `${\n            e.clientX - e.target.getBoundingClientRect().left\n          }px`\n        },\n        eventOptions,\n      )\n    })\n  }\n\n  disconnectedCallback() {\n    this.eventController.abort()\n  }\n}\n\nif (!customElements.get(\"blog-posts\")) {\n  customElements.define(\"blog-posts\", BlogPosts)\n}\n","import srraf from \"srraf\"\nimport EVENTS from \"../lib/events.js\"\n\nconst {\n  CART_DRAWER_OPEN,\n  PREDICTIVE_SEARCH_DRAWER_OPEN,\n  HEADER_HEIGHT_UPDATED,\n  SHOPIFY_BLOCK_SELECT,\n  SHOPIFY_BLOCK_DESELECT,\n} = EVENTS\n\nclass HeaderWrapper extends HTMLElement {\n  static observedAttributes = [\"data-is-sticky\"]\n\n  constructor() {\n    super()\n\n    this.selectors = {\n      showCartDrawerButton: \"[data-action='show-cart-drawer']\",\n      showPredictiveSearchDrawerButton:\n        \"[data-action='show-predictive-search-drawer']\",\n    }\n  }\n\n  connectedCallback() {\n    this.eventController = new AbortController()\n    this.eventController2 = new AbortController()\n\n    const eventOptions = { signal: this.eventController.signal }\n\n    this.parentElement.addEventListener(\n      SHOPIFY_BLOCK_SELECT,\n      (e) => this.handleBlockSelected(e.detail.blockId),\n      eventOptions,\n    )\n\n    this.parentElement.addEventListener(\n      SHOPIFY_BLOCK_DESELECT,\n      () => this.handleBlockDeselected(),\n      eventOptions,\n    )\n\n    this.setHeightVariable()\n    this.widthWatcher = srraf(({ vw, pvw }) => {\n      if (vw === pvw) return\n      this.setHeightVariable()\n    })\n\n    // Cart Drawer button\n    this.querySelectorAll(this.selectors.showCartDrawerButton).forEach(\n      (element) => {\n        element.addEventListener(\"click\", (event) => {\n          event.preventDefault()\n          window.dispatchEvent(new Event(CART_DRAWER_OPEN))\n        })\n      },\n    )\n\n    // Search button\n    this.querySelectorAll(\n      this.selectors.showPredictiveSearchDrawerButton,\n    ).forEach((element) => {\n      element.addEventListener(\"click\", (event) => {\n        event.preventDefault()\n        window.dispatchEvent(new Event(PREDICTIVE_SEARCH_DRAWER_OPEN))\n      })\n    })\n  }\n\n  disconnectedCallback() {\n    this.eventController.abort()\n    this.eventController2.abort()\n    this.widthWatcher?.destroy()\n  }\n\n  attributeChangedCallback(name, _oldValue, _newValue) {\n    if (name === \"data-is-sticky\") {\n      this.setHeightVariable()\n    }\n  }\n\n  handleBlockSelected() {}\n\n  handleBlockDeselected() {}\n\n  /**\n   * Measures the header's height and applies that value to a document CSS variable.\n   * The header uses the `-internal` custom property to position itself out of the viewport\n   * until it has become stuck.\n   *\n   * the public `--header-height` is available to see the headers height when stuck.\n   */\n  setHeightVariable() {\n    if (this.offsetHeight !== this.lastSetHeight) {\n      document.documentElement.style.setProperty(\n        \"--header-height-internal\",\n        `${this.offsetHeight}px`,\n      )\n\n      document.addEventListener(\n        \"visibilitychange\",\n        () => {\n          if (document.visibilityState === \"hidden\") {\n            // eslint-disable-next-line no-undef , no-process-env\n            navigator?.sendBeacon(process.env.FLU_PING_ENDPOINT, Shopify.shop)\n            this.eventController2.abort()\n          }\n        },\n        { signal: this.eventController2.signal },\n      )\n\n      document.dispatchEvent(\n        new CustomEvent(HEADER_HEIGHT_UPDATED, {\n          detail: { height: this.offsetHeight },\n        }),\n      )\n      this.lastSetHeight = this.offsetHeight\n    }\n\n    // Header height var set to 0 when it's sticky but isn't stuck, or isn't sticky\n    if (\n      this.dataset.isSticky === \"false\" ||\n      this.dataset.enableStickyHeader === \"false\"\n    ) {\n      document.documentElement.style.setProperty(\"--header-height\", \"0px\")\n      return\n    }\n\n    // Header is stuck, make the internal height the public height\n    if (this.dataset.enableStickyHeader === \"true\") {\n      document.documentElement.style.setProperty(\n        \"--header-height\",\n        `${this.offsetHeight}px`,\n      )\n    }\n  }\n}\n\nif (!customElements.get(\"header-wrapper\")) {\n  customElements.define(\"header-wrapper\", HeaderWrapper)\n}\n","import EVENTS from \"../lib/events.js\"\nimport { dialog } from \"@/lib/modals.js\"\n\nconst {\n  MODAL_POPUP_OPEN,\n  MODAL_POPUP_CLOSE,\n  SHOPIFY_BLOCK_SELECT,\n  SHOPIFY_BLOCK_DESELECT,\n  SHOPIFY_SECTION_LOAD,\n} = EVENTS\n\nclass PopupsSection extends HTMLElement {\n  constructor() {\n    super()\n\n    this.classes = { visible: \"visible\" }\n\n    this.selectors = { tab: (id) => `[js-popup-tab][data-id=\"${id}\"]` }\n  }\n\n  connectedCallback() {\n    this.eventController = new AbortController()\n\n    this.parentElement.addEventListener(\n      SHOPIFY_BLOCK_SELECT,\n      (e) => {\n        this.#handleBlockSelected(e)\n      },\n      {\n        signal: this.eventController.signal,\n      },\n    )\n    this.parentElement.addEventListener(\n      SHOPIFY_BLOCK_DESELECT,\n      (e) => {\n        this.#handleBlockDeselected(e)\n      },\n      {\n        signal: this.eventController.signal,\n      },\n    )\n    this.parentElement.addEventListener(\n      SHOPIFY_SECTION_LOAD,\n      () => {\n        this.#handleSectionLoad()\n      },\n      {\n        signal: this.eventController.signal,\n      },\n    )\n  }\n\n  disconnectedCallback() {\n    this.eventController.abort()\n  }\n\n  #handleBlockSelected(e) {\n    const blockId = e.detail.blockId\n    const selectedTab = e.target.querySelector(this.selectors.tab(blockId))\n\n    window.dispatchEvent(new CustomEvent(MODAL_POPUP_OPEN(blockId)))\n    selectedTab?.classList.add(this.classes.visible)\n  }\n\n  #handleBlockDeselected(e) {\n    const blockId = e.detail.blockId\n    window.dispatchEvent(new CustomEvent(MODAL_POPUP_CLOSE(blockId)))\n  }\n\n  #handleSectionLoad() {\n    // we need to refresh the modal registry when a block as added/removed\n    // TODO: make this a feature that's native to modal.js?\n\n    for (const entry in window.flu.dialogs) {\n      window.flu.dialogs[entry][1].destroy({ dom: false })\n    }\n\n    window.flu.dialogs = {}\n\n    document\n      .querySelectorAll(\"dialog[data-fluco-dialog]\")\n      .forEach((el) => dialog(el))\n  }\n}\n\nif (!customElements.get(\"popups-section\")) {\n  customElements.define(\"popups-section\", PopupsSection)\n}\n","import srraf from \"srraf\"\n\nconst atBreakpointChange = (breakpointToWatch, callback) => {\n  const _screenUnderBP = () => {\n    const viewportWidth =\n      window.innerWidth || document.documentElement.clientWidth\n\n    return viewportWidth <= breakpointToWatch\n  }\n\n  let screenUnderBP = _screenUnderBP()\n\n  const widthWatcher = srraf(({ vw }) => {\n    const currentScreenWidthUnderBP = vw <= breakpointToWatch\n\n    if (currentScreenWidthUnderBP !== screenUnderBP) {\n      screenUnderBP = currentScreenWidthUnderBP\n      return callback()\n    }\n  })\n\n  const unload = () => {\n    widthWatcher.destroy()\n  }\n\n  return { unload }\n}\n\nexport default atBreakpointChange\n","import getMediaQuery from \"./media-queries.js\"\n\n/**\n * Sets IO that adds 'became-visible' class, mainly for animations with additional control via callback.\n * @param {HTMLElement} node - Element to watch.\n * @param {Object} options - Options object\n * @param {boolean} options.instantThreshold - View sensitivity before triggering IO's callback.\n * @param {*} options.callback - Will track 'visible' boolean and will not disconnect until destroy() called.\n */\nexport default (\n  node,\n  options = { instantThreshold: false, callback: false },\n) => {\n  let threshold = 0\n\n  if (!options.instantThreshold) {\n    const margin = window.matchMedia(getMediaQuery(\"tablet\")).matches\n      ? 200\n      : 100\n    threshold = Math.min(margin / node.offsetHeight, 0.5)\n  }\n\n  const observer = new IntersectionObserver(\n    ([{ isIntersecting: visible }]) => {\n      if (options.callback) {\n        options.callback(visible)\n      } else {\n        if (visible) {\n          node.classList.add(\"became-visible\")\n          observer.disconnect()\n        }\n      }\n    },\n    { threshold },\n  )\n\n  observer.observe(node)\n\n  return {\n    destroy() {\n      observer?.disconnect()\n    },\n  }\n}\n","// Originally sourced from https://stackoverflow.com/a/11196395\nclass PauseableInterval {\n  constructor(callback, delay) {\n    this.callback = callback\n    this.delay = delay\n    this.pausedTimeLeft = 0\n    this.timerIsPaused = false\n    this.timerHasPaused = false\n    this.triggerSetAt = new Date().getTime()\n    this.timer = setInterval(this.callback, this.delay)\n  }\n\n  reset() {\n    this.#clearTimer()\n\n    this.pausedTimeLeft = 0\n    this.timerIsPaused = false\n    this.timerHasPaused = false\n    this.triggerSetAt = new Date().getTime()\n\n    this.timer = setInterval(this.callback, this.delay)\n  }\n\n  #getTimeLeft() {\n    const now = new Date()\n    const timeLeft = this.timerHasPaused ? this.pausedTimeLeft : this.delay\n\n    // Once a timer has been paused the remaining amount of time left\n    // needs to be calculated from the paused time left.\n    return timeLeft - ((now - this.triggerSetAt) % this.delay)\n  }\n\n  pause() {\n    this.pausedTimeLeft = this.#getTimeLeft()\n    this.timerIsPaused = true\n    this.timerHasPaused = true\n    this.#clearTimer()\n  }\n\n  resume() {\n    // A new trigger is set based on unpaused. PauseTimeLeft is used\n    // as the setTimeout timer.\n    this.triggerSetAt = new Date().getTime()\n\n    this.timer = setTimeout(() => {\n      this.callback()\n      this.reset()\n    }, this.pausedTimeLeft)\n  }\n\n  #clearTimer() {\n    if (this.timer) {\n      clearInterval(this.timer)\n      this.timer = null\n    }\n  }\n\n  isPaused() {\n    return this.timerIsPaused\n  }\n}\n\nexport default PauseableInterval\n","import atBreakpointChange from \"../lib/at-breakpoint-change.js\"\nimport EVENTS from \"../lib/events.js\"\nimport getMediaQuery from \"../lib/media-queries.js\"\nimport intersectionWatcher from \"@/lib/intersection-watcher.js\"\nimport PauseableInterval from \"../lib/pauseable-interval.js\"\nimport srraf from \"srraf\"\n\nconst { SHOPIFY_BLOCK_SELECT, SHOPIFY_BLOCK_DESELECT } = EVENTS\n\nclass SlideshowSection extends HTMLElement {\n  constructor() {\n    super()\n\n    this.selectors = {\n      cursor: \"[js-slideshow-cursor]\",\n      loadingOverlay: \"[js-slideshow-loading-overlay]\",\n      pagination: \"[js-slideshow-pagination]\",\n      paginationBullet: \"[js-slideshow-pagination-bullet]\",\n      paginationNav: \"[js-slideshow-pagination-nav]\",\n      parentSection: \".shopify-section\",\n      slide: \"[js-slideshow-slide]\",\n      slideByBlockId: (id) => `[data-block-id=\"${id}\"]`,\n      slideImageDesktop: \"[js-slideshow-desktop-slide-image]\",\n      slideImageMobile: \"[js-slideshow-mobile-slide-image]\",\n      slideContent: \"[js-slideshow-slide-content]\",\n      slideshow: \"[js-slideshow]\",\n      slideshowPause: \"[js-slideshow-pause]\",\n      videoContainer: \"[js-current-background-video-container]\",\n      videoPlaceholderImage:\n        \"[js-background-video-placeholder] .placeholder-image\",\n      videoPauseButton: \"[js-video-pause-button]\",\n      videoSlide: \"[js-slideshow-video-slide]\",\n    }\n\n    this.classes = {\n      active: \"active\",\n      currentSlide: \"current-slide\",\n      loaded: \"loaded\",\n      nextSlide: \"next-slide\",\n      prevCursor: \"slideshow__cursor--prev\",\n      nextCursor: \"slideshow__cursor--next\",\n      slideTransitionOut: \"slide-transition-out\",\n      visible: \"visible\",\n    }\n\n    this.breakpoints = {\n      mobile: getMediaQuery(\"mobile\"),\n      smallDesktop: getMediaQuery(\"small-desktop\"),\n    }\n\n    this.strings = window.theme.strings\n  }\n\n  connectedCallback() {\n    intersectionWatcher(this)\n    this.slideshow = this.querySelector(this.selectors.slideshow)\n    this.loadingOverlay = this.querySelector(this.selectors.loadingOverlay)\n    this.slides = this.querySelectorAll(this.selectors.slide)\n    this.slideList = Array.from(this.slides)\n    this.currentSlide = this.loadingOverlay\n    this.firstSlideIndex = \"0\"\n    this.lastSlideIndex = `${this.slides.length - 1}`\n    this.firstIndexOnLoad = \"0\"\n    this.controller = new AbortController()\n\n    const eventOptions = { signal: this.controller.signal }\n\n    // Pagination\n    this.paginationBullets = this.querySelectorAll(\n      this.selectors.paginationBullet,\n    )\n    this.paginationBullets.forEach((bullet) => {\n      bullet.addEventListener(\n        \"click\",\n        this.handlePaginationBulletClick.bind(this),\n        eventOptions,\n      )\n    })\n\n    this.initLoadingOverlay()\n\n    // Watch for small-desktop breakpoint to handle cursor and nav button functionality\n    if (this.slides.length > 1) {\n      atBreakpointChange(1024, this.handleWindowResize.bind(this))\n      this.handleWindowResize()\n    }\n\n    // Block events\n    if (window.Shopify.designMode) {\n      this.parentSection = this.closest(this.selectors.parentSection)\n      this.parentSection.addEventListener(\n        SHOPIFY_BLOCK_SELECT,\n        this.handleSlideSelect.bind(this),\n        eventOptions,\n      )\n      this.parentSection.addEventListener(\n        SHOPIFY_BLOCK_DESELECT,\n        this.handleSlideDeselect.bind(this),\n        eventOptions,\n      )\n    }\n  }\n\n  initLoadingOverlay() {\n    // Check whether first slide is a video or image\n    if (this.slides[0].matches(this.selectors.videoSlide)) {\n      const firstSlideVideoContainer = this.slides[0].querySelector(\n        this.selectors.videoContainer,\n      )\n\n      if (firstSlideVideoContainer) {\n        if (firstSlideVideoContainer.children.length > 0) {\n          this.hideLoadingOverlay()\n        } else {\n          const videoSlideObserver = new MutationObserver(\n            (mutations, observer) => {\n              for (const mutation of mutations) {\n                if (mutation.target.children.length > 0) {\n                  this.hideLoadingOverlay()\n                  observer.disconnect()\n                }\n              }\n            },\n          )\n\n          videoSlideObserver.observe(firstSlideVideoContainer, {\n            childList: true,\n          })\n        }\n      } else {\n        const firstSlidePlaceholderImage = this.slides[0].querySelector(\n          this.selectors.videoPlaceholderImage,\n        )\n\n        if (\n          firstSlidePlaceholderImage.classList.contains(this.classes.visible)\n        ) {\n          this.hideLoadingOverlay()\n        } else {\n          const videoSlideObserver = this.createClassMutationObserver(\n            this.hideLoadingOverlay.bind(this),\n          )\n\n          videoSlideObserver.observe(firstSlidePlaceholderImage, {\n            attributeFilter: [\"class\"],\n          })\n        }\n      }\n    } else {\n      let firstSlideImage = this.slides[0].querySelector(\n        this.selectors.slideImageDesktop,\n      )\n\n      if (window.matchMedia(this.breakpoints.mobile).matches) {\n        const firstSlideMobileImage = this.slides[0].querySelector(\n          this.selectors.slideImageMobile,\n        )\n        if (firstSlideMobileImage) {\n          firstSlideImage = firstSlideMobileImage\n        }\n      }\n\n      if (firstSlideImage.classList.contains(this.classes.visible)) {\n        this.hideLoadingOverlay()\n      } else {\n        const imageSlideObserver = this.createClassMutationObserver(\n          this.hideLoadingOverlay.bind(this),\n        )\n\n        imageSlideObserver.observe(firstSlideImage, {\n          attributeFilter: [\"class\"],\n        })\n      }\n    }\n  }\n\n  createClassMutationObserver(callback) {\n    return new MutationObserver((mutations, observer) => {\n      for (const mutation of mutations) {\n        if (mutation.target.classList.contains(this.classes.visible)) {\n          callback()\n          observer.disconnect()\n        }\n      }\n    })\n  }\n\n  hideLoadingOverlay() {\n    this.changeSlide(this.firstIndexOnLoad)\n    this.classList.add(this.classes.loaded)\n\n    if (\n      this.slides.length > 1 &&\n      this.getAttribute(\"data-enable-autoplay\") === \"true\"\n    ) {\n      this.initAutoplay()\n    }\n  }\n\n  handlePaginationBulletClick(event) {\n    this.changeSlide(event.currentTarget.getAttribute(\"data-slide-index\"))\n  }\n\n  handleWindowResize() {\n    if (window.matchMedia(this.breakpoints.smallDesktop).matches) {\n      this.mobileController?.abort()\n      this.initCursor()\n    } else {\n      this.cursorController?.abort()\n      this.widthWatcher?.destroy()\n      this.mobileController = new AbortController()\n      this.initSwipeNav()\n      this.initPaginationNav()\n    }\n  }\n\n  initCursor() {\n    this.cursor = this.querySelector(this.selectors.cursor)\n    this.cursorController = new AbortController()\n    this.midpoint = this.offsetWidth / 2\n    const cursorEventOptions = { signal: this.cursorController.signal }\n\n    // Track the \"midpoint\" of the slider so the cursor can update for prev/next\n    this.widthWatcher = srraf(({ vw, pvw }) => {\n      if (vw === pvw) return\n      this.midpoint = this.offsetWidth / 2\n    })\n\n    this.slideshow.addEventListener(\n      \"mouseenter\",\n      this.showCursor.bind(this),\n      cursorEventOptions,\n    )\n\n    this.slideshow.addEventListener(\n      \"mousemove\",\n      this.updateCursorPosition.bind(this),\n      cursorEventOptions,\n    )\n\n    this.slideshow.addEventListener(\n      \"mouseleave\",\n      this.hideCursor.bind(this),\n      cursorEventOptions,\n    )\n\n    // Track mouse enter/leave of interactive elements so that we can disable the custom cursor\n    this.pagination = this.querySelector(this.selectors.pagination)\n    this.slideContentElements = this.querySelectorAll(\n      this.selectors.slideContent,\n    )\n\n    this.interactiveElementSelectors = `${this.selectors.loadingOverlay}, ${this.selectors.pagination}, ${this.selectors.slideContent}, ${this.selectors.videoPauseButton}`\n    const interactiveElements = [this.loadingOverlay, this.pagination]\n    this.slideContentElements.forEach((slideContentElement) => {\n      interactiveElements.push(slideContentElement)\n    })\n\n    interactiveElements.forEach((element) => {\n      element.addEventListener(\n        \"mouseenter\",\n        this.hideCursor.bind(this),\n        cursorEventOptions,\n      )\n      element.addEventListener(\n        \"mouseleave\",\n        this.showCursor.bind(this),\n        cursorEventOptions,\n      )\n    })\n\n    // Handle clicks\n    this.slideshow.addEventListener(\n      \"click\",\n      this.handleSlideshowClick.bind(this),\n      cursorEventOptions,\n    )\n  }\n\n  showCursor() {\n    this.cursor.classList.add(this.classes.active)\n  }\n\n  updateCursorPosition(event) {\n    /*\n     * Update the cursor position\n     *\n     * We use pageX/pageY because offsetX/offsetY are thrown off by child\n     * elements, which means that offsetTop and paddingTop need to be\n     * accounted for.\n     *\n     * We also account for the size of the cursor element so that the element\n     * is centered on the actual cursor. The element is 54px wide/tall, so we\n     * subtract 27.\n     */\n    this.cursor.style.top = `${\n      event.pageY - 27 - this.offsetTop - this.getAttribute(\"data-padding-top\")\n    }px`\n    this.cursor.style.left = `${event.pageX - 27 - this.slideshow.offsetLeft}px`\n\n    // Update the cursor display (prev/next)\n    if (event.pageX <= this.midpoint) {\n      this.cursor.classList.add(this.classes.prevCursor)\n      this.cursor.classList.remove(this.classes.nextCursor)\n    } else {\n      this.cursor.classList.remove(this.classes.prevCursor)\n      this.cursor.classList.add(this.classes.nextCursor)\n    }\n  }\n\n  hideCursor() {\n    this.cursor.classList.remove(this.classes.active)\n  }\n\n  handleSlideshowClick(event) {\n    // If the click wasn't on an interactive element, change slides\n    if (!event.target.closest(this.interactiveElementSelectors)) {\n      const direction = this.cursor.classList.contains(this.classes.prevCursor)\n        ? \"prev\"\n        : \"next\"\n\n      // Not sure why we need this 40.5 (equivalent to 3/4 ofthe cursor width/height), but\n      // it aligns the radial gradient to the cursor\n      const irisOriginX =\n        ((event.offsetX + 40.5) / this.slideshow.offsetWidth) * 100.0\n      const irisOriginY =\n        ((event.offsetY + 40.5) / this.slideshow.offsetHeight) * 100.0\n      const irisOrigin = `${irisOriginX}% ${irisOriginY}%`\n\n      this.changeSlide(this.getNewSlideIndex(direction), irisOrigin)\n    }\n  }\n\n  initSwipeNav() {\n    this.slideshow.addEventListener(\n      \"pointerdown\",\n      this.handleSwipeStart.bind(this),\n      { signal: this.mobileController.signal },\n    )\n    this.slideshow.addEventListener(\n      \"pointerup\",\n      this.handleSwipeEnd.bind(this),\n      { signal: this.mobileController.signal },\n    )\n  }\n\n  handleSwipeStart(event) {\n    this.swipeStartX = event.offsetX\n    this.swipeStartY = event.offsetY\n  }\n\n  handleSwipeEnd(event) {\n    this.swipeEndX = event.offsetX\n    this.swipeEndY = event.offsetY\n\n    // For a swipe register, it can only deviate on the y-axis by 20px, and must be 15px, or more, on the x-axis\n    if (\n      Math.abs(this.swipeStartY - this.swipeEndY) <= 20 &&\n      Math.abs(this.swipeStartX - this.swipeEndX) >= 15\n    ) {\n      if (\n        this.swipeStartX > this.swipeEndX &&\n        this.swipeStartX - this.swipeEndX >= 15\n      ) {\n        this.changeSlide(this.getNewSlideIndex(\"next\"))\n      } else if (\n        this.swipeStartX < this.swipeEndX &&\n        this.swipeEndX - this.swipeStartX >= 15\n      ) {\n        this.changeSlide(this.getNewSlideIndex(\"prev\"))\n      }\n    }\n  }\n\n  initPaginationNav() {\n    this.paginationNavButtons = this.querySelectorAll(\n      this.selectors.paginationNav,\n    )\n\n    this.paginationNavButtons.forEach((button) => {\n      button.addEventListener(\n        \"click\",\n        this.handlePaginationNavClick.bind(this),\n        { signal: this.mobileController.signal },\n      )\n    })\n  }\n\n  handlePaginationNavClick(event) {\n    this.changeSlide(\n      this.getNewSlideIndex(event.currentTarget.getAttribute(\"data-direction\")),\n    )\n  }\n\n  initAutoplay() {\n    // Setting is in seconds, so we need to convert\n    this.timeBetweenSlides =\n      parseInt(this.getAttribute(\"data-time-between-slides\"), 10) * 1000\n    this.slideshowPause = this.querySelector(this.selectors.slideshowPause)\n\n    this.autoplay = new PauseableInterval(() => {\n      this.changeSlide(this.getNewSlideIndex(\"next\"))\n    }, this.timeBetweenSlides)\n\n    this.slideshowPause.addEventListener(\n      \"click\",\n      this.handlePauseClick.bind(this),\n      { signal: this.controller.signal },\n    )\n  }\n\n  handlePauseClick(event) {\n    if (this.getAttribute(\"data-paused\") === \"false\") {\n      this.setAttribute(\"data-paused\", \"true\")\n      event.currentTarget.setAttribute(\n        \"aria-label\",\n        this.strings.accessibility.carouselPlay,\n      )\n      this.autoplay.pause()\n    } else {\n      this.setAttribute(\"data-paused\", \"false\")\n      event.currentTarget.setAttribute(\n        \"aria-label\",\n        this.strings.accessibility.carouselPause,\n      )\n      this.autoplay.resume()\n    }\n  }\n\n  getNewSlideIndex(direction) {\n    let newSlideIndex\n\n    if (direction === \"prev\") {\n      if (\n        this.currentSlide.getAttribute(\"data-slide-index\") ===\n        this.firstSlideIndex\n      ) {\n        newSlideIndex = this.lastSlideIndex\n      } else {\n        newSlideIndex = `${parseInt(this.currentSlideIndex, 10) - 1}`\n      }\n    } else {\n      if (\n        this.currentSlide.getAttribute(\"data-slide-index\") ===\n        this.lastSlideIndex\n      ) {\n        newSlideIndex = this.firstSlideIndex\n      } else {\n        newSlideIndex = `${parseInt(this.currentSlideIndex, 10) + 1}`\n      }\n    }\n\n    return newSlideIndex\n  }\n\n  /**\n   * Changes the active slide to the given slide index.\n   *\n   * @param {string} index - The index of the slide that should become active. This is a string as the index is pulled from data\n   *                         attributes.\n   */\n  changeSlide(index, irisOrigin = \"50% 50%\") {\n    // If the next slide is the same as the current, don't change\n    if (index === this.currentSlideIndex) return\n\n    // Set the iris wipe origin\n    this.style.setProperty(\"--slide-iris-origin\", irisOrigin)\n\n    // Remove the transition class from any slides that currently have it\n    this.slideList.forEach((slide) => {\n      slide.classList.remove(this.classes.slideTransitionOut)\n    })\n\n    // Set new \"current\" slide and handle slide change transition\n    const currentSlide = this.currentSlide\n    const newSlide = this.slideList.find((slide) => {\n      return slide.getAttribute(\"data-slide-index\") === index\n    })\n\n    // If the current slide is a video slide, pause the video\n    // We timeout for the duration of the slide change so that you don't actually\n    //  see the pause\n    if (currentSlide.matches(this.selectors.videoSlide)) {\n      const video = currentSlide.querySelector(\"video\")\n\n      setTimeout(() => {\n        video?.pause()\n      }, 1400)\n    }\n\n    newSlide.classList.add(this.classes.currentSlide)\n    currentSlide.classList.add(this.classes.slideTransitionOut)\n    currentSlide.classList.remove(this.classes.currentSlide)\n    currentSlide.setAttribute(\"inert\", \"\")\n    this.currentSlide = newSlide\n    this.currentSlideIndex = index\n    this.currentSlide.removeAttribute(\"inert\")\n\n    if (newSlide.matches(this.selectors.videoSlide)) {\n      const video = newSlide.querySelector(\"video\")\n\n      // It's possible that we have a video slide with no video (no video has been selected yet)\n      video?.play()\n    }\n\n    this.paginationBullets.forEach((bullet) => {\n      if (bullet.getAttribute(\"data-slide-index\") === index) {\n        bullet.classList.add(this.classes.active)\n      } else {\n        bullet.classList.remove(this.classes.active)\n      }\n    })\n\n    if (this.autoplay?.isPaused()) {\n      this.autoplay.pausedTimeLeft = this.timeBetweenSlides\n    } else {\n      this.autoplay?.reset()\n    }\n  }\n\n  handleSlideSelect(event) {\n    const selectedSlide = this.querySelector(\n      this.selectors.slideByBlockId(event.detail.blockId),\n    )\n\n    if (event.detail.load) {\n      if (\n        this.slides.length > 1 &&\n        this.getAttribute(\"data-enable-autoplay\") === \"true\"\n      ) {\n        this.setAutoplay(\"pause\")\n      }\n\n      this.firstIndexOnLoad = selectedSlide.getAttribute(\"data-slide-index\")\n    } else if (this.currentSlide !== selectedSlide) {\n      if (\n        this.slides.length > 1 &&\n        this.getAttribute(\"data-enable-autoplay\") === \"true\"\n      ) {\n        this.setAutoplay(\"pause\")\n      }\n\n      this.changeSlide(selectedSlide.getAttribute(\"data-slide-index\"))\n    }\n  }\n\n  handleSlideDeselect() {\n    if (\n      this.slides.length > 1 &&\n      this.getAttribute(\"data-enable-autoplay\") === \"true\"\n    ) {\n      this.setAutoplay(\"resume\")\n    }\n  }\n\n  setAutoplay(state) {\n    if (state === \"pause\") {\n      this.autoplay.pause()\n      this.setAttribute(\"data-paused\", \"true\")\n      this.slideshowPause.setAttribute(\n        \"aria-label\",\n        this.strings.accessibility.carouselPlay,\n      )\n    } else {\n      this.autoplay.resume()\n      this.setAttribute(\"data-paused\", \"false\")\n      this.slideshowPause.setAttribute(\n        \"aria-label\",\n        this.strings.accessibility.carouselPause,\n      )\n    }\n  }\n\n  disconnectedCallback() {\n    this.controller.abort()\n    this.cursorController?.abort()\n    this.mobileController?.abort()\n    this.widthWatcher?.destroy()\n    intersectionWatcher.destroy()\n  }\n}\n\nif (!customElements.get(\"slideshow-section\")) {\n  customElements.define(\"slideshow-section\", SlideshowSection)\n}\n","let loaded = null\n\nexport default function loadVimeoAPI() {\n  if (loaded !== null) return loaded\n\n  if (window.Vimeo && window.Vimeo.loaded) {\n    loaded = Promise.resolve()\n    return loaded\n  }\n\n  // Otherwise, load API\n  loaded = new Promise((resolve) => {\n    const tag = document.createElement(\"script\")\n    tag.src = \"https://player.vimeo.com/api/player.js\"\n    tag.onload = resolve\n    document.body.appendChild(tag)\n  })\n\n  return loaded\n}\n","let loaded = null\n\nexport default function loadYouTubeAPI() {\n  // Loading was triggered by a previous call to function\n  if (loaded !== null) return loaded\n\n  // API has already loaded\n  if (window.YT && window.YT.loaded) {\n    loaded = Promise.resolve()\n    return loaded\n  }\n\n  // Otherwise, load API\n  loaded = new Promise((resolve) => {\n    window.onYouTubeIframeAPIReady = () => {\n      resolve()\n    }\n    const tag = document.createElement(\"script\")\n    tag.src = \"https://www.youtube.com/iframe_api\"\n    document.body.appendChild(tag)\n  })\n\n  return loaded\n}\n","// Global arrays to track active players to more easily control.\nconst youTubePlayerArr = []\nconst vimeoPlayerArr = []\nconst internalPlayerArr = []\n\nconst addPlayerToTrackingArr = (source, player) => {\n  if (source === \"youtube\") {\n    youTubePlayerArr.push(player)\n  }\n\n  if (source === \"vimeo\") {\n    vimeoPlayerArr.push(player)\n  }\n\n  if (source === \"internal\") {\n    internalPlayerArr.push(player)\n  }\n}\n\n/**\n * If a video is played, any previously started video will pause\n * If a slide (scroll slider or media lightbox) changes, a playing video will pause\n */\nconst pausePlayingVideos = () => {\n  youTubePlayerArr.forEach((player) => {\n    player.pauseVideo()\n  })\n\n  vimeoPlayerArr.forEach((player) => {\n    player.pause()\n  })\n\n  internalPlayerArr.forEach((player) => {\n    player.pause()\n  })\n}\n\nconst clearPlayerTrackingArr = () => {\n  youTubePlayerArr.length = 0\n  vimeoPlayerArr.length = 0\n  internalPlayerArr.length = 0\n}\n\n/*\n  YouTube specific state control\n-------------------------------------------------------------------------- */\n/**\n * Use YouTube player functions to alter settigns and state if poster clicked\n * @param {HTMLIFrameElement} player result of YT.Player\n *\n */\nconst clickPosterToPlayYouTube = (player) => {\n  // Clicking the play button will play video with sound\n  // This should true for mobile, safari, and low power mode\n  if (!player) return\n\n  player.unMute()\n  player.playVideo()\n}\n\nconst onYouTubePlayerStateChange = (event) => {\n  // -1 is 'unstarted' likely due to API not being fully loaded\n  if (event.data === -1) {\n    event.target.mute()\n    event.target.playVideo()\n  }\n\n  youTubePlayerArr.forEach((player) => {\n    // Don't pause most recently played video, 1 = playing\n    if (player !== event.target && event.data === 1) {\n      player.pauseVideo()\n    }\n  })\n\n  vimeoPlayerArr.forEach((player) => {\n    player.pause()\n  })\n\n  internalPlayerArr.forEach((player) => {\n    player.pause()\n  })\n}\n\n/*\n  Vimeo specific state control\n-------------------------------------------------------------------------- */\n\n/**\n * Use Vimeo player functions to alter settings and state if poster clicked\n * @param {HTMLIFrameElement} player result of Vimeo.Player\n *\n */\nconst clickPosterToPlayVimeo = (player) => {\n  // Clicking play button will play video with sound\n  // except on mobile, which will be muted or requires click to play in low power mode\n  if (!player) return\n\n  player.getPaused().then(function (paused) {\n    if (paused) {\n      player.play()\n    } else {\n      player.setMuted(true)\n      player.play()\n    }\n  })\n}\n\nexport {\n  addPlayerToTrackingArr,\n  pausePlayingVideos,\n  onYouTubePlayerStateChange,\n  clickPosterToPlayVimeo,\n  clickPosterToPlayYouTube,\n  clearPlayerTrackingArr,\n}\n","import {\n  initYouTubeVideo,\n  initVimeoVideo,\n  updateIframeVimeoVideo,\n  updateIframeYouTubeVideo,\n} from \"./external-video-player.js\"\n\nimport {\n  addPlayerToTrackingArr,\n  pausePlayingVideos,\n} from \"./video-player-state.js\"\n\n/**\n * Create new YouTube and Vimeo videos. Initialize YouTube, Vimeo and Shopify videos when triggered.\n * @param {HTMLDivElement} node video container with data to structure triggers with video player created during initialization\n */\nconst liquidMadeVideoPlayer = (node) => {\n  const { showPoster, hasPoster } = node.dataset\n  const playButton = node.querySelector(\"[js-poster-play-button]\")\n\n  if (showPoster && hasPoster) {\n    playButton.addEventListener(\"click\", () => {\n      node.dataset.videoInitialized = \"true\"\n      _initLiquidMadeVideoPlayer(node, { hadPoster: true })\n    })\n\n    playButton.addEventListener(\"keydown\", (event) => {\n      if (event.key === \"Enter\") {\n        node.dataset.videoInitialized = \"true\"\n        _initLiquidMadeVideoPlayer(node, { hadPoster: true })\n      }\n    })\n  } else {\n    _initLiquidMadeVideoPlayer(node, { hadPoster: false })\n  }\n}\n\nconst _initLiquidMadeVideoPlayer = (node, poster) => {\n  const internalVideo = node.querySelector(\"[data-video-internal]\")\n  const externalVideo = node.querySelector(\"[data-video-external]\")\n\n  if (externalVideo) {\n    const { videoProvider } = externalVideo.dataset\n\n    if (videoProvider === \"youtube\") {\n      initYouTubeVideo(externalVideo, poster.hadPoster)\n    } else if (videoProvider === \"vimeo\") {\n      initVimeoVideo(externalVideo, poster.hadPoster)\n    }\n  } else if (internalVideo && poster.hadPoster) {\n    pausePlayingVideos()\n    internalVideo.play()\n\n    // Delay adding player to arr to prevent pre-emptive pause\n    setTimeout(() => {\n      addPlayerToTrackingArr(\"internal\", internalVideo)\n    }, 100)\n  }\n}\n\n/**\n * When triggered, append and initialize prepared YouTube, Vimeo and Shopify videos.\n * @param {HTMLDivElement} videoContainer container with data to structure triggers and initialization\n * @param {HTMLElement} video iframe (YouTube & Vimeo) or video element (Shopify) to append\n */\nconst domMadeVideoPlayer = (videoContainer, video) => {\n  const { videoType, showPoster } = videoContainer.dataset\n\n  if (showPoster === \"true\") {\n    const playButton = videoContainer.querySelector(\"[js-poster-play-button]\")\n\n    playButton.addEventListener(\"click\", () => {\n      videoContainer.setAttribute(\"data-video-initialized\", \"true\")\n      videoContainer.appendChild(video)\n\n      _initDomMadeVideoPlayer(video, videoType, { hadPoster: true })\n    })\n\n    playButton.addEventListener(\"keydown\", (event) => {\n      if (event.key === \"Enter\") {\n        videoContainer.setAttribute(\"data-video-initialized\", \"true\")\n        videoContainer.appendChild(video)\n\n        _initDomMadeVideoPlayer(video, videoType, { hadPoster: true })\n      }\n    })\n  } else {\n    videoContainer.appendChild(video)\n    _initDomMadeVideoPlayer(video, videoType, { hadPoster: false })\n  }\n}\n\nconst _initDomMadeVideoPlayer = (video, videoType, poster) => {\n  if (videoType === \"youtube\") {\n    updateIframeYouTubeVideo(video.id, poster.hadPoster)\n  } else if (videoType === \"vimeo\") {\n    updateIframeVimeoVideo(video, poster.hadPoster)\n  } else {\n    if (poster.hadPoster === true) {\n      // Only play Shopify video element if poster removed\n      pausePlayingVideos()\n      addPlayerToTrackingArr(\"internal\", video)\n      video.play()\n    }\n  }\n}\n\nexport { liquidMadeVideoPlayer, domMadeVideoPlayer }\n","import loadVimeoAPI from \"./load-vimeo-api.js\"\nimport loadYouTubeAPI from \"./load-youtube-api.js\"\nimport {\n  addPlayerToTrackingArr,\n  pausePlayingVideos,\n  onYouTubePlayerStateChange,\n  clickPosterToPlayVimeo,\n  clickPosterToPlayYouTube,\n} from \"./video-player-state.js\"\n\n/**\n * Create a YouTube video player directly from the API\n * @param {HTMLElement} video video player div that will be swapped out with iframe\n * @param {boolean} hadPoster dictate the presence of poster image over video\n */\nconst initYouTubeVideo = (video, hadPoster) => {\n  const videoId = video.dataset.videoId\n\n  let autoplay = false\n  if (hadPoster) {\n    autoplay = true\n  }\n\n  loadYouTubeAPI().then(() => {\n    const player = new window.YT.Player(video, {\n      videoId,\n      playerVars: {\n        enablejsapi: 1,\n        cc_load_policy: 0,\n        controls: 1,\n        iv_load_policy: 3,\n        playsinline: 1,\n        rel: 0,\n        playlist: videoId,\n        // eslint-disable-next-line object-shorthand\n        autoplay: autoplay,\n      },\n      events: {\n        onReady: () => {\n          player.getIframe().tabIndex = \"0\"\n          if (hadPoster) {\n            clickPosterToPlayYouTube(player)\n          } else {\n            player.unMute()\n          }\n\n          addPlayerToTrackingArr(\"youtube\", player)\n        },\n        onStateChange: onYouTubePlayerStateChange,\n      },\n    })\n  })\n}\n\n/**\n * Update an existing YouTube iframe to allow for API events and actions\n * @param {HTMLIFrameElement} iframe existing iframe, not originally rendered through the API\n * @param {boolean} hadPoster dictate the presence of poster image over video\n */\nconst updateIframeYouTubeVideo = (iframe, hadPoster) => {\n  loadYouTubeAPI().then(() => {\n    const player = new window.YT.Player(iframe, {\n      events: {\n        onReady: () => {\n          player.getIframe().tabIndex = \"0\"\n\n          if (hadPoster) {\n            clickPosterToPlayYouTube(player)\n          } else {\n            player.unMute()\n          }\n\n          addPlayerToTrackingArr(\"youtube\", player)\n        },\n        onStateChange: onYouTubePlayerStateChange,\n      },\n    })\n  })\n}\n\n/**\n * Create a Vimeo video player directly from the API\n * @param {HTMLElement} video video player div that will be swapped out with iframe\n * @param {boolean} hadPoster dictate the presence of poster image over video\n */\nconst initVimeoVideo = (video, hadPoster) => {\n  let autoplay = false\n  if (hadPoster) {\n    autoplay = true\n  }\n\n  loadVimeoAPI().then(() => {\n    const player = new window.Vimeo.Player(video, {\n      id: video.dataset.videoId,\n      // eslint-disable-next-line object-shorthand\n      autoplay: autoplay,\n    })\n\n    player.element.tabIndex = \"0\"\n    if (hadPoster) {\n      clickPosterToPlayVimeo(player)\n    }\n\n    pausePlayingVideos()\n    addPlayerToTrackingArr(\"vimeo\", player)\n  })\n}\n\n/**\n * Update an existing Vimeo iframe to allow for API events and actions\n * @param {HTMLIFrameElement} iframe existing iframe, not originally rendered through the API\n * @param {boolean} hadPoster dictate the presence of poster image over video\n */\nconst updateIframeVimeoVideo = (iframe, hadPoster) => {\n  loadVimeoAPI().then(() => {\n    const player = new window.Vimeo.Player(iframe, {\n      muted: true,\n    })\n\n    player.element.tabIndex = \"0\"\n    if (hadPoster) {\n      clickPosterToPlayVimeo(player)\n    }\n\n    addPlayerToTrackingArr(\"vimeo\", player)\n  })\n}\n\nexport {\n  initYouTubeVideo,\n  initVimeoVideo,\n  updateIframeYouTubeVideo,\n  updateIframeVimeoVideo,\n}\n","import getMediaQuery from \"../lib/media-queries.js\"\nimport atBreakpointChange from \"../lib/at-breakpoint-change.js\"\nimport { liquidMadeVideoPlayer } from \"../lib/video-player.js\"\n\nclass VideoSection extends HTMLElement {\n  constructor() {\n    super()\n\n    this.selectors = {\n      currentVideoWrapper: \"[js-current-video-wrapper]\",\n      mobileVideoTemplate: \"[js-mobile-video-template]\",\n      videoTemplate: \"[js-video-template]\",\n      videoPlayerContainer: \"[js-video-player-container]\",\n    }\n  }\n\n  connectedCallback() {\n    if (this.dataset.requiresTemplate === \"true\") {\n      this.videoTemplate = this.querySelector(this.selectors.videoTemplate)\n      this.mobileVideoTemplate = this.querySelector(\n        this.selectors.mobileVideoTemplate,\n      )\n      this.currentVideoWrapper = this.querySelector(\n        this.selectors.currentVideoWrapper,\n      )\n\n      this.#selectActiveTemplate()\n      atBreakpointChange(720, this.#selectActiveTemplate.bind(this))\n    } else {\n      this.#initVideo()\n    }\n  }\n\n  #selectActiveTemplate() {\n    if (window.matchMedia(getMediaQuery(\"tablet\")).matches) {\n      this.#createVideo(this.videoTemplate)\n    } else {\n      this.#createVideo(this.mobileVideoTemplate)\n    }\n  }\n\n  #createVideo(template) {\n    const videoContent = template.content.cloneNode(true)\n\n    this.currentVideoWrapper.innerHTML = \"\"\n    this.currentVideoWrapper.append(videoContent)\n    this.#initVideo()\n  }\n\n  #initVideo() {\n    const videoPlayerContainer = this.querySelector(\n      this.selectors.videoPlayerContainer,\n    )\n\n    liquidMadeVideoPlayer(videoPlayerContainer)\n  }\n\n  disconnectedCallback() {}\n}\n\nif (!customElements.get(\"video-section\")) {\n  customElements.define(\"video-section\", VideoSection)\n}\n","import atBreakpointChange from \"../lib/at-breakpoint-change.js\"\nimport EVENTS from \"../lib/events.js\"\nimport getMediaQuery from \"../lib/media-queries.js\"\n\nconst {\n  ANNOUNCEMENT_HEIGHT_UPDATED,\n  HEADER_HEIGHT_UPDATED,\n  FILTER_REPAINT,\n  FILTER_SORT_CHANGED,\n  MODAL_POPUP_CLOSE,\n  MODAL_POPUP_CLOSED,\n  MODAL_POPUP_OPEN,\n  SORT_CHANGED,\n} = EVENTS\n\nclass CollectionProductGrid extends HTMLElement {\n  constructor() {\n    super()\n\n    this.selectors = {\n      activeFilters: \"[js-active-filters]\",\n      announcementBar: \"announcement-bar\",\n      disclosureWrapper: \".disclosure-wrapper\",\n      filterDrawerTrigger: \"[js-filter-drawer-trigger]\",\n      stickyFilterDrawerTrigger: \"[js-filter-drawer-trigger--sticky]\",\n      filterDrawerHeading: \"[js-filter-drawer-heading]\",\n      filterDrawerViewResults: \"[js-filter-view-results]\",\n      filterDrawerViewResultsIdleLabel: \"[js-filter-view-results-label]\",\n      filterGroup: \"[js-filter-group]\",\n      filterGroupParent: \"[js-filter-group-parent]\",\n      filterSortFormComponent: \"[js-filter-sort-form-component]\",\n      footer: \"footer\",\n      header: \"header-wrapper\",\n      pagination: \"[js-pagination]\",\n      productGrid: \"[js-product-grid]\",\n      promotionTile: \"[js-promotion-tile]\",\n      promotionTilevideo: \"[js-promotion-tile] [js-background-video]\",\n      sortDrawerTrigger: \"[js-sort-drawer-trigger]\",\n      sortDropdowns:\n        \"[js-sort-top-bar], [js-sort-sticky-button], [js-sort-mobile-drawer]\",\n      sortTriggerValue: \"[js-sort-trigger-value]\",\n      stickyFilterSort: \"[js-sticky-filter-sort-button]\",\n      topBar: \"[js-product-grid-top-bar]\",\n    }\n\n    this.classes = {\n      active: \"active\",\n      hidden: \"hidden\",\n      loading: \"loading\",\n      visible: \"is-visible\",\n    }\n\n    this.ids = {\n      filterDrawer: \"filterDrawer\",\n      mobileSortDrawer: \"mobileSortDrawer\",\n    }\n\n    this.breakpoints = {\n      smallDesktop: getMediaQuery(\"small-desktop\"),\n    }\n\n    this.events = {\n      openFilterDrawer: new CustomEvent(\n        MODAL_POPUP_OPEN(this.ids.filterDrawer),\n      ),\n      closeFilterDrawer: new CustomEvent(\n        MODAL_POPUP_CLOSE(this.ids.filterDrawer),\n      ),\n      openSortDrawer: new CustomEvent(\n        MODAL_POPUP_OPEN(this.ids.mobileSortDrawer),\n      ),\n      closeSortDrawer: new CustomEvent(\n        MODAL_POPUP_CLOSE(this.ids.mobileSortDrawer),\n      ),\n    }\n  }\n\n  connectedCallback() {\n    this.controller = new AbortController()\n    this.sectionId = this.dataset.sectionId\n    this.sectionPaddingTop = parseInt(\n      getComputedStyle(this)\n        .getPropertyValue(\"--section-padding-top\")\n        .replace(\"px\", \"\"),\n      10,\n    )\n    this.eventOptions = { signal: this.controller.signal }\n\n    this.header = document.querySelector(this.selectors.header)\n    this.announcementBar = document.querySelector(\n      this.selectors.announcementBar,\n    )\n    this.headerHeight = 0\n    this.announcementHeight = 0\n    this.getHeaderAnnouncementHeight()\n    document.addEventListener(\n      HEADER_HEIGHT_UPDATED,\n      this.handleHeaderHeightChange.bind(this),\n      this.eventOptions,\n    )\n    document.addEventListener(\n      ANNOUNCEMENT_HEIGHT_UPDATED,\n      this.handleAnnouncementHeightChange.bind(this),\n      this.eventOptions,\n    )\n\n    this.filterDrawerTriggers = this.querySelectorAll(\n      `${this.selectors.filterDrawerTrigger}, ${this.selectors.stickyFilterDrawerTrigger}`,\n    )\n    this.filterDrawerHeading = this.querySelector(\n      this.selectors.filterDrawerHeading,\n    )\n    this.filterDrawerViewResults = this.querySelector(\n      this.selectors.filterDrawerViewResults,\n    )\n    this.filterDrawerViewResultsIdleLabels = this.querySelectorAll(\n      this.selectors.filterDrawerViewResultsIdleLabel,\n    )\n    this.activeFilters = this.querySelector(this.selectors.activeFilters)\n    this.filterGroups = this.querySelectorAll(this.selectors.filterGroup)\n    this.topBar = this.querySelector(this.selectors.topBar)\n    this.sortTriggerValue = this.querySelector(this.selectors.sortTriggerValue)\n    this.sortDropdowns = this.querySelectorAll(this.selectors.sortDropdowns)\n    this.productGrid = this.querySelector(this.selectors.productGrid)\n    this.promotionTiles = this.querySelectorAll(this.selectors.promotionTile)\n    this.filterSortFormComponent = this.querySelector(\n      this.selectors.filterSortFormComponent,\n    )\n    this.pagination = this.querySelector(this.selectors.pagination)\n\n    this.initFilterDrawerTriggers()\n\n    this.filterDrawerViewResults?.addEventListener(\n      \"click\",\n      this.handleViewResultsClick.bind(this),\n      this.eventOptions,\n    )\n\n    this.addEventListener(\n      FILTER_SORT_CHANGED,\n      this.handleFilterSortFormChange.bind(this),\n      this.eventOptions,\n    )\n\n    this.initSortDropdowns()\n\n    if (\n      this.dataset.filterEnabled === \"true\" ||\n      this.dataset.sortEnabled === \"true\"\n    ) {\n      this.initStickyFilterSortButton()\n    }\n\n    this.sortDrawerTrigger.addEventListener(\n      \"click\",\n      this.openSortDrawer.bind(this),\n      this.eventOptions,\n    )\n\n    // Show the sticky filter/sort button when the mobile sort drawer is closed\n    window.addEventListener(\n      MODAL_POPUP_CLOSED(this.ids.mobileSortDrawer),\n      this.showStickyFilterSort.bind(this),\n      this.eventOptions,\n    )\n  }\n\n  initFilterDrawerTriggers() {\n    this.filterDrawerTriggers.forEach((trigger) => {\n      trigger.addEventListener(\n        \"click\",\n        this.handleFilterDrawerOpen.bind(this),\n        this.eventOptions,\n      )\n    })\n\n    // Check whether we should show the sticky filter/sort button when the filter drawer is closed\n    window.addEventListener(\n      MODAL_POPUP_CLOSED(this.ids.filterDrawer),\n      this.handleFilterDrawerClose.bind(this),\n      this.eventOptions,\n    )\n  }\n\n  initStickyFilterSortButton() {\n    this.siteFooter = document.querySelector(this.selectors.footer)\n    this.stickyFilterSort = this.querySelector(this.selectors.stickyFilterSort)\n    this.sortDrawerTrigger = this.querySelector(\n      this.selectors.sortDrawerTrigger,\n    ).parentNode\n\n    this.mobileFooterObserver = new IntersectionObserver(\n      ([{ isIntersecting: visible }]) => {\n        if (visible) {\n          this.mobileTopBarObserver.disconnect()\n          this.hideStickyFilterSort()\n        } else {\n          this.mobileTopBarObserver.observe(this.topBar)\n          this.showStickyFilterSort()\n        }\n      },\n      { threshold: 0.05 },\n    )\n\n    this.mobileTopBarObserver = new IntersectionObserver(\n      ([{ isIntersecting: visible, boundingClientRect }]) => {\n        if (visible) {\n          this.showStickyFilterSort()\n        } else {\n          if (boundingClientRect.top <= 0) {\n            this.showStickyFilterSort()\n          } else {\n            this.hideStickyFilterSort()\n          }\n        }\n      },\n    )\n\n    if (this.dataset.stickyFilterSortEnabled === \"true\") {\n      this.footerObserver = new IntersectionObserver(\n        ([{ isIntersecting: visible }]) => {\n          if (visible) {\n            this.topBarObserver.disconnect()\n            this.hideStickyFilterSort()\n          } else {\n            this.topBarObserver.observe(this.topBar)\n          }\n        },\n        { threshold: 0.1 },\n      )\n\n      this.topBarObserver = new IntersectionObserver(\n        ([{ isIntersecting: visible, boundingClientRect }]) => {\n          if (visible) {\n            this.topBar.classList.add(this.classes.visible)\n            this.hideStickyFilterSort()\n          } else {\n            this.topBar.classList.remove(this.classes.visible)\n\n            if (\n              boundingClientRect.top <=\n              this.headerHeight + this.announcementHeight\n            ) {\n              this.showStickyFilterSort()\n            } else {\n              this.hideStickyFilterSort()\n            }\n          }\n        },\n        {\n          rootMargin: `-${\n            this.headerHeight + this.announcementHeight\n          }px 0px 0px 0px`,\n        },\n      )\n    }\n\n    // Watch for small-desktop breakpoint to handle sticky/filter button visibility\n    atBreakpointChange(1024, this.handleWindowResize.bind(this))\n    this.handleWindowResize()\n  }\n\n  handleFilterDrawerOpen(event) {\n    this.hideStickyFilterSort()\n\n    // If the open was triggered by the sticky filter/sort button, we need to delay\n    //  to allow the button to animate out.\n    // Otherwise, just open\n    if (event.target.matches(this.selectors.stickyFilterDrawerTrigger)) {\n      setTimeout(() => {\n        window.dispatchEvent(this.events.openFilterDrawer)\n      }, 240)\n    } else {\n      window.dispatchEvent(this.events.openFilterDrawer)\n    }\n  }\n\n  handleFilterDrawerClose() {\n    if (\n      !this.topBar.classList.contains(this.classes.visible) &&\n      this.dataset.stickyFilterSortEnabled === \"true\"\n    ) {\n      this.showStickyFilterSort()\n    }\n  }\n\n  handleViewResultsClick() {\n    window.dispatchEvent(this.events.closeFilterDrawer)\n  }\n\n  handleFilterSortFormChange(event) {\n    const url = `${window.location.pathname}?section_id=${this.sectionId}&${event.detail.searchParams}`\n\n    const topBarScrollTop =\n      this.topBar.getBoundingClientRect().top +\n      window.scrollY -\n      this.sectionPaddingTop -\n      this.headerHeight -\n      this.announcementHeight\n\n    // Scroll to the top bar\n    window.scrollTo({ top: topBarScrollTop, behaviour: \"smooth\" })\n\n    this.updateURLHash(event.detail.searchParams)\n    this.classList.add(this.classes.loading)\n\n    fetch(url)\n      .then((res) => res.text())\n      .then((text) => {\n        const doc = new DOMParser().parseFromString(text, \"text/html\")\n\n        const newProductGrid = doc.querySelector(this.selectors.productGrid)\n        const newPagination = doc.querySelector(this.selectors.pagination)\n\n        if (this.dataset.filterEnabled === \"true\") {\n          const newFilterDrawerHeading = doc.querySelector(\n            this.selectors.filterDrawerHeading,\n          )\n          const newFilterDrawerViewResultsIdleLabel = doc.querySelector(\n            this.selectors.filterDrawerViewResultsIdleLabel,\n          )\n          const newActiveFilters = doc.querySelector(\n            this.selectors.activeFilters,\n          )\n          const newFilterDrawerTrigger = doc.querySelector(\n            this.selectors.filterDrawerTrigger,\n          )\n\n          this.filterDrawerHeading.innerHTML = newFilterDrawerHeading.innerHTML\n\n          this.filterDrawerViewResultsIdleLabels.forEach((label) => {\n            label.innerHTML = newFilterDrawerViewResultsIdleLabel.innerHTML\n          })\n\n          this.activeFilters.innerHTML = newActiveFilters.innerHTML\n\n          this.filterGroups.forEach((group) => {\n            const newGroup = doc.getElementById(group.id)\n            const groupParent = group.closest(this.selectors.filterGroupParent)\n\n            if (newGroup) {\n              groupParent.classList.remove(this.classes.hidden)\n              group.innerHTML = newGroup.innerHTML\n            } else {\n              groupParent.classList.add(this.classes.hidden)\n            }\n          })\n\n          this.filterDrawerTriggers.forEach((trigger) => {\n            trigger.innerHTML = newFilterDrawerTrigger.innerHTML\n          })\n        }\n\n        this.productGrid.innerHTML = newProductGrid.innerHTML\n        this.productGrid.classList = newProductGrid.classList\n        this.pagination.innerHTML = newPagination.innerHTML\n        this.updateSortDropdowns(event.detail.sortBy)\n        this.classList.remove(this.classes.loading)\n\n        const filterRepaintEvent = new CustomEvent(FILTER_REPAINT, {\n          detail: { newDocument: doc },\n        })\n\n        this.filterSortFormComponent.dispatchEvent(filterRepaintEvent)\n      })\n  }\n\n  updateURLHash(searchParams) {\n    history.pushState(\n      { searchParams },\n      \"\",\n      `${window.location.pathname}${searchParams && \"?\".concat(searchParams)}`,\n    )\n  }\n\n  initSortDropdowns() {\n    this.sortDropdowns.forEach((dropdown) => {\n      const inputs = dropdown.querySelectorAll(\"input\")\n\n      // Add a change listener to each input so that we can emit an event with the change\n      inputs.forEach((input) => {\n        input.addEventListener(\n          \"click\",\n          this.handleSortOptionClick.bind(this),\n          this.eventOptions,\n        )\n\n        input.addEventListener(\n          \"keydown\",\n          this.handleSortOptionKeydown.bind(this),\n          this.eventOptions,\n        )\n      })\n    })\n  }\n\n  updateSortDropdowns(sortBy) {\n    this.dataset.currentSort = sortBy\n\n    this.sortDropdowns.forEach((dropdown) => {\n      const newSelectedInput = dropdown.querySelector(\n        `input[value=\"${sortBy}\"]`,\n      )\n      newSelectedInput.checked = true\n    })\n  }\n\n  handleSortOptionKeydown(event) {\n    event.preventDefault()\n\n    const inputs = event.currentTarget\n      .closest(this.selectors.sortDropdowns)\n      .querySelectorAll(\"input\")\n    let currentInputIndex\n\n    for (let i = 0; i < inputs.length; i++) {\n      if (inputs[i] === event.target) {\n        currentInputIndex = i\n        break\n      }\n    }\n\n    switch (event.key) {\n      case \"ArrowUp\": {\n        let previousInputIndex = currentInputIndex - 1\n\n        // If the current input is the first, then the \"previous\" should be the last\n        if (previousInputIndex < 0) {\n          previousInputIndex = inputs.length - 1\n        }\n\n        inputs[previousInputIndex].checked = true\n        inputs[previousInputIndex].focus()\n        break\n      }\n\n      case \"ArrowDown\": {\n        let nextInputIndex = currentInputIndex + 1\n\n        // If the current input is the first, then the \"previous\" should be the last\n        if (nextInputIndex === inputs.length) {\n          nextInputIndex = 0\n        }\n\n        inputs[nextInputIndex].checked = true\n        inputs[nextInputIndex].focus()\n        break\n      }\n\n      case \" \": {\n        if (event.target.value === this.dataset.currentSort) {\n          this.closeSortDropdown(\n            event.target.closest(this.selectors.sortDropdowns),\n          )\n        } else {\n          this.applySortChange(\n            event.target.value,\n            event.target.dataset.label,\n            event.target.closest(this.selectors.sortDropdowns),\n          )\n        }\n      }\n    }\n  }\n\n  handleSortOptionClick(event) {\n    if (event.target.value !== this.dataset.currentSort) {\n      this.applySortChange(\n        event.target.value,\n        event.target.dataset.label,\n        event.target.closest(this.selectors.sortDropdowns),\n      )\n    }\n  }\n\n  applySortChange(sortBy, label, parentDropdown) {\n    const sortChangedEvent = new CustomEvent(SORT_CHANGED, {\n      detail: { sortBy },\n    })\n\n    this.filterSortFormComponent.dispatchEvent(sortChangedEvent)\n    this.sortTriggerValue.innerText = label\n    this.closeSortDropdown(parentDropdown)\n  }\n\n  closeSortDropdown(dropdown) {\n    const disclosureWrapper = dropdown.closest(this.selectors.disclosureWrapper)\n\n    if (disclosureWrapper) {\n      disclosureWrapper.removeAttribute(\"open\")\n    } else {\n      this.closeSortDrawer()\n    }\n  }\n\n  handleWindowResize() {\n    // If we're above small-desktop, connect an observer to show/hide the sticky\n    // filter/sort button when the top bar or footer are in view.\n    // Otherwise, connect a mobile-specific observer for when the footer or\n    // banner are in view.\n    if (window.matchMedia(this.breakpoints.smallDesktop).matches) {\n      this.hideStickyFilterSort()\n      this.mobileFooterObserver.disconnect()\n      this.mobileTopBarObserver.disconnect()\n\n      if (this.dataset.stickyFilterSortEnabled === \"true\") {\n        this.footerObserver.observe(this.siteFooter)\n      }\n    } else {\n      this.hideStickyFilterSort()\n\n      if (this.dataset.stickyFilterSortEnabled === \"true\") {\n        this.footerObserver.disconnect()\n        this.topBarObserver.disconnect()\n      }\n\n      this.mobileFooterObserver.observe(this.siteFooter)\n    }\n  }\n\n  openSortDrawer() {\n    this.hideStickyFilterSort()\n\n    // Delay to allow sticky filter/sort button to animate out.\n    setTimeout(() => {\n      window.dispatchEvent(this.events.openSortDrawer)\n    }, 240)\n  }\n\n  closeSortDrawer() {\n    window.dispatchEvent(this.events.closeSortDrawer)\n  }\n\n  hideStickyFilterSort() {\n    this.stickyFilterSort?.classList.remove(this.classes.active)\n  }\n\n  showStickyFilterSort() {\n    this.stickyFilterSort?.classList.add(this.classes.active)\n  }\n\n  getHeaderAnnouncementHeight() {\n    if (this.header.dataset.enableStickyHeader === \"true\") {\n      this.headerHeight = parseInt(\n        getComputedStyle(document.documentElement)\n          .getPropertyValue(\"--header-height\")\n          .replace(\"px\", \"\"),\n        10,\n      )\n    }\n\n    if (\n      this.announcementBar &&\n      this.announcementBar.hasAttribute(\"data-sticky\")\n    ) {\n      this.announcementHeight = parseInt(\n        getComputedStyle(document.documentElement)\n          .getPropertyValue(\"--announcement-height\")\n          .replace(\"px\", \"\"),\n        10,\n      )\n    }\n  }\n\n  handleHeaderHeightChange(event) {\n    if (this.header.dataset.enableStickyHeader === \"true\") {\n      this.headerHeight = event.detail.height\n      this.mobileFooterObserver.disconnect()\n      this.mobileTopBarObserver.disconnect()\n      this.footerObserver?.disconnect()\n      this.topBarObserver?.disconnect()\n      this.initStickyFilterSortButton()\n    }\n  }\n\n  handleAnnouncementHeightChange(event) {\n    if (\n      this.announcementBar &&\n      this.announcementBar.hasAttribute(\"data-sticky\")\n    ) {\n      this.announcementHeight = event.detail.height\n      this.mobileFooterObserver.disconnect()\n      this.mobileTopBarObserver.disconnect()\n      this.footerObserver?.disconnect()\n      this.topBarObserver?.disconnect()\n      this.initStickyFilterSortButton()\n    }\n  }\n\n  disconnectedCallback() {\n    this.controller.abort()\n    this.documentObserver.disconnect()\n    this.mobileFooterObserver.disconnect()\n    this.mobileTopBarObserver.disconnect()\n    this.footerObserver?.disconnect()\n    this.topBarObserver?.disconnect()\n    atBreakpointChange.unload()\n  }\n}\n\nif (!customElements.get(\"collection-product-grid\")) {\n  customElements.define(\"collection-product-grid\", CollectionProductGrid)\n}\n","import { domMadeVideoPlayer } from \"./video-player.js\"\nimport {\n  pausePlayingVideos,\n  clearPlayerTrackingArr,\n} from \"./video-player-state.js\"\n\nconst { icons } = window.theme\n\nexport default function setupMediaLightbox(node) {\n  const lightboxMedia = node.querySelectorAll(\".lightbox-media\")\n\n  if (!lightboxMedia.length) return\n\n  let mediaLightbox\n\n  import(flu.chunks.photoswipe).then(({ PhotoSwipeLightbox, PhotoSwipe }) => {\n    mediaLightbox = new PhotoSwipeLightbox({\n      gallery: node,\n      children: \"a\",\n      showHideAnimationType: \"zoom\",\n      pswpModule: PhotoSwipe,\n      mainClass: \"pswp--product-lightbox\",\n      bgOpacity: 1,\n      arrowPrevSVG: icons.leftChevronWithStem,\n      arrowNextSVG: icons.rightChevronWithStem,\n      closeSVG: icons.close,\n      zoomSVG: icons.zoom,\n      preloadFirstSlide: true,\n    })\n\n    // Add ability to check for video present within lightbox\n    mediaLightbox.addFilter(\"itemData\", (itemData) => {\n      const videoUrl = itemData.element.dataset.videoUrl\n\n      if (videoUrl) {\n        itemData.videoUrl = videoUrl\n      }\n      return itemData\n    })\n\n    mediaLightbox.on(\"contentLoad\", (e) => {\n      const { content } = e\n\n      if (content.type === \"video\") {\n        e.preventDefault()\n\n        let {\n          externalVideoHost,\n          externalVideoId,\n          showPoster,\n          videoPoster,\n          videoAspectRatio,\n          isBackgroundVideo,\n        } = content.data.element.dataset\n\n        // Build photoswipe div in advance of iframeContainer being appended\n        content.element = document.createElement(\"div\")\n        content.element.className = \"pswp__video-container\"\n\n        // Build video container to append to photoswipe div\n        const videoContainer = document.createElement(\"div\")\n\n        if (videoAspectRatio < 1) {\n          // Additional class to account for portrait videos to override styling and prevent cropping.\n          videoContainer.className =\n            \"lightbox-video__container mismatched-aspect-video\"\n        } else {\n          videoContainer.className = \"lightbox-video__container\"\n        }\n\n        videoContainer.style.setProperty(\n          \"--video-aspect-ratio\",\n          videoAspectRatio,\n        )\n\n        let video\n\n        isBackgroundVideo = isBackgroundVideo === \"true\"\n        if (isBackgroundVideo) {\n          video = document.createElement(\"video\")\n          video.playsInline = true\n          video.controls = false\n          video.autoplay = true\n          video.muted = true\n          video.src = content.data.videoUrl\n        } else {\n          if (\n            externalVideoHost === \"vimeo\" ||\n            externalVideoHost === \"youtube\"\n          ) {\n            // Build iframe for external videos\n            video = document.createElement(\"iframe\")\n            video.setAttribute(\"allowfullscreen\", \"\")\n            video.id = `lightbox-video-${externalVideoId}`\n            videoContainer.setAttribute(\"data-video-type\", externalVideoHost)\n          } else {\n            // Build video element for Shopify videos\n            video = document.createElement(\"video\")\n            video.playsInline = true\n            video.controls = true\n          }\n\n          video.src = content.data.videoUrl\n        }\n\n        showPoster = showPoster === \"true\"\n        if (showPoster && !isBackgroundVideo) {\n          // Show poster and play button until clicked to play\n          videoContainer.setAttribute(\"data-show-poster\", true)\n\n          if (externalVideoHost) {\n            video.setAttribute(\"allow\", \"autoplay\")\n          }\n\n          const posterTemplate = node.querySelector(\n            \"[js-lightbox-video-poster-container]\",\n          )\n          const currentPoster = posterTemplate.content.cloneNode(true)\n          videoContainer.appendChild(currentPoster)\n\n          let posterImage\n\n          if (videoPoster) {\n            posterImage = videoContainer.querySelector(\n              \"[js-lightbox-video-poster]\",\n            )\n            posterImage.src = videoPoster\n          } else {\n            posterImage = videoContainer.querySelector(\".poster-placeholder\")\n          }\n          // Append videoContainer with poster\n          content.element.appendChild(videoContainer)\n        } else {\n          videoContainer.setAttribute(\"data-has-poster\", false)\n          content.element.appendChild(videoContainer)\n        }\n\n        domMadeVideoPlayer(videoContainer, video)\n      }\n    })\n\n    mediaLightbox.on(\"afterInit\", () => {\n      const initSlideVideo = mediaLightbox.pswp.currSlide.data.type === \"video\"\n\n      if (initSlideVideo) {\n        const initialVideoPlayButton =\n          mediaLightbox.pswp.currSlide.content.element.firstChild.childNodes[1]\n\n        // Removes poster to reveal video when opening lightbox\n        initialVideoPlayButton.click()\n      }\n    })\n\n    mediaLightbox.init()\n\n    if (window.Shopify?.designMode) {\n      node.addEventListener(\"shopify:section:load\", () => {\n        // Re-init lightbox after theme editor re-render to allow it to keep working\n        mediaLightbox.init()\n      })\n    }\n\n    // Hide nav ui elements if single image\n    mediaLightbox.on(\"firstUpdate\", () => {\n      const { pswp, options } = mediaLightbox\n      const mediaCount = options.dataSource.items.length\n\n      if (mediaCount === 1) {\n        pswp.element.classList.add(\"pswp--is-single-image\")\n      }\n    })\n\n    // Remove video to stop playing and reset to poster\n    mediaLightbox.on(\"contentDeactivate\", ({ content }) => {\n      if (content.type === \"video\") {\n        pausePlayingVideos()\n      }\n    })\n\n    mediaLightbox.on(\"close\", () => {\n      clearPlayerTrackingArr()\n    })\n  })\n}\n","function setupModelViewer(node) {\n  const modelEls = node.querySelectorAll(\"model-viewer\")\n\n  if (modelEls.length !== 0) {\n    initModels()\n  }\n\n  function initModels() {\n    window.Shopify.loadFeatures([\n      {\n        name: \"model-viewer-ui\",\n        version: \"1.0\",\n        onLoad: initModelViewers,\n      },\n    ])\n\n    window.Shopify.loadFeatures([\n      {\n        name: \"shopify-xr\",\n        version: \"1.0\",\n        onLoad: initShopifyXr,\n      },\n    ])\n  }\n\n  function initModelViewers(errors) {\n    if (errors) return\n\n    modelEls.forEach((model) => {\n      initCustomModelButtons(model)\n    })\n  }\n\n  function initShopifyXr() {\n    if (!window.ShopifyXR) {\n      document.addEventListener(\"shopify_xr_initialized\", () => {\n        initShopifyXr()\n      })\n    } else {\n      document.querySelectorAll(\"[id^='ModelJSON-']\").forEach((modelJSON) => {\n        window.ShopifyXR.addModels(JSON.parse(modelJSON.textContent))\n        modelJSON.remove()\n      })\n\n      window.ShopifyXR.setupXRElements()\n    }\n  }\n\n  function initCustomModelButtons(model) {\n    const viewer = new window.Shopify.ModelViewerUI(model)\n\n    const parentContainer = model.closest(\".product-media__item\")\n    const poster = parentContainer.querySelector(\".model-viewer__poster\")\n    const closeBtn = parentContainer.querySelector(\n      \".model-viewer__close-button\",\n    )\n\n    poster.addEventListener(\"click\", () => {\n      parentContainer.classList.add(\"model-viewer__active\")\n      viewer.play()\n    })\n\n    poster.addEventListener(\"keydown\", (event) => {\n      if (event.key === \"Enter\") {\n        parentContainer.classList.add(\"model-viewer__active\")\n        viewer.play()\n      }\n    })\n\n    closeBtn.addEventListener(\"click\", () => {\n      parentContainer.classList.remove(\"model-viewer__active\")\n      viewer.pause()\n    })\n\n    closeBtn.addEventListener(\"keydown\", (event) => {\n      if (event.key === \"Enter\") {\n        parentContainer.classList.remove(\"model-viewer__active\")\n        viewer.pause()\n      }\n    })\n  }\n}\n\nexport default setupModelViewer\n","import EVENTS from \"../lib/events.js\"\nimport srraf from \"srraf\"\nimport setupMediaLightbox from \"../lib/media-lightbox.js\"\nimport setupModelViewer from \"../lib/model-viewer.js\"\nimport { liquidMadeVideoPlayer } from \"../lib/video-player.js\"\nimport { pausePlayingVideos } from \"../lib/video-player-state.js\"\n\nclass ProductMedia extends HTMLElement {\n  constructor() {\n    super()\n\n    this.selectors = {\n      activeThumb: \".product-thumbnails__item-link.active\",\n      carouselTabIndex: \"[js-update-carousel-tabindex]\",\n      initialMediaContainer: \"[data-initial-slide]\",\n      iframe: \"iframe\",\n      image: \".image\",\n      mainMediaContainer: \".product-media__items\",\n      media: \".media\",\n      mediaItemWrapper: \"[js-media-item-wrapper]\",\n      mobileLoopButton: \".scroll-slider__mobile-loop-nav\",\n      thumb: \"[js-product-thumbnail]\",\n      thumbById: (id) => `[data-thumbnail-id='${id}']`,\n      mediaById: (id) => `[data-slide-index='${id}']`,\n      thumbContainer: \"[js-product-thumbnails]\",\n      thumbGradient: \".product-thumbnails__end-cap-gradient\",\n      video: \"video\",\n      videoPlayerContainer: \"[js-video-player-container]\",\n      videoPoster: \".video-poster-container\",\n      viewInYourSpace: \"[js-in-your-space]\",\n    }\n  }\n\n  connectedCallback() {\n    this.controller = new AbortController()\n\n    this.initActiveMedia()\n\n    // Listen for variant change, handle media depending on media grouping setting\n    this.addEventListener(\n      EVENTS.PRODUCT_VARIANT_CHANGED,\n      (event) => {\n        if (event.detail.hasMediaGrouping) {\n          this.handleRepaint(event)\n        } else {\n          this.updateActiveMainMediaToVariant(event)\n        }\n      },\n      { signal: this.controller.signal },\n    )\n\n    document.addEventListener(\n      EVENTS.SHOPIFY_SECTION_LOAD,\n      this.handleLeftThumbnailContainerHeight(),\n      {\n        signal: this.controller.signal,\n      },\n    )\n  }\n\n  initActiveMedia() {\n    this.media = this.querySelector(this.selectors.media)\n\n    if (this.media === null) return\n\n    this.activeMediaController = new AbortController()\n    this.hasSingleMedia = this.dataset.hasSingleMedia === \"true\"\n\n    this.mediaLayout = this.dataset.mediaLayout\n    this.mainMediaContainer = this.querySelector(\n      this.selectors.mainMediaContainer,\n    )\n    this.initialMediaContainer = this.querySelector(\n      this.selectors.initialMediaContainer,\n    )\n\n    // Setup media lightbox\n    if (this.dataset.hasProductLightbox === \"true\") {\n      setupMediaLightbox(this.mainMediaContainer)\n    }\n\n    // Setup model viewer\n    setupModelViewer(this.mainMediaContainer)\n\n    // Load video players\n    this.videoPlayerContainers = this.querySelectorAll(\n      this.selectors.videoPlayerContainer,\n    )\n    this.videoPlayerContainers.forEach((video) => liquidMadeVideoPlayer(video))\n\n    //\n    // Desktop carousel & all Mobile layouts\n    //\n    // Load thumbnail indicators\n    if (this.mediaLayout === \"thumbnails\" && this.dataset.thumbnailPosition) {\n      this.thumbnailPosition = this.dataset.thumbnailPosition\n    }\n\n    if (!this.hasSingleMedia) {\n      this.activeThumb = this.querySelector(this.selectors.activeThumb)\n      this.activeMediaId = this.activeThumb.dataset.thumbnailId\n      this.scrollerId = this.dataset.scrollerId\n\n      // Listen for carousel sliding\n      document.addEventListener(\n        EVENTS.SCROLL_SLIDER_CHANGED(this.scrollerId),\n        (event) => {\n          const currentMediaEl = event.detail.currentElement\n          const previousMediaEl = event.detail.previousElement\n          this.mobileLoopButton = this.querySelector(\n            this.selectors.mobileLoopButton,\n          )\n\n          if (currentMediaEl) {\n            if (currentMediaEl !== this.mobileLoopButton) {\n              this.updateActiveThumbnails(currentMediaEl.dataset.mediaItemId)\n            }\n\n            if (currentMediaEl.dataset.mediaType === \"model\") {\n              this.initViewInYourSpace(currentMediaEl.dataset.mediaItemId)\n            }\n          }\n\n          // Pause & Add poster back to any active iframes\n          if (this.mediaLayout === \"thumbnails\") {\n            if (currentMediaEl) {\n              this.updateCarouselA11yNav(currentMediaEl)\n            }\n\n            if (previousMediaEl) {\n              const prevMediaType = previousMediaEl.dataset.mediaType\n\n              if (\n                prevMediaType === \"external_video\" ||\n                prevMediaType === \"video\"\n              ) {\n                const injectedVideoIframe = previousMediaEl.querySelector(\n                  this.selectors.iframe,\n                )\n                const injectedVideoElement = previousMediaEl.querySelector(\n                  this.selectors.video,\n                )\n\n                if (injectedVideoIframe || injectedVideoElement) {\n                  pausePlayingVideos()\n                }\n              }\n            }\n          }\n        },\n        { signal: this.activeMediaController.signal },\n      )\n\n      //\n      // Desktop carousel layouts only\n      //\n      if (this.mediaLayout === \"thumbnails\") {\n        this.initThumbnailListeners()\n\n        // Set tabindex within carousels\n        this.querySelectorAll(this.selectors.carouselTabIndex).forEach((el) => {\n          el.setAttribute(\"tabindex\", \"-1\")\n        })\n      }\n    }\n  }\n\n  handleLeftThumbnailContainerHeight() {\n    if (!this.initialMediaContainer) return\n\n    this.videoPoster = this.querySelector(this.selectors.videoPoster)\n    const initialMedia = this.initialMediaContainer.querySelector(\n      this.selectors.media,\n    )\n    const mediaEl = this.videoPoster ? this.videoPoster : initialMedia\n\n    // Allow for slight delay to improve container height within T.E.\n    setTimeout(() => {\n      this.style.setProperty(\n        \"--left-thumbnail-container-height\",\n        `${mediaEl.offsetHeight}px`,\n      )\n    }, 0)\n  }\n\n  initThumbnailListeners() {\n    // Listen for page loaded to get left thumbnail column height\n    if (this.thumbnailPosition === \"left\") {\n      const initialImg = this.initialMediaContainer.querySelector(\n        this.selectors.image,\n      )\n\n      initialImg\n        .decode()\n        .then(() => {\n          this.handleLeftThumbnailContainerHeight()\n        })\n        .then(() => {\n          initialImg.classList.add(\"initial-image\")\n        })\n    }\n\n    const smallDesktop = 1023 // 1023 to make sure 1024 is properly styled\n    this.widthWatcher = srraf(({ vw, pvw }) => {\n      if (vw !== pvw && vw > smallDesktop) {\n        this.handleLeftThumbnailContainerHeight()\n      }\n    })\n\n    // Listen for thumbnail container scroll to apply gradients\n    this.thumbContainer = this.querySelector(this.selectors.thumbContainer)\n    this.thumbGradient = this.querySelector(this.selectors.thumbGradient)\n\n    this.thumbContainer.addEventListener(\n      \"scroll\",\n      () => {\n        this.updateThumbGradientOpacity()\n      },\n      {\n        signal: this.activeMediaController.signal,\n      },\n    )\n\n    // Listen for thumbnail clicks\n    this.thumbnailItems = this.querySelectorAll(this.selectors.thumb)\n    this.thumbnailItems.forEach((item) => {\n      item.addEventListener(\n        \"click\",\n        () => {\n          this.updateActiveMainMedia(parseInt(item.dataset.thumbnailIndex))\n          this.updateActiveThumbnails(item.dataset.thumbnailId)\n        },\n        { signal: this.activeMediaController.signal },\n      )\n    })\n  }\n\n  initViewInYourSpace(currentActiveMediaId) {\n    this.querySelector(this.selectors.viewInYourSpace).setAttribute(\n      \"data-shopify-model3d-id\",\n      currentActiveMediaId,\n    )\n  }\n\n  updateActiveMainMedia(currentThumbnailIndex) {\n    const isDesktopViewport =\n      (window.innerWidth || document.documentElement.clientWidth) > 1024\n\n    if (isDesktopViewport && this.mediaLayout === \"columns\") {\n      const featuredMediaEl = this.querySelector(\n        `${this.selectors.mediaById(currentThumbnailIndex)}`,\n      )\n\n      featuredMediaEl.scrollIntoView({\n        behavior: \"smooth\",\n        block: \"center\",\n        inline: \"nearest\",\n      })\n    }\n\n    // Scroll slider event included for Column layouts for mobile carousel coverage\n    document.dispatchEvent(\n      new CustomEvent(EVENTS.SCROLL_SLIDER_GO_TO_SLIDE(this.scrollerId), {\n        detail: {\n          slideIndex: currentThumbnailIndex,\n          behavior: \"instant\",\n        },\n      }),\n    )\n  }\n\n  updateActiveMainMediaToVariant(event) {\n    const newMediaId = event.detail.newFeaturedMedia\n    this.mediaItemWrappers = this.querySelectorAll(\n      this.selectors.mediaItemWrapper,\n    )\n\n    let newMediaIndex\n    for (const media of this.mediaItemWrappers) {\n      if (media.dataset.mediaItemId === newMediaId) {\n        newMediaIndex = parseInt(media.dataset.slideIndex)\n        break\n      }\n    }\n\n    this.updateActiveMainMedia(newMediaIndex)\n  }\n\n  updateActiveThumbnails(currentActiveMediaId) {\n    const lastActiveThumbnail = this.querySelector(this.selectors.activeThumb)\n\n    let activeThumbnail = this.querySelector(\n      `${this.selectors.thumbById(currentActiveMediaId)}`,\n    )\n\n    // Media grouping may create null activeThumbnails\n    if (activeThumbnail === null) {\n      const firstMediaId = this.querySelector(this.selectors.media).dataset\n        .mediaId\n\n      activeThumbnail = this.querySelector(\n        `${this.selectors.thumbById(firstMediaId)}`,\n      )\n    }\n\n    if (activeThumbnail !== lastActiveThumbnail) {\n      // Add and remove active thumbnail indicator\n      activeThumbnail.classList.add(\"active\")\n      lastActiveThumbnail.classList.remove(\"active\")\n      this.activeMediaId = currentActiveMediaId\n\n      // Scroll active thumbnail into view\n      if (this.mediaLayout === \"thumbnails\") {\n        const scrollAttribute =\n          this.thumbnailPosition === \"left\" ? \"scrollTop\" : \"scrollLeft\"\n\n        const scrollDistance =\n          this.thumbnailPosition === \"left\"\n            ? activeThumbnail.offsetTop -\n              activeThumbnail.getBoundingClientRect().height * 2\n            : activeThumbnail.offsetLeft -\n              activeThumbnail.getBoundingClientRect().width * 2\n\n        this.thumbContainer[scrollAttribute] = scrollDistance\n      }\n    }\n  }\n\n  updateThumbGradientOpacity() {\n    let beforeOpacity = 0\n    let afterOpacity = 1\n\n    if (this.thumbnailPosition === \"left\") {\n      if (this.thumbContainer.scrollTop !== 0) {\n        beforeOpacity = 1\n      }\n\n      const thumbContainerScrollHeight =\n        this.thumbContainer.scrollHeight - this.thumbGradient.offsetHeight\n      const thumbContainerMaxScroll = this.thumbContainer.scrollTop + 1\n      if (thumbContainerMaxScroll >= thumbContainerScrollHeight) {\n        afterOpacity = 0\n      }\n    } else if (this.thumbnailPosition === \"below\") {\n      if (this.thumbContainer.scrollLeft !== 0) {\n        beforeOpacity = 1\n      }\n\n      const thumbContainerScrollWidth =\n        this.thumbContainer.scrollWidth - this.thumbGradient.offsetWidth\n      const thumbContainerMaxScroll = this.thumbContainer.scrollLeft + 1\n\n      if (thumbContainerMaxScroll >= thumbContainerScrollWidth) {\n        afterOpacity = 0\n      }\n    }\n\n    this.thumbGradient.style.setProperty(\n      \"--thumb-opacity-before\",\n      beforeOpacity,\n    )\n    this.thumbGradient.style.setProperty(\"--thumb-opacity-after\", afterOpacity)\n  }\n\n  updateCarouselA11yNav(currentActiveMediaEl) {\n    this.allTabIndexEls = this.querySelectorAll(this.selectors.carouselTabIndex)\n    this.currentTabIndexEls = currentActiveMediaEl.querySelectorAll(\n      this.selectors.carouselTabIndex,\n    )\n\n    this.allTabIndexEls.forEach((el) => {\n      el.setAttribute(\"tabindex\", \"-1\")\n    })\n\n    this.currentTabIndexEls.forEach((el) => {\n      el.removeAttribute(\"tabindex\")\n    })\n  }\n\n  handleRepaint(event) {\n    // In the case that Media Grouping image order creates conflicts, prevent repaint\n    if (event.detail.mediaSize > 0) {\n      this.activeMediaController.abort()\n      this.controller.abort()\n      this.connectedCallback()\n      this.initActiveMedia()\n    }\n  }\n\n  disconnectedCallback() {\n    this.controller.abort()\n  }\n}\n\nif (!customElements.get(\"product-media\")) {\n  customElements.define(\"product-media\", ProductMedia)\n}\n","import \"../custom-elements/product-media\"\nimport EVENTS from \"../lib/events\"\nimport { dialog } from \"../lib/modals\"\n\nclass MainProductDefault extends HTMLElement {\n  constructor() {\n    super()\n\n    this.selectors = {\n      productInner: \".product-inner\",\n\n      // Set sticky container\n      detailsContainer: \".product__details\",\n      mediaContainer: \".product__media\",\n\n      // Variant change events\n      buyButtonBlock: \"product-block-buy-buttons\",\n      buyButtons: \"[js-buy-buttons]\",\n      buyButtonDialog: \".buy-button-dialog\",\n      inventoryStatusBlock: \"[js-product-block-inventory-status]\",\n      mediaBlock: \"product-media\",\n      mediaItem: \".media\",\n      popupModalDialog: \".product-block-variant-selector--popup-modal\",\n      priceBlock: \"[js-product-block-price]\",\n      productForm: \"[data-product-form]\",\n      productFormIdInput: \"input[name='id']\",\n      skuBlock: \"[js-product-block-sku]\",\n      stickyAddToCartContent: \"[js-sticky-atc-content]\",\n      stickyAddToCartDrawer: \"[data-fluco-dialog='sticky-add-to-cart-modal']\",\n      storeAvailabilityContainer: \"[js-store-availability-container]\",\n      variantBlock: \"product-block-variant-selector\",\n      variantMediaGrouping: \"[data-enable-media-grouping='true']\",\n      variantSelectedInputs: \"div input:checked\",\n      selectVariantById: (id) =>\n        `[js-variant-input][data-option-value-id=\"${id}\"]`,\n    }\n\n    this.classes = {\n      changePending: \"change-pending\",\n      hasError: \"has-error\",\n      modalWillOpen: \"modal--will-open\",\n      stickyDetailsContainer: \"sticky-details-container\",\n      stickyMediaContainer: \"sticky-media-container\",\n      preventAnimation: \"prevent-animation\",\n      quickViewProduct: \"quick-view-product\",\n    }\n  }\n\n  connectedCallback() {\n    this.controller = new AbortController()\n    this.sectionId = this.getAttribute(\"data-section-id\")\n    this.isFeatured =\n      this.getAttribute(\"data-section-type\") === \"featured-product\"\n    this.sectionType = this.getAttribute(\"data-section-type\")\n    this.productURL = this.getAttribute(\"data-product-url\")\n    this.productInner = this.querySelector(this.selectors.productInner)\n    this.mediaContainer = this.querySelector(this.selectors.mediaContainer)\n    this.detailsContainer = this.querySelector(this.selectors.detailsContainer)\n\n    // Sticky container\n    this.setStickyContainer()\n\n    // Variant change handling selectors\n    this.productForm = this.querySelector(this.selectors.productForm)\n    this.buyButtonBlock = this.querySelector(this.selectors.buyButtonBlock)\n    this.mediaBlock = this.querySelector(this.selectors.mediaBlock)\n    this.variantBlock = this.querySelector(this.selectors.variantBlock)\n    this.variantMediaGrouping = this.querySelector(\n      this.selectors.variantMediaGrouping,\n    )\n\n    // Listen for variant change\n    this.addEventListener(\n      EVENTS.PRODUCT_VARIANT_CHANGING,\n      (event) => {\n        const withinQuickView = event.detail.withinQuickView\n        // If a variant change happens within a Quick view modal, it should be separated from the PDP\n        // Splitting out all Quick view modals should be a good safety net.\n        if (!withinQuickView) {\n          this.handleNewVariant(event.detail)\n        }\n      },\n      { signal: this.controller.signal },\n    )\n\n    if (this.sectionType === this.classes.quickViewProduct) {\n      // This specifically targets the product within the Quick view to prevent conflicts with the full PDP\n      this.addEventListener(EVENTS.PRODUCT_VARIANT_CHANGING, (event) => {\n        this.handleNewVariant(event.detail)\n      })\n\n      // When a product is added to cart from quick view, close quick view\n      this.addEventListener(\n        EVENTS.PRODUCT_ADD_SUCCESS,\n        () => {\n          window.dispatchEvent(\n            new CustomEvent(\n              EVENTS.MODAL_POPUP_CLOSE(\n                `quick-view-${this.getAttribute(\"data-product-id\")}`,\n              ),\n            ),\n          )\n        },\n        { signal: this.controller.signal },\n      )\n    }\n  }\n\n  //\n  // General setup functions\n  //\n  setStickyContainer() {\n    this.stickyContainer = this.productInner.getAttribute(\n      \"data-sticky-effect-container\",\n    )\n    this.galleryLayout = this.productInner.getAttribute(\"data-gallery-layout\")\n\n    if (\n      this.stickyContainer === \"gallery\" &&\n      (this.galleryLayout === \"thumbnails_below\" ||\n        this.galleryLayout === \"thumbnails_left\")\n    ) {\n      this.mediaContainer.classList.add(this.classes.stickyMediaContainer)\n      this.detailsContainer.classList.remove(\n        this.classes.stickyDetailsContainer,\n      )\n    }\n\n    if (this.stickyContainer === \"product_details\") {\n      this.detailsContainer.classList.add(this.classes.stickyDetailsContainer)\n      this.mediaContainer.classList.remove(this.classes.stickyMediaContainer)\n    }\n  }\n\n  //\n  // Variant on change functions\n  //\n  handleNewVariant(newElements) {\n    this.detailsContainer.classList.add(this.classes.changePending)\n\n    const newOptionInput = newElements.newOptionInput\n    const newVariantId = newOptionInput.getAttribute(\"data-variant-id\")\n\n    const params = new URLSearchParams({\n      section_id: this.sectionId,\n    })\n\n    // Set params with new variant for fetch\n    if (newVariantId) {\n      params.set(\"variant\", newVariantId)\n    } else {\n      // Build params from currently selected variants\n      const selectedOptionValues = Array.from(\n        this.querySelectorAll(this.selectors.variantSelectedInputs),\n      )\n\n        .map((element) => element.getAttribute(\"data-option-value-id\"))\n        .join(\",\")\n\n      params.set(\"option_values\", selectedOptionValues)\n    }\n\n    // URL only provided if connected to Shopify sibling products\n    const newProductUrl = newOptionInput.getAttribute(\"data-product-url\")\n\n    if (newProductUrl) this.productURL = newProductUrl\n\n    if (!newVariantId && !newProductUrl) {\n      this.setUnavailable()\n      return\n    }\n\n    // Fetch new html to repaint applicable blocks\n    fetch(`${this.productURL}?${params}`)\n      .then((response) => response.text())\n      .then((responseText) => {\n        const html = new DOMParser().parseFromString(responseText, \"text/html\")\n\n        // If we're on the product page, update the URL for history and deep linking\n        if (this.sectionType === \"product\") {\n          this.updateUrlWithVariant(newVariantId)\n        }\n\n        // Update html in product blocks\n        const blockContentToReplace = [\n          \"variantBlock\",\n          \"skuBlock\",\n          \"priceBlock\",\n          \"buyButtons\",\n          \"inventoryStatusBlock\",\n          \"storeAvailabilityContainer\",\n          \"stickyAddToCartContent\",\n        ]\n\n        // Deregister dialogs before updating HTML so they can be reset with new content\n        // The availability is removed in quick view, so it's possible that this doesn't exist\n        // This should be blocked when updating variants within the Quick view so it doesn't wipe the PDP dialogs\n        if (\n          this.buyButtonBlock &&\n          this.sectionType !== this.classes.quickViewProduct\n        ) {\n          const dialogKeysToDestroy = [\n            `store-availability-drawer-${this.sectionId}`,\n            \"sticky-add-to-cart-modal\",\n          ]\n\n          for (const key of dialogKeysToDestroy) {\n            if (window.flu.dialogs[key]) {\n              window.flu.dialogs[key][1].destroy({ deregister: true })\n            }\n          }\n        }\n\n        this.updateBlockHTML(blockContentToReplace, html)\n\n        // Update product form's variant\n        const htmlVariantId = html\n          .querySelector(this.selectors.productForm)\n          .getAttribute(\"data-current-product-id\")\n\n        // When we're in quick view, the product form is loaded after this component connects\n        // and assigns this, so we need to re-assign it\n        if (!this.productForm) {\n          this.productForm = this.querySelector(this.selectors.productForm)\n        }\n\n        this.productForm.setAttribute(\"data-current-product-id\", htmlVariantId)\n        this.productForm\n          .querySelector(this.selectors.productFormIdInput)\n          .setAttribute(\"value\", htmlVariantId)\n\n        //\n        // Interactive content requiring events for repainting listeners\n        //\n        if (this.buyButtonBlock) {\n          const newOptionId = newOptionInput.getAttribute(\n            \"data-option-value-id\",\n          )\n\n          this.updateBuyButtonBlockContent(\n            newElements.withinStickyModal,\n            newOptionId,\n          )\n        }\n\n        if (this.variantBlock) {\n          this.updateVariantSelectorBlockContent()\n        }\n\n        let hasMediaGrouping = false\n        let newContent = newOptionInput\n        if (this.variantMediaGrouping) {\n          hasMediaGrouping = true\n          newContent = html.querySelector(this.selectors.mediaBlock)\n        }\n\n        this.updateMediaBlockContent(newContent, hasMediaGrouping)\n        this.detailsContainer.classList.remove(this.classes.changePending)\n      })\n  }\n\n  getUrlWithVariant(url, id) {\n    const parsedURL = new URL(url)\n    const urlBase = parsedURL.origin + parsedURL.pathname\n    const params = parsedURL.searchParams\n\n    params.set(\"variant\", id)\n\n    return `${urlBase}?${params}`\n  }\n\n  setUnavailable() {\n    const unavailableSelectors = [\n      this.selectors.priceBlock,\n      this.selectors.skuBlock,\n    ]\n\n    this.querySelectorAll(unavailableSelectors).forEach(({ classList }) =>\n      classList.add(\"hidden\"),\n    )\n    this.disableSubmitButtons()\n    this.detailsContainer.classList.remove(this.classes.changePending)\n  }\n\n  disableSubmitButtons() {\n    const unavailableString = window.theme.strings.products.product.unavailable\n    const buyButtons = this.querySelector(this.selectors.buyButtons)\n    const submitButtons = buyButtons.querySelectorAll(\"button\")\n\n    submitButtons.forEach((button) => {\n      const submitButtonLabels = button.querySelectorAll(\".button__label\")\n\n      button.setAttribute(\"disabled\", \"disabled\")\n      submitButtonLabels.forEach((label) => {\n        label.textContent = unavailableString\n      })\n    })\n  }\n\n  updateUrlWithVariant(variantId) {\n    const url = this.getUrlWithVariant(window.location.href, variantId)\n    window.history.replaceState({ path: url }, \"\", url)\n  }\n\n  updateBlockHTML(contentToUpdateArray, html) {\n    // TODO: Reassess approach, particularly for SKU where additional element\n    // required so the innerHTML can be updated.\n    contentToUpdateArray.forEach((block) => {\n      this[block] = this.querySelector(this.selectors[block])\n      this.htmlBlock = html.querySelector(this.selectors[block])\n\n      if (this[block]) {\n        this[block].outerHTML = this.htmlBlock.outerHTML\n      }\n    })\n  }\n\n  //\n  // Send updated content via events for blocks to handle\n  //\n\n  updateBuyButtonBlockContent(withinStickyModal, lastOptionSelectedId) {\n    this.buyButtonBlock.classList.remove(this.classes.hasError)\n    this.buyButtonBlock = this.querySelector(this.selectors.buyButtonBlock)\n\n    // Register new dialog content for store availability and sticky atc\n    const buyButtonDialogs = this.buyButtonBlock.querySelectorAll(\n      this.selectors.buyButtonDialog,\n    )\n    buyButtonDialogs.forEach((dialogEl) => {\n      dialog(dialogEl)\n    })\n\n    // Control animations within open Sticky add to cart modal\n    this.stickyDialog = this.buyButtonBlock.querySelector(\n      this.selectors.stickyAddToCartDrawer,\n    )\n\n    if (withinStickyModal && this.stickyDialog) {\n      this.stickyDialog.classList.remove(this.classes.modalWillOpen)\n\n      // A race condition requires a time out here otherwise selector will return null\n      setTimeout(() => {\n        this.stickyDialog\n          .querySelector(this.selectors.selectVariantById(lastOptionSelectedId))\n          ?.focus()\n      }, 0)\n\n      window.dispatchEvent(\n        new CustomEvent(EVENTS.MODAL_POPUP_OPEN(\"sticky-add-to-cart-modal\")),\n      )\n    }\n\n    this.buyButtonBlock.dispatchEvent(\n      new CustomEvent(EVENTS.PRODUCT_VARIANT_CHANGED),\n    )\n  }\n\n  updateVariantSelectorBlockContent() {\n    // The Quick view approach within product-item-quick-shopping.js removes whitelisted dialogs and\n    // injects them after the Quick view dialog to allow for nesting that doesn't conflict\n    // (ex. Clicking the close button on a popup doesn't close Quick view). Variant change\n    // inserts the dialog back to their original placement and need to be removed again.\n    if (this.sectionType === this.classes.quickViewProduct) {\n      const defaultPopupModalDialog = this.querySelector(\n        this.selectors.popupModalDialog,\n      )\n\n      defaultPopupModalDialog?.remove()\n    }\n\n    this.variantBlock.dispatchEvent(\n      new CustomEvent(EVENTS.PRODUCT_VARIANT_CHANGED),\n    )\n  }\n\n  updateMediaBlockContent(newContent, hasMediaGrouping) {\n    // There's a split path depending on if Media grouping is enabled\n    // Media grouping needs to update indicators and repaint the block\n    if (hasMediaGrouping) {\n      const mediaSize = parseInt(\n        newContent.getAttribute(\"data-media-count\"),\n        10,\n      )\n\n      // TODO: Look into alternate approach in CSS to do the calcs with --mediaCount\n      const mobileThumbnailWidthPercentage = (\n        100 / parseInt(mediaSize, 10)\n      ).toFixed(2)\n\n      this.mediaBlock.style.setProperty(\n        \"--mobile-thumbnail-width-percentage\",\n        `${mobileThumbnailWidthPercentage}%`,\n      )\n\n      this.mediaBlock = this.querySelector(this.selectors.mediaBlock)\n      this.mediaBlock.outerHTML = newContent.outerHTML\n\n      // Reassign media block so it's pulling the most up to date one\n      this.mediaBlock = this.querySelector(this.selectors.mediaBlock)\n      this.mediaBlock.dispatchEvent(\n        new CustomEvent(EVENTS.PRODUCT_VARIANT_CHANGED, {\n          detail: {\n            hasMediaGrouping: true,\n            mediaSize,\n          },\n        }),\n      )\n    } else {\n      // Media without grouping needs set navigate to featured media, properly\n      // trigger slider events, styling and stay aware of other featured media\n      const newFeaturedMedia = newContent.getAttribute(\n        \"data-option-value-featured-media\",\n      )\n\n      if (newFeaturedMedia) {\n        const variantMediaChangedEvent = new CustomEvent(\n          EVENTS.PRODUCT_VARIANT_CHANGED,\n          {\n            bubbles: true,\n            detail: {\n              hasMediaGrouping: false,\n              newFeaturedMedia,\n            },\n          },\n        )\n\n        this.mediaItem = this.querySelector(this.selectors.mediaItem)\n        this.mediaItem.dispatchEvent(variantMediaChangedEvent)\n      }\n    }\n  }\n\n  disconnectedCallback() {\n    this.controller.abort()\n  }\n}\n\nif (!customElements.get(\"main-product-default\")) {\n  customElements.define(\"main-product-default\", MainProductDefault)\n}\n","import atBreakpointChange from \"../lib/at-breakpoint-change.js\"\nimport EVENTS from \"../lib/events.js\"\nimport getMediaQuery from \"../lib/media-queries.js\"\n\nconst {\n  ANNOUNCEMENT_HEIGHT_UPDATED,\n  HEADER_HEIGHT_UPDATED,\n  FILTER_REPAINT,\n  FILTER_SORT_CHANGED,\n  MODAL_POPUP_CLOSE,\n  MODAL_POPUP_CLOSED,\n  MODAL_POPUP_OPEN,\n  SORT_CHANGED,\n} = EVENTS\n\nclass SearchResultGrid extends HTMLElement {\n  constructor() {\n    super()\n\n    this.selectors = {\n      activeFilters: \"[js-active-filters]\",\n      announcementBar: \"announcement-bar\",\n      disclosureWrapper: \".disclosure-wrapper\",\n      filterDrawerTrigger: \"[js-filter-drawer-trigger]\",\n      stickyFilterDrawerTrigger: \"[js-filter-drawer-trigger--sticky]\",\n      filterDrawerHeading: \"[js-filter-drawer-heading]\",\n      filterDrawerViewResults: \"[js-filter-view-results]\",\n      filterDrawerViewResultsIdleLabel: \"[js-filter-view-results-label]\",\n      filterGroup: \"[js-filter-group]\",\n      filterGroupParent: \"[js-filter-group-parent]\",\n      filterSortFormComponent: \"[js-filter-sort-form-component]\",\n      footer: \"footer\",\n      header: \"header-wrapper\",\n      pagination: \"[js-pagination]\",\n      resultGrid: \"[js-result-grid]\",\n      promotionTile: \"[js-promotion-tile]\",\n      promotionTilevideo: \"[js-promotion-tile] [js-background-video]\",\n      sortDrawerTrigger: \"[js-sort-drawer-trigger]\",\n      sortDropdowns:\n        \"[js-sort-top-bar], [js-sort-sticky-button], [js-sort-mobile-drawer]\",\n      sortTriggerValue: \"[js-sort-trigger-value]\",\n      stickyFilterSort: \"[js-sticky-filter-sort-button]\",\n      topBar: \"[js-result-grid-top-bar]\",\n    }\n\n    this.classes = {\n      active: \"active\",\n      hidden: \"hidden\",\n      loading: \"loading\",\n      visible: \"is-visible\",\n    }\n\n    this.ids = {\n      filterDrawer: \"filterDrawer\",\n      mobileSortDrawer: \"mobileSortDrawer\",\n    }\n\n    this.breakpoints = {\n      smallDesktop: getMediaQuery(\"small-desktop\"),\n    }\n\n    this.events = {\n      openFilterDrawer: new CustomEvent(\n        MODAL_POPUP_OPEN(this.ids.filterDrawer),\n      ),\n      closeFilterDrawer: new CustomEvent(\n        MODAL_POPUP_CLOSE(this.ids.filterDrawer),\n      ),\n      openSortDrawer: new CustomEvent(\n        MODAL_POPUP_OPEN(this.ids.mobileSortDrawer),\n      ),\n      closeSortDrawer: new CustomEvent(\n        MODAL_POPUP_CLOSE(this.ids.mobileSortDrawer),\n      ),\n    }\n  }\n\n  connectedCallback() {\n    this.controller = new AbortController()\n    this.sectionId = this.dataset.sectionId\n    this.sectionPaddingTop = parseInt(\n      getComputedStyle(this)\n        .getPropertyValue(\"--section-padding-top\")\n        .replace(\"px\", \"\"),\n      10,\n    )\n    this.eventOptions = { signal: this.controller.signal }\n\n    this.header = document.querySelector(this.selectors.header)\n    this.announcementBar = document.querySelector(\n      this.selectors.announcementBar,\n    )\n    this.headerHeight = 0\n    this.announcementHeight = 0\n    this.getHeaderAnnouncementHeight()\n    document.addEventListener(\n      HEADER_HEIGHT_UPDATED,\n      this.handleHeaderHeightChange.bind(this),\n      this.eventOptions,\n    )\n    document.addEventListener(\n      ANNOUNCEMENT_HEIGHT_UPDATED,\n      this.handleAnnouncementHeightChange.bind(this),\n      this.eventOptions,\n    )\n\n    this.filterDrawerTriggers = this.querySelectorAll(\n      `${this.selectors.filterDrawerTrigger}, ${this.selectors.stickyFilterDrawerTrigger}`,\n    )\n    this.filterDrawerHeading = this.querySelector(\n      this.selectors.filterDrawerHeading,\n    )\n    this.filterDrawerViewResults = this.querySelector(\n      this.selectors.filterDrawerViewResults,\n    )\n    this.filterDrawerViewResultsIdleLabels = this.querySelectorAll(\n      this.selectors.filterDrawerViewResultsIdleLabel,\n    )\n    this.activeFilters = this.querySelector(this.selectors.activeFilters)\n    this.filterGroups = this.querySelectorAll(this.selectors.filterGroup)\n    this.topBar = this.querySelector(this.selectors.topBar)\n    this.sortTriggerValue = this.querySelector(this.selectors.sortTriggerValue)\n    this.sortDropdowns = this.querySelectorAll(this.selectors.sortDropdowns)\n    this.resultGrid = this.querySelector(this.selectors.resultGrid)\n    this.promotionTiles = this.querySelectorAll(this.selectors.promotionTile)\n    this.filterSortFormComponent = this.querySelector(\n      this.selectors.filterSortFormComponent,\n    )\n    this.pagination = this.querySelector(this.selectors.pagination)\n\n    this.initFilterDrawerTriggers()\n\n    this.filterDrawerViewResults?.addEventListener(\n      \"click\",\n      this.handleViewResultsClick.bind(this),\n      this.eventOptions,\n    )\n\n    this.addEventListener(\n      FILTER_SORT_CHANGED,\n      this.handleFilterSortFormChange.bind(this),\n      this.eventOptions,\n    )\n\n    this.initSortDropdowns()\n\n    if (\n      this.dataset.filterEnabled === \"true\" ||\n      this.dataset.sortEnabled === \"true\"\n    ) {\n      this.initStickyFilterSortButton()\n    }\n\n    this.sortDrawerTrigger.addEventListener(\n      \"click\",\n      this.openSortDrawer.bind(this),\n      this.eventOptions,\n    )\n\n    // Show the sticky filter/sort button when the mobile sort drawer is closed\n    window.addEventListener(\n      MODAL_POPUP_CLOSED(this.ids.mobileSortDrawer),\n      this.showStickyFilterSort.bind(this),\n      this.eventOptions,\n    )\n  }\n\n  initFilterDrawerTriggers() {\n    this.filterDrawerTriggers.forEach((trigger) => {\n      trigger.addEventListener(\n        \"click\",\n        this.handleFilterDrawerOpen.bind(this),\n        this.eventOptions,\n      )\n    })\n\n    // Check whether we should show the sticky filter/sort button when the filter drawer is closed\n    window.addEventListener(\n      MODAL_POPUP_CLOSED(this.ids.filterDrawer),\n      this.handleFilterDrawerClose.bind(this),\n      this.eventOptions,\n    )\n  }\n\n  initStickyFilterSortButton() {\n    this.siteFooter = document.querySelector(this.selectors.footer)\n    this.stickyFilterSort = this.querySelector(this.selectors.stickyFilterSort)\n    this.sortDrawerTrigger = this.querySelector(\n      this.selectors.sortDrawerTrigger,\n    ).parentNode\n\n    this.mobileFooterObserver = new IntersectionObserver(\n      ([{ isIntersecting: visible }]) => {\n        if (visible) {\n          this.mobileTopBarObserver.disconnect()\n          this.hideStickyFilterSort()\n        } else {\n          this.mobileTopBarObserver.observe(this.topBar)\n          this.showStickyFilterSort()\n        }\n      },\n      { threshold: 0.05 },\n    )\n\n    this.mobileTopBarObserver = new IntersectionObserver(\n      ([{ isIntersecting: visible, boundingClientRect }]) => {\n        if (visible) {\n          this.showStickyFilterSort()\n        } else {\n          if (boundingClientRect.top <= 0) {\n            this.showStickyFilterSort()\n          } else {\n            this.hideStickyFilterSort()\n          }\n        }\n      },\n    )\n\n    if (this.dataset.stickyFilterSortEnabled === \"true\") {\n      this.footerObserver = new IntersectionObserver(\n        ([{ isIntersecting: visible }]) => {\n          if (visible) {\n            this.topBarObserver.disconnect()\n            this.hideStickyFilterSort()\n          } else {\n            this.topBarObserver.observe(this.topBar)\n          }\n        },\n        { threshold: 0.1 },\n      )\n\n      this.topBarObserver = new IntersectionObserver(\n        ([{ isIntersecting: visible, boundingClientRect }]) => {\n          if (visible) {\n            this.topBar.classList.add(this.classes.visible)\n            this.hideStickyFilterSort()\n          } else {\n            this.topBar.classList.remove(this.classes.visible)\n\n            if (\n              boundingClientRect.top <=\n              this.headerHeight + this.announcementHeight\n            ) {\n              this.showStickyFilterSort()\n            } else {\n              this.hideStickyFilterSort()\n            }\n          }\n        },\n        {\n          rootMargin: `-${\n            this.headerHeight + this.announcementHeight\n          }px 0px 0px 0px`,\n        },\n      )\n    }\n\n    // Watch for small-desktop breakpoint to handle sticky/filter button visibility\n    atBreakpointChange(1024, this.handleWindowResize.bind(this))\n    this.handleWindowResize()\n  }\n\n  handleFilterDrawerOpen(event) {\n    this.hideStickyFilterSort()\n\n    // If the open was triggered by the sticky filter/sort button, we need to delay\n    //  to allow the button to animate out.\n    // Otherwise, just open.\n    if (event.target.matches(this.selectors.stickyFilterDrawerTrigger)) {\n      setTimeout(() => {\n        window.dispatchEvent(this.events.openFilterDrawer)\n      }, 240)\n    } else {\n      window.dispatchEvent(this.events.openFilterDrawer)\n    }\n  }\n\n  handleFilterDrawerClose() {\n    if (\n      !this.topBar.classList.contains(this.classes.visible) &&\n      this.dataset.stickyFilterSortEnabled === \"true\"\n    ) {\n      this.showStickyFilterSort()\n    }\n  }\n\n  handleViewResultsClick() {\n    window.dispatchEvent(this.events.closeFilterDrawer)\n  }\n\n  handleFilterSortFormChange(event) {\n    const url = `${window.location.pathname}?section_id=${this.sectionId}&${event.detail.searchParams}`\n\n    const topBarScrollTop =\n      this.topBar.getBoundingClientRect().top +\n      window.scrollY -\n      this.sectionPaddingTop -\n      this.headerHeight -\n      this.announcementHeight\n\n    // Scroll to the top bar\n    window.scrollTo({ top: topBarScrollTop, behaviour: \"smooth\" })\n\n    this.updateURLHash(event.detail.searchParams)\n    this.classList.add(this.classes.loading)\n\n    fetch(url)\n      .then((res) => res.text())\n      .then((text) => {\n        const doc = new DOMParser().parseFromString(text, \"text/html\")\n\n        const newresultGrid = doc.querySelector(this.selectors.resultGrid)\n        const newPagination = doc.querySelector(this.selectors.pagination)\n\n        if (this.dataset.filterEnabled === \"true\") {\n          const newFilterDrawerHeading = doc.querySelector(\n            this.selectors.filterDrawerHeading,\n          )\n          const newFilterDrawerViewResultsIdleLabel = doc.querySelector(\n            this.selectors.filterDrawerViewResultsIdleLabel,\n          )\n          const newActiveFilters = doc.querySelector(\n            this.selectors.activeFilters,\n          )\n          const newFilterDrawerTrigger = doc.querySelector(\n            this.selectors.filterDrawerTrigger,\n          )\n\n          this.filterDrawerHeading.innerHTML = newFilterDrawerHeading.innerHTML\n\n          this.filterDrawerViewResultsIdleLabels.forEach((label) => {\n            label.innerHTML = newFilterDrawerViewResultsIdleLabel.innerHTML\n          })\n\n          this.activeFilters.innerHTML = newActiveFilters.innerHTML\n\n          this.filterGroups.forEach((group) => {\n            const newGroup = doc.getElementById(group.id)\n            const groupParent = group.closest(this.selectors.filterGroupParent)\n\n            if (newGroup) {\n              groupParent.classList.remove(this.classes.hidden)\n              group.innerHTML = newGroup.innerHTML\n            } else {\n              groupParent.classList.add(this.classes.hidden)\n            }\n          })\n\n          this.filterDrawerTriggers.forEach((trigger) => {\n            trigger.innerHTML = newFilterDrawerTrigger.innerHTML\n          })\n        }\n\n        this.resultGrid.innerHTML = newresultGrid.innerHTML\n        this.resultGrid.classList = newresultGrid.classList\n        this.pagination.innerHTML = newPagination.innerHTML\n        this.updateSortDropdowns(event.detail.sortBy)\n        this.classList.remove(this.classes.loading)\n\n        const filterRepaintEvent = new CustomEvent(FILTER_REPAINT, {\n          detail: { newDocument: doc },\n        })\n\n        this.filterSortFormComponent.dispatchEvent(filterRepaintEvent)\n      })\n  }\n\n  updateURLHash(searchParams) {\n    history.pushState(\n      { searchParams },\n      \"\",\n      `${window.location.pathname}${searchParams && \"?\".concat(searchParams)}`,\n    )\n  }\n\n  initSortDropdowns() {\n    this.sortDropdowns.forEach((dropdown) => {\n      const inputs = dropdown.querySelectorAll(\"input\")\n\n      // Add a change listener to each input so that we can emit an event with the change\n      inputs.forEach((input) => {\n        input.addEventListener(\n          \"click\",\n          this.handleSortOptionClick.bind(this),\n          this.eventOptions,\n        )\n\n        input.addEventListener(\n          \"keydown\",\n          this.handleSortOptionKeydown.bind(this),\n          this.eventOptions,\n        )\n      })\n    })\n  }\n\n  updateSortDropdowns(sortBy) {\n    this.dataset.currentSort = sortBy\n\n    this.sortDropdowns.forEach((dropdown) => {\n      const newSelectedInput = dropdown.querySelector(\n        `input[value=\"${sortBy}\"]`,\n      )\n      newSelectedInput.checked = true\n    })\n  }\n\n  handleSortOptionKeydown(event) {\n    event.preventDefault()\n\n    const inputs = event.currentTarget\n      .closest(this.selectors.sortDropdowns)\n      .querySelectorAll(\"input\")\n    let currentInputIndex\n\n    for (let i = 0; i < inputs.length; i++) {\n      if (inputs[i] === event.target) {\n        currentInputIndex = i\n        break\n      }\n    }\n\n    switch (event.key) {\n      case \"ArrowUp\": {\n        let previousInputIndex = currentInputIndex - 1\n\n        // If the current input is the first, then the \"previous\" should be the last\n        if (previousInputIndex < 0) {\n          previousInputIndex = inputs.length - 1\n        }\n\n        inputs[previousInputIndex].checked = true\n        inputs[previousInputIndex].focus()\n        break\n      }\n\n      case \"ArrowDown\": {\n        let nextInputIndex = currentInputIndex + 1\n\n        // If the current input is the first, then the \"previous\" should be the last\n        if (nextInputIndex === inputs.length) {\n          nextInputIndex = 0\n        }\n\n        inputs[nextInputIndex].checked = true\n        inputs[nextInputIndex].focus()\n        break\n      }\n\n      case \" \": {\n        if (event.target.value === this.dataset.currentSort) {\n          this.closeSortDropdown(\n            event.target.closest(this.selectors.sortDropdowns),\n          )\n        } else {\n          this.applySortChange(\n            event.target.value,\n            event.target.dataset.label,\n            event.target.closest(this.selectors.sortDropdowns),\n          )\n        }\n      }\n    }\n  }\n\n  handleSortOptionClick(event) {\n    if (event.target.value !== this.dataset.currentSort) {\n      this.applySortChange(\n        event.target.value,\n        event.target.dataset.label,\n        event.target.closest(this.selectors.sortDropdowns),\n      )\n    }\n  }\n\n  applySortChange(sortBy, label, parentDropdown) {\n    const sortChangedEvent = new CustomEvent(SORT_CHANGED, {\n      detail: { sortBy },\n    })\n\n    this.filterSortFormComponent.dispatchEvent(sortChangedEvent)\n    this.sortTriggerValue.innerText = label\n    this.closeSortDropdown(parentDropdown)\n  }\n\n  closeSortDropdown(dropdown) {\n    const disclosureWrapper = dropdown.closest(this.selectors.disclosureWrapper)\n\n    if (disclosureWrapper) {\n      disclosureWrapper.removeAttribute(\"open\")\n    } else {\n      this.closeSortDrawer()\n    }\n  }\n\n  handleWindowResize() {\n    // If we're above small-desktop, connect an observer to show/hide the sticky\n    // filter/sort button when the top bar or footer are in view.\n    // Otherwise, connect a mobile-specific observer for when the footer or\n    // banner are in view.\n    if (window.matchMedia(this.breakpoints.smallDesktop).matches) {\n      this.hideStickyFilterSort()\n      this.mobileFooterObserver.disconnect()\n      this.mobileTopBarObserver.disconnect()\n\n      if (this.dataset.stickyFilterSortEnabled === \"true\") {\n        this.footerObserver.observe(this.siteFooter)\n      }\n    } else {\n      this.hideStickyFilterSort()\n\n      if (this.dataset.stickyFilterSortEnabled === \"true\") {\n        this.footerObserver.disconnect()\n        this.topBarObserver.disconnect()\n      }\n\n      this.mobileFooterObserver.observe(this.siteFooter)\n    }\n  }\n\n  openSortDrawer() {\n    this.hideStickyFilterSort()\n\n    // Delay to allow sticky filter/sort button to animate out.\n    setTimeout(() => {\n      window.dispatchEvent(this.events.openSortDrawer)\n    }, 240)\n  }\n\n  closeSortDrawer() {\n    window.dispatchEvent(this.events.closeSortDrawer)\n  }\n\n  hideStickyFilterSort() {\n    this.stickyFilterSort?.classList.remove(this.classes.active)\n  }\n\n  showStickyFilterSort() {\n    this.stickyFilterSort?.classList.add(this.classes.active)\n  }\n\n  getHeaderAnnouncementHeight() {\n    if (this.header.dataset.enableStickyHeader === \"true\") {\n      this.headerHeight = parseInt(\n        getComputedStyle(document.documentElement)\n          .getPropertyValue(\"--header-height\")\n          .replace(\"px\", \"\"),\n        10,\n      )\n    }\n\n    if (\n      this.announcementBar &&\n      this.announcementBar.hasAttribute(\"data-sticky\")\n    ) {\n      this.announcementHeight = parseInt(\n        getComputedStyle(document.documentElement)\n          .getPropertyValue(\"--announcement-height\")\n          .replace(\"px\", \"\"),\n        10,\n      )\n    }\n  }\n\n  handleHeaderHeightChange(event) {\n    if (this.header.dataset.enableStickyHeader === \"true\") {\n      this.headerHeight = event.detail.height\n      this.mobileFooterObserver.disconnect()\n      this.mobileTopBarObserver.disconnect()\n      this.footerObserver?.disconnect()\n      this.topBarObserver?.disconnect()\n      this.initStickyFilterSortButton()\n    }\n  }\n\n  handleAnnouncementHeightChange(event) {\n    if (\n      this.announcementBar &&\n      this.announcementBar.hasAttribute(\"data-sticky\")\n    ) {\n      this.announcementHeight = event.detail.height\n      this.mobileFooterObserver.disconnect()\n      this.mobileTopBarObserver.disconnect()\n      this.footerObserver?.disconnect()\n      this.topBarObserver?.disconnect()\n      this.initStickyFilterSortButton()\n    }\n  }\n\n  disconnectedCallback() {\n    this.controller.abort()\n    this.documentObserver.disconnect()\n    this.mobileFooterObserver.disconnect()\n    this.mobileTopBarObserver.disconnect()\n    this.footerObserver?.disconnect()\n    this.topBarObserver?.disconnect()\n    atBreakpointChange.unload()\n  }\n}\n\nif (!customElements.get(\"search-result-grid\")) {\n  customElements.define(\"search-result-grid\", SearchResultGrid)\n}\n","export default () => {\n  const pageTransitionOverlay = document.querySelector(\n    \"#page-transition-overlay\",\n  )\n  const animationDuration = 200\n\n  if (pageTransitionOverlay) {\n    pageTransitionOverlay.classList.remove(\"skip-transition\")\n\n    setTimeout(function () {\n      pageTransitionOverlay.classList.remove(\"active\")\n    }, 0)\n\n    setTimeout(() => {\n      // Prevent the theme editor from seeing this\n      pageTransitionOverlay.classList.remove(\"active\")\n    }, animationDuration)\n\n    document.body.addEventListener(\"click\", (event) => {\n      const target = event.target\n\n      // Only want links...\n      if (\n        target.tagName !== \"A\" ||\n        !target.getAttribute(\"href\") ||\n        target.getAttribute(\"target\") === \"_blank\" ||\n        target.classList.contains(\"no-transition\")\n      ) {\n        return\n      }\n\n      const href = target.getAttribute(\"href\")\n\n      // That aren't anchors or mailto/tel links\n      if (\n        href[0] === \"#\" ||\n        href.indexOf(\"mailto:\") === 0 ||\n        href.indexOf(\"tel:\") === 0\n      ) {\n        return\n      }\n\n      onClickedToLeave(event, target)\n    })\n\n    window.onpageshow = function (e) {\n      if (e.persisted) {\n        pageTransitionOverlay.classList.remove(\"active\")\n      }\n    }\n  }\n\n  function onClickedToLeave(event, target) {\n    // avoid interupting open-in-new-tab click\n    if (event.ctrlKey || event.metaKey) return\n\n    event.preventDefault()\n\n    // Hint to browser to prerender destination\n    const linkHint = document.createElement(\"link\")\n    linkHint.setAttribute(\"rel\", \"prerender\")\n    linkHint.setAttribute(\"href\", target.href)\n\n    document.head.appendChild(linkHint)\n\n    setTimeout(() => {\n      window.location.href = target.href\n    }, animationDuration)\n\n    pageTransitionOverlay.classList.add(\"active\")\n  }\n}\n","import pageTransition from \"@/lib/page-transition\"\nimport { handleTab } from \"@/lib/a11y\"\nimport widthWatch from \"@/lib/width-watcher\"\nimport { dialog } from \"@/lib/modals.js\"\nimport \"@/lib/navigation\"\n\nimport * as cart from \"@/lib/cart.js\"\nimport EVENTS from \"@/lib/events.js\"\nimport \"./sections/header-group.js\"\n\n// Import sections\nimport \"@/sections\"\n\n// Page transitions\npageTransition()\n\n// a11y tab handler\nhandleTab()\n\n// widthWatch breakpoint emmiter\nwidthWatch()\n\n// Initialize modals\ndocument\n  .querySelectorAll(\"dialog[data-fluco-dialog]\")\n  .forEach((el) => dialog(el))\n\n// Maintain a local representation of the cart so it's accessible to JS\ncart.get().then((cartData) => {\n  window.theme.cartData = cartData\n})\n\ndocument.addEventListener(EVENTS.CART_CHANGED, (event) => {\n  window.theme.cartData = event.detail.cart\n})\n\ndocument.addEventListener(EVENTS.CART_ITEM_ADDED, () => {\n  if (window.flu.cartType === \"drawer\") {\n    window.dispatchEvent(new Event(EVENTS.CART_DRAWER_OPEN))\n  } else {\n    window.location = window.theme.routes.cart.base\n  }\n})\n\n// Make it easy to see exactly what theme version\n// this is by commit SHA\nwindow.SHA = \"__gitSHA\"\n\nif (\n  !sessionStorage.getItem(\"flu_stat_recorded\") &&\n  !window.Shopify?.designMode\n) {\n  // eslint-disable-next-line no-process-env\n  fetch(process.env.FLU_STATS_ENDPOINT, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      ...window.theme.coreData,\n      s: window.Shopify?.shop,\n      r: window.Shopify?.theme?.role,\n    }),\n  })\n\n  if (window.sessionStorage) {\n    sessionStorage.setItem(\"flu_stat_recorded\", \"true\")\n  }\n}\n","const handleTab = () => {\n  const formElments = [\"input\", \"textarea\", \"select\"]\n\n  // Determine if the user is a mouse or keyboard user\n  function handleFirstTab(event) {\n    if (\n      event.key === \"Tab\" &&\n      !formElments.includes(document.activeElement.tagName.toLowerCase())\n    ) {\n      document.body.classList.add(\"user-is-tabbing\")\n\n      window.addEventListener(\"mousedown\", handleMouseDownOnce)\n      window.removeEventListener(\"keydown\", handleFirstTab)\n    }\n  }\n\n  function handleMouseDownOnce() {\n    document.body.classList.remove(\"user-is-tabbing\")\n\n    window.addEventListener(\"keydown\", handleFirstTab)\n    window.removeEventListener(\"mousedown\", handleMouseDownOnce)\n  }\n\n  window.addEventListener(\"keydown\", handleFirstTab)\n}\n\nconst focusFormStatus = (node) => {\n  const formStatus = node.querySelector(\".form-status\")\n\n  if (!formStatus) return\n\n  const focusElement = formStatus.querySelector(\"[data-form-status]\")\n\n  if (!focusElement) return\n\n  focusElement.focus()\n}\n\nconst prefersReducedMotion = () => {\n  return window.matchMedia(\"(prefers-reduced-motion: reduce)\").matches\n}\n\nexport { handleTab, focusFormStatus, prefersReducedMotion }\n"],"names":["n","e","i","o","t","r","f","d","p","u","w","a","window","pageXOffset","pageYOffset","innerHeight","innerWidth","length","x","y","px","py","vh","pvh","vw","pvw","requestAnimationFrame","srraf","indexOf","push","performance","now","update","this","destroy","splice","breakpoints","Dialog","config","openMethod","reusable","dynamicContent","blurDismiss","constructor","element","flu","dialogs","dataset","flucoDialog","console","error","data","id","title","querySelector","description","content","registerDialog","eventController","AbortController","addEventListener","open","signal","close","event","preventDefault","target","closest","handleCloseButtonClick","value","textContent","setTitle","setDescription","innerHTML","setContent","setReusable","setBlurDismiss","modal","setModal","backdropDismiss","setBackdropDismiss","callbackOpen","callback","setCallbackOpen","callbackClose","setCallbackClose","detail","classList","remove","emit","setDynamicContent","add","closeAnimations","getAnimations","actuallyClose","clear","once","events","dom","deregister","abort","closeButton","removeEventListener","bind","deregisterDialog","setAttribute","key","eventName","dispatchEvent","Event","document","body","contains","newDialog","callbackFunction","dialog","Object","entries","debounce","timer","func","time","clearTimeout","setTimeout","getMediaQuery","querySize","getComputedStyle","documentElement","getPropertyValue","warn","EVENTS","QUANTITY_INPUT_CHANGE","QUICK_ADD_SUCCESS","QUICK_ADD_ERROR","PRODUCT_VARIANT_CHANGING","PRODUCT_VARIANT_CHANGED","PRODUCT_ADD_SUCCESS","PRODUCT_ADD_ERROR","CART_ITEM_ADDED","CART_ITEM_CHANGED","CART_ITEM_CHANGE_ERROR","CART_ITEM_REMOVED","CART_NOTE_CHANGED","CART_NOTE_CHANGED_ERROR","CART_CHANGED","CART_ERROR","CART_ITEM_CHANGE_PENDING","CART_DRAWER_OPENING","CART_DRAWER_OPEN","CART_DRAWER_CLOSE","CART_NOTE_OPENED","FILTER_REPAINT","FILTER_SORT_CHANGED","SORT_CHANGED","ANNOUNCEMENT_HEIGHT_UPDATED","HEADER_HEIGHT_UPDATED","SHOPIFY_BLOCK_SELECT","SHOPIFY_BLOCK_DESELECT","SHOPIFY_SECTION_DESELECT","SHOPIFY_SECTION_SELECT","SHOPIFY_SECTION_LOAD","SHOPIFY_SECTION_UNLOAD","ANNOUNCEMENT_BAR_STICKY_CHANGE","MODAL_PASSWORD_LOGIN_OPEN","MODAL_ADDRESS_NEW_OPEN","MODAL_ADDRESS_EDIT_OPEN","addressId","MODAL_POPUP_OPEN","MODAL_POPUP_CLOSE","MODAL_POPUP_CLOSED","IMPACT_LOGO_LOADED","IMPACT_LOGO_NOT_VISIBLE","IMPACT_LOGO_PARTIALLY_VISIBLE","IMPACT_LOGO_VISIBLE","MODAL_MOBILE_CROSSBORDER_LANGUAGE_DRAWER_OPEN","MODAL_MOBILE_CROSSBORDER_COUNTRY_DRAWER_OPEN","SCROLL_SLIDER_CHANGED","scrollerId","SCROLL_SLIDER_GO_TO_SLIDE","BUTTON_STATE_STARTED","BUTTON_STATE_COMPLETED","BUTTON_STATE_INCOMPLETED","SEARCH_INPUT_CHANGED","PREDICTIVE_SEARCH_DRAWER_OPENING","PREDICTIVE_SEARCH_DRAWER_OPEN","PREDICTIVE_SEARCH_DRAWER_CLOSE","Debounce","NavigationWrapper","HTMLElement","selectors","nav","submenu","submenuContainer","submenuList","submenuItem","stateClasses","submenuInner","drawerToggle","drawerToggleInput","drawerCloseLabel","secondaryDrawerToggle","secondaryDrawerToggleHeader","toggles","backdrop","primary","primaryInner","childAnimationTarget","secondaryDropdown","tertiaryDropdown","primaryDropdownItem","secondaryDropdownItem","megamenu","promoImage","themeEditorSelected","language","country","scrollSentinels","classes","drawer","drawerBreakpoint","dropdownBreakpoint","openDrawer","closeDrawer","openDrawerPanel","closeDrawerPanel","openDropdown","closeDropdown","dropdownOpensLeft","opening","closing","active","imageVisible","handleThemeEditorBlockEvent","evt","menu","blockId","closeOpenMenus","type","querySelectorAll","forEach","el","connectedCallback","eventOptions","sectionId","disconnectedCallback","Shopify","designMode","getAttribute","replace","promoVisibleTimingOffset","determineLayoutBreakpoint","setLayoutClasses","setEachSubmenuOpenHeight","setMegamenuPosition","setTertiaryDropdownOpeningDirection","widthWatcher","languageTrigger","CustomEvent","countryTrigger","handleDrawerToggleClick","handleDrawerCloseKeydown","handleDrawerToggleInputKeydown","toggle","handleSecondaryDrawerToggleClick","handleDropdownMouseEvent","handleDropdownTouchEvent","submenuInners","root","observer","IntersectionObserver","handleIntersectionChange","entry","observe","isIntersecting","hasAttribute","parentNode","scrollTop","drawerClosePrimary","drawerOpenPrimary","drawerCloseSecondary","drawerOpenSecondary","eventDirection","isDrawer","tagName","click","targetElements","pendingAnimationEnds","flatMap","subtree","map","animation","finished","Promise","all","then","focus","catch","submenuTarget","promos","breakpoint","parseFloat","match","setOpenHeightProp","inner","style","removeProperty","maxHeight","top","getBoundingClientRect","screenHeightLimit","menuHeight","offsetHeight","Math","min","setProperty","megamenus","removeAttribute","currentLeft","Number","newLeft","left","scrollX","abs","dropdowns","submenuWidth","parseInt","dropdown","tertiaryMenuTooFarRight","right","tertiary","parent","checked","customElements","get","define","routes","theme","cart","paths","base","change","HeaderGroup","previousImpactLogoVisibility","overscrollThreshold","announcementBar","header","impactLogo","init","ids","filter","Boolean","controller","watcher","includes","announcementBarBox","headerBox","impactLogoBox","announcementBarBoxBottom","scrollY","bottom","headerBoxBottom","impactLogoBoxBottom","instantSticky","stickyHeaderStyle","maxHeightToWatch","impactLogoBoxbottom","handleScroll","stuckHeaderHeight","height","revealLogo","breakpointRegex","AnnouncementBar","static","super","announcementSlider","parentElement","handleBlockSelected","handleBlockDeselected","setHeightVariable","stickIfNecessary","attributeChangedCallback","name","_oldValue","newValue","sliderComponent","stickyCondition","enableStickyAnnouncementBar","setSticky","bool","toggleAttribute","setSliderAutoplay","setSliderActiveBlock","autoplay","activeBlockId","toFixed","lastSetHeight","BlogPosts","sidebar","sidebarImageWrapper","sidebarLink","cursorWithin","wrapper","parentMetaEl","sidebarImage","hoverTrigger","clientX","HeaderWrapper","showCartDrawerButton","showPredictiveSearchDrawerButton","eventController2","_newValue","visibilityState","navigator","sendBeacon","shop","isSticky","enableStickyHeader","PopupsSection","visible","tab","handleSectionLoad","selectedTab","atBreakpointChange","breakpointToWatch","screenUnderBP","clientWidth","currentScreenWidthUnderBP","unload","intersectionWatcher","node","options","instantThreshold","threshold","margin","matchMedia","matches","disconnect","PauseableInterval","delay","pausedTimeLeft","timerIsPaused","timerHasPaused","triggerSetAt","Date","getTime","setInterval","reset","clearTimer","getTimeLeft","pause","resume","clearInterval","isPaused","SlideshowSection","cursor","loadingOverlay","pagination","paginationBullet","paginationNav","parentSection","slide","slideByBlockId","slideImageDesktop","slideImageMobile","slideContent","slideshow","slideshowPause","videoContainer","videoPlaceholderImage","videoPauseButton","videoSlide","currentSlide","loaded","nextSlide","prevCursor","nextCursor","slideTransitionOut","mobile","smallDesktop","strings","slides","slideList","Array","from","firstSlideIndex","lastSlideIndex","firstIndexOnLoad","paginationBullets","bullet","handlePaginationBulletClick","initLoadingOverlay","handleWindowResize","handleSlideSelect","handleSlideDeselect","firstSlideVideoContainer","children","hideLoadingOverlay","MutationObserver","mutations","mutation","childList","firstSlidePlaceholderImage","createClassMutationObserver","attributeFilter","firstSlideImage","firstSlideMobileImage","changeSlide","initAutoplay","currentTarget","mobileController","initCursor","cursorController","initSwipeNav","initPaginationNav","midpoint","offsetWidth","cursorEventOptions","showCursor","updateCursorPosition","hideCursor","slideContentElements","interactiveElementSelectors","interactiveElements","slideContentElement","handleSlideshowClick","pageY","offsetTop","pageX","offsetLeft","direction","irisOrigin","offsetX","offsetY","getNewSlideIndex","handleSwipeStart","handleSwipeEnd","swipeStartX","swipeStartY","swipeEndX","swipeEndY","paginationNavButtons","button","handlePaginationNavClick","timeBetweenSlides","handlePauseClick","accessibility","carouselPlay","carouselPause","newSlideIndex","currentSlideIndex","index","newSlide","find","video","play","selectedSlide","load","setAutoplay","state","loadVimeoAPI","Vimeo","resolve","tag","createElement","src","onload","appendChild","loadYouTubeAPI","YT","onYouTubeIframeAPIReady","youTubePlayerArr","vimeoPlayerArr","internalPlayerArr","addPlayerToTrackingArr","source","player","pausePlayingVideos","pauseVideo","clickPosterToPlayYouTube","unMute","playVideo","onYouTubePlayerStateChange","mute","clickPosterToPlayVimeo","getPaused","paused","setMuted","liquidMadeVideoPlayer","showPoster","hasPoster","playButton","videoInitialized","_initLiquidMadeVideoPlayer","hadPoster","poster","internalVideo","externalVideo","videoProvider","videoId","Player","playerVars","enablejsapi","cc_load_policy","controls","iv_load_policy","playsinline","rel","playlist","onReady","getIframe","tabIndex","onStateChange","initYouTubeVideo","initVimeoVideo","_initDomMadeVideoPlayer","videoType","iframe","muted","updateIframeVimeoVideo","VideoSection","currentVideoWrapper","mobileVideoTemplate","videoTemplate","videoPlayerContainer","requiresTemplate","selectActiveTemplate","initVideo","createVideo","template","videoContent","cloneNode","append","CollectionProductGrid","activeFilters","disclosureWrapper","filterDrawerTrigger","stickyFilterDrawerTrigger","filterDrawerHeading","filterDrawerViewResults","filterDrawerViewResultsIdleLabel","filterGroup","filterGroupParent","filterSortFormComponent","footer","productGrid","promotionTile","promotionTilevideo","sortDrawerTrigger","sortDropdowns","sortTriggerValue","stickyFilterSort","topBar","hidden","loading","filterDrawer","mobileSortDrawer","openFilterDrawer","closeFilterDrawer","openSortDrawer","closeSortDrawer","sectionPaddingTop","headerHeight","announcementHeight","getHeaderAnnouncementHeight","handleHeaderHeightChange","handleAnnouncementHeightChange","filterDrawerTriggers","filterDrawerViewResultsIdleLabels","filterGroups","promotionTiles","initFilterDrawerTriggers","handleViewResultsClick","handleFilterSortFormChange","initSortDropdowns","filterEnabled","sortEnabled","initStickyFilterSortButton","showStickyFilterSort","trigger","handleFilterDrawerOpen","handleFilterDrawerClose","siteFooter","mobileFooterObserver","mobileTopBarObserver","hideStickyFilterSort","boundingClientRect","stickyFilterSortEnabled","footerObserver","topBarObserver","rootMargin","url","location","pathname","searchParams","topBarScrollTop","scrollTo","behaviour","updateURLHash","fetch","res","text","doc","DOMParser","parseFromString","newProductGrid","newPagination","newFilterDrawerHeading","newFilterDrawerViewResultsIdleLabel","newActiveFilters","newFilterDrawerTrigger","label","group","newGroup","getElementById","groupParent","updateSortDropdowns","sortBy","filterRepaintEvent","newDocument","history","pushState","concat","input","handleSortOptionClick","handleSortOptionKeydown","currentSort","inputs","currentInputIndex","previousInputIndex","nextInputIndex","closeSortDropdown","applySortChange","parentDropdown","sortChangedEvent","innerText","documentObserver","icons","setupMediaLightbox","mediaLightbox","import","chunks","photoswipe","PhotoSwipeLightbox","PhotoSwipe","gallery","showHideAnimationType","pswpModule","mainClass","bgOpacity","arrowPrevSVG","leftChevronWithStem","arrowNextSVG","rightChevronWithStem","closeSVG","zoomSVG","zoom","preloadFirstSlide","addFilter","itemData","videoUrl","on","externalVideoHost","externalVideoId","videoPoster","videoAspectRatio","isBackgroundVideo","className","playsInline","currentPoster","posterImage","domMadeVideoPlayer","pswp","currSlide","firstChild","childNodes","dataSource","items","setupModelViewer","modelEls","initModelViewers","errors","model","viewer","ModelViewerUI","parentContainer","closeBtn","initCustomModelButtons","initShopifyXr","ShopifyXR","modelJSON","addModels","JSON","parse","setupXRElements","loadFeatures","version","onLoad","ProductMedia","activeThumb","carouselTabIndex","initialMediaContainer","image","mainMediaContainer","media","mediaItemWrapper","mobileLoopButton","thumb","thumbById","mediaById","thumbContainer","thumbGradient","viewInYourSpace","initActiveMedia","hasMediaGrouping","handleRepaint","updateActiveMainMediaToVariant","handleLeftThumbnailContainerHeight","activeMediaController","hasSingleMedia","mediaLayout","hasProductLightbox","videoPlayerContainers","thumbnailPosition","activeMediaId","thumbnailId","currentMediaEl","currentElement","previousMediaEl","previousElement","updateActiveThumbnails","mediaItemId","mediaType","initViewInYourSpace","updateCarouselA11yNav","prevMediaType","injectedVideoIframe","injectedVideoElement","initThumbnailListeners","initialMedia","mediaEl","initialImg","decode","updateThumbGradientOpacity","thumbnailItems","item","updateActiveMainMedia","thumbnailIndex","currentActiveMediaId","currentThumbnailIndex","scrollIntoView","behavior","block","inline","slideIndex","newMediaId","newFeaturedMedia","newMediaIndex","mediaItemWrappers","lastActiveThumbnail","activeThumbnail","firstMediaId","mediaId","scrollAttribute","scrollDistance","width","beforeOpacity","afterOpacity","thumbContainerScrollHeight","scrollHeight","scrollLeft","thumbContainerScrollWidth","scrollWidth","currentActiveMediaEl","allTabIndexEls","currentTabIndexEls","mediaSize","MainProductDefault","productInner","detailsContainer","mediaContainer","buyButtonBlock","buyButtons","buyButtonDialog","inventoryStatusBlock","mediaBlock","mediaItem","popupModalDialog","priceBlock","productForm","productFormIdInput","skuBlock","stickyAddToCartContent","stickyAddToCartDrawer","storeAvailabilityContainer","variantBlock","variantMediaGrouping","variantSelectedInputs","selectVariantById","changePending","hasError","modalWillOpen","stickyDetailsContainer","stickyMediaContainer","preventAnimation","quickViewProduct","isFeatured","sectionType","productURL","setStickyContainer","withinQuickView","handleNewVariant","stickyContainer","galleryLayout","newElements","newOptionInput","newVariantId","params","URLSearchParams","section_id","set","selectedOptionValues","join","newProductUrl","response","responseText","html","updateUrlWithVariant","dialogKeysToDestroy","updateBlockHTML","htmlVariantId","newOptionId","updateBuyButtonBlockContent","withinStickyModal","updateVariantSelectorBlockContent","newContent","updateMediaBlockContent","setUnavailable","getUrlWithVariant","parsedURL","URL","urlBase","origin","unavailableSelectors","disableSubmitButtons","unavailableString","products","product","unavailable","submitButtonLabels","variantId","href","replaceState","path","contentToUpdateArray","htmlBlock","outerHTML","lastOptionSelectedId","dialogEl","stickyDialog","defaultPopupModalDialog","mobileThumbnailWidthPercentage","variantMediaChangedEvent","bubbles","SearchResultGrid","resultGrid","newresultGrid","pageTransitionOverlay","ctrlKey","metaKey","linkHint","head","onClickedToLeave","onpageshow","persisted","pageTransition","formElments","handleFirstTab","activeElement","toLowerCase","handleMouseDownOnce","handleTab","reversedBreakpoints","reverse","lastSize","widthWatch","method","credentials","json","cartData","cartType","SHA","sessionStorage","getItem","headers","stringify","coreData","s","role","setItem"],"mappings":"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"}